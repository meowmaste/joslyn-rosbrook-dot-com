!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=se.type(t);return"function"===i||se.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(se.isFunction(e))return se.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return se.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(pe.test(e))return se.filter(e,t,i);e=se.filter(e,t)}return se.grep(t,function(t){return se.inArray(t,e)>=0!==i})}function r(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function s(t){var e=be[t]={};return se.each(t.match(_e)||[],function(t,i){e[i]=!0}),e}function o(){me.addEventListener?(me.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(me.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(me.addEventListener||"load"===event.type||"complete"===me.readyState)&&(o(),se.ready())}function h(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(Ce,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Ae.test(i)?se.parseJSON(i):i}catch(r){}se.data(t,e,i)}else i=void 0}return i}function l(t){var e;for(e in t)if(("data"!==e||!se.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(t,e,i,n){if(se.acceptData(t)){var r,s,o=se.expando,a=t.nodeType,h=a?se.cache:t,l=a?t[o]:t[o]&&o;if(l&&h[l]&&(n||h[l].data)||void 0!==i||"string"!=typeof e)return l||(l=a?t[o]=K.pop()||se.guid++:o),h[l]||(h[l]=a?{}:{toJSON:se.noop}),("object"==typeof e||"function"==typeof e)&&(n?h[l]=se.extend(h[l],e):h[l].data=se.extend(h[l].data,e)),s=h[l],n||(s.data||(s.data={}),s=s.data),void 0!==i&&(s[se.camelCase(e)]=i),"string"==typeof e?(r=s[e],null==r&&(r=s[se.camelCase(e)])):r=s,r}}function c(t,e,i){if(se.acceptData(t)){var n,r,s=t.nodeType,o=s?se.cache:t,a=s?t[se.expando]:se.expando;if(o[a]){if(e&&(n=i?o[a]:o[a].data)){se.isArray(e)?e=e.concat(se.map(e,se.camelCase)):e in n?e=[e]:(e=se.camelCase(e),e=e in n?[e]:e.split(" ")),r=e.length;for(;r--;)delete n[e[r]];if(i?!l(n):!se.isEmptyObject(n))return}(i||(delete o[a].data,l(o[a])))&&(s?se.cleanData([t],!0):ne.deleteExpando||o!=o.window?delete o[a]:o[a]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return me.activeElement}catch(t){}}function m(t){var e=Be.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function g(t,e){var i,n,r=0,s=typeof t.getElementsByTagName!==Se?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Se?t.querySelectorAll(e||"*"):void 0;if(!s)for(s=[],i=t.childNodes||t;null!=(n=i[r]);r++)!e||se.nodeName(n,e)?s.push(n):se.merge(s,g(n,e));return void 0===e||e&&se.nodeName(t,e)?se.merge([t],s):s}function y(t){De.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e){return se.nodeName(t,"table")&&se.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function x(t){return t.type=(null!==se.find.attr(t,"type"))+"/"+t.type,t}function _(t){var e=Ke.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){for(var i,n=0;null!=(i=t[n]);n++)se._data(i,"globalEval",!e||se._data(e[n],"globalEval"))}function w(t,e){if(1===e.nodeType&&se.hasData(t)){var i,n,r,s=se._data(t),o=se._data(e,s),a=s.events;if(a){delete o.handle,o.events={};for(i in a)for(n=0,r=a[i].length;r>n;n++)se.event.add(e,i,a[i][n])}o.data&&(o.data=se.extend({},o.data))}}function T(t,e){var i,n,r;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[se.expando]){r=se._data(e);for(n in r.events)se.removeEvent(e,n,r.handle);e.removeAttribute(se.expando)}"script"===i&&e.text!==t.text?(x(e).text=t.text,_(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!se.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&De.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function S(e,i){var n=se(i.createElement(e)).appendTo(i.body),r=t.getDefaultComputedStyle?t.getDefaultComputedStyle(n[0]).display:se.css(n[0],"display");return n.detach(),r}function A(t){var e=me,i=ti[t];return i||(i=S(t,e),"none"!==i&&i||(Ze=(Ze||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Ze[0].contentWindow||Ze[0].contentDocument).document,e.write(),e.close(),i=S(t,e),Ze.detach()),ti[t]=i),i}function C(t,e){return{get:function(){var i=t();if(null!=i)return i?(delete this.get,void 0):(this.get=e).apply(this,arguments)}}}function R(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,r=pi.length;r--;)if(e=pi[r]+i,e in t)return e;return n}function E(t,e){for(var i,n,r,s=[],o=0,a=t.length;a>o;o++)n=t[o],n.style&&(s[o]=se._data(n,"olddisplay"),i=n.style.display,e?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Pe(n)&&(s[o]=se._data(n,"olddisplay",A(n.nodeName)))):s[o]||(r=Pe(n),(i&&"none"!==i||!r)&&se._data(n,"olddisplay",r?i:se.css(n,"display"))));for(o=0;a>o;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[o]||"":"none"));return t}function P(t,e,i){var n=li.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function L(t,e,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,o=0;4>s;s+=2)"margin"===i&&(o+=se.css(t,i+Ee[s],!0,r)),n?("content"===i&&(o-=se.css(t,"padding"+Ee[s],!0,r)),"margin"!==i&&(o-=se.css(t,"border"+Ee[s]+"Width",!0,r))):(o+=se.css(t,"padding"+Ee[s],!0,r),"padding"!==i&&(o+=se.css(t,"border"+Ee[s]+"Width",!0,r)));return o}function D(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=ei(t),o=ne.boxSizing()&&"border-box"===se.css(t,"boxSizing",!1,s);if(0>=r||null==r){if(r=ii(t,e,s),(0>r||null==r)&&(r=t.style[e]),ri.test(r))return r;n=o&&(ne.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+L(t,e,i||(o?"border":"content"),n,s)+"px"}function k(t,e,i,n,r){return new k.prototype.init(t,e,i,n,r)}function O(){return setTimeout(function(){fi=void 0}),fi=se.now()}function F(t,e){var i,n={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)i=Ee[r],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function M(t,e,i){for(var n,r=(_i[e]||[]).concat(_i["*"]),s=0,o=r.length;o>s;s++)if(n=r[s].call(i,e,t))return n}function I(t,e,i){var n,r,s,o,a,h,l,u,c=this,d={},p=t.style,f=t.nodeType&&Pe(t),m=se._data(t,"fxshow");i.queue||(a=se._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,h=a.empty.fire,a.empty.fire=function(){a.unqueued||h()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,se.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],l=se.css(t,"display"),u=A(t.nodeName),"none"===l&&(l=u),"inline"===l&&"none"===se.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==u?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ne.shrinkWrapBlocks()||c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],gi.exec(r)){if(delete e[n],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||se.style(t,n)}if(!se.isEmptyObject(d)){m?"hidden"in m&&(f=m.hidden):m=se._data(t,"fxshow",{}),s&&(m.hidden=!f),f?se(t).show():c.done(function(){se(t).hide()}),c.done(function(){var e;se._removeData(t,"fxshow");for(e in d)se.style(t,e,d[e])});for(n in d)o=M(f?m[n]:0,n,c),n in m||(m[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function B(t,e){var i,n,r,s,o;for(i in t)if(n=se.camelCase(i),r=e[n],s=t[i],se.isArray(s)&&(r=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),o=se.cssHooks[n],o&&"expand"in o){s=o.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=r)}else e[n]=r}function N(t,e,i){var n,r,s=0,o=xi.length,a=se.Deferred().always(function(){delete h.elem}),h=function(){if(r)return!1;for(var e=fi||O(),i=Math.max(0,l.startTime+l.duration-e),n=i/l.duration||0,s=1-n,o=0,h=l.tweens.length;h>o;o++)l.tweens[o].run(s);return a.notifyWith(t,[l,s,i]),1>s&&h?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:se.extend({},e),opts:se.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:fi||O(),duration:i.duration,tweens:[],createTween:function(e,i){var n=se.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)l.tweens[i].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),u=l.props;for(B(u,l.opts.specialEasing);o>s;s++)if(n=xi[s].call(l,t,u,l.opts))return n;return se.map(u,M,l),se.isFunction(l.opts.start)&&l.opts.start.call(t,l),se.fx.timer(se.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function U(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,s=e.toLowerCase().match(_e)||[];if(se.isFunction(i))for(;n=s[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function G(t,e,i,n){function r(a){var h;return s[a]=!0,se.each(t[a]||[],function(t,a){var l=a(e,i,n);return"string"!=typeof l||o||s[l]?o?!(h=l):void 0:(e.dataTypes.unshift(l),r(l),!1)}),h}var s={},o=t===Xi;return r(e.dataTypes[0])||!s["*"]&&r("*")}function j(t,e){var i,n,r=se.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&se.extend(!0,t,i),t}function W(t,e,i){for(var n,r,s,o,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(o in a)if(a[o]&&a[o].test(r)){h.unshift(o);break}if(h[0]in i)s=h[0];else{for(o in i){if(!h[0]||t.converters[o+" "+h[0]]){s=o;break}n||(n=o)}s=s||n}return s?(s!==h[0]&&h.unshift(s),i[s]):void 0}function H(t,e,i,n){var r,s,o,a,h,l={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!h&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=s,s=u.shift())if("*"===s)s=h;else if("*"!==h&&h!==s){if(o=l[h+" "+s]||l["* "+s],!o)for(r in l)if(a=r.split(" "),a[1]===s&&(o=l[h+" "+a[0]]||l["* "+a[0]])){o===!0?o=l[r]:l[r]!==!0&&(s=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+h+" to "+s}}}return{state:"success",data:e}}function X(t,e,i,n){var r;if(se.isArray(e))se.each(e,function(e,r){i||Ki.test(t)?n(t,r):X(t+"["+("object"==typeof r?e:"")+"]",r,i,n)});else if(i||"object"!==se.type(e))n(t,e);else for(r in e)X(t+"["+r+"]",e[r],i,n)}function Y(){try{return new t.XMLHttpRequest}catch(e){}}function V(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function z(t){return se.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var K=[],q=K.slice,$=K.concat,J=K.push,Q=K.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ie="".trim,ne={},re="1.11.0",se=function(t,e){return new se.fn.init(t,e)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,he=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};se.fn=se.prototype={jquery:re,constructor:se,selector:"",length:0,toArray:function(){return q.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:q.call(this)},pushStack:function(t){var e=se.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return se.each(this,t,e)},map:function(t){return this.pushStack(se.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:K.sort,splice:K.splice},se.extend=se.fn.extend=function(){var t,e,i,n,r,s,o=arguments[0]||{},a=1,h=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||se.isFunction(o)||(o={}),a===h&&(o=this,a--);h>a;a++)if(null!=(r=arguments[a]))for(n in r)t=o[n],i=r[n],o!==i&&(l&&i&&(se.isPlainObject(i)||(e=se.isArray(i)))?(e?(e=!1,s=t&&se.isArray(t)?t:[]):s=t&&se.isPlainObject(t)?t:{},o[n]=se.extend(l,s,i)):void 0!==i&&(o[n]=i));return o},se.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===se.type(t)},isArray:Array.isArray||function(t){return"array"===se.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==se.type(t)||t.nodeType||se.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&se.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ae,"ms-").replace(he,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,s=0,o=t.length,a=i(t);if(n){if(a)for(;o>s&&(r=e.apply(t[s],n),r!==!1);s++);else for(s in t)if(r=e.apply(t[s],n),r===!1)break}else if(a)for(;o>s&&(r=e.call(t[s],s,t[s]),r!==!1);s++);else for(s in t)if(r=e.call(t[s],s,t[s]),r===!1)break;return t},trim:ie&&!ie.call("﻿ ")?function(t){return null==t?"":ie.call(t)}:function(t){return null==t?"":(t+"").replace(oe,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?se.merge(n,"string"==typeof t?[t]:t):J.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(Q)return Q.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;i>n;)t[r++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[r++]=e[n++];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],s=0,o=t.length,a=!i;o>s;s++)n=!e(t[s],s),n!==a&&r.push(t[s]);return r},map:function(t,e,n){var r,s=0,o=t.length,a=i(t),h=[];if(a)for(;o>s;s++)r=e(t[s],s,n),null!=r&&h.push(r);else for(s in t)r=e(t[s],s,n),null!=r&&h.push(r);return $.apply([],h)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(r=t[e],e=t,t=r),se.isFunction(t)?(i=q.call(arguments,2),n=function(){return t.apply(e||this,i.concat(q.call(arguments)))},n.guid=t.guid=t.guid||se.guid++,n):void 0},now:function(){return+new Date},support:ne}),se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ue=function(t){function e(t,e,i,n){var r,s,o,a,h,l,c,f,m,g;if((e?e.ownerDocument||e:G)!==k&&D(e),e=e||k,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(F&&!n){if(r=ve.exec(t))if(o=r[1]){if(9===a){if(s=e.getElementById(o),!s||!s.parentNode)return i;if(s.id===o)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&N(e,s)&&s.id===o)return i.push(s),i}else{if(r[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((o=r[3])&&T.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(o)),i}if(T.qsa&&(!M||!M.test(t))){if(f=c=U,m=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=d(t),(c=e.getAttribute("id"))?f=c.replace(_e,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",h=l.length;h--;)l[h]=f+p(l[h]);m=xe.test(t)&&u(e.parentNode)||e,g=l.join(",")}if(g)try{return Z.apply(i,m.querySelectorAll(g)),i}catch(y){}finally{c||e.removeAttribute("id")}}}return b(t.replace(he,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>S.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[U]=!0,t}function r(t){var e=k.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=t.length;n--;)S.attrHandle[i[n]]=e}function o(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||K)-(~t.sourceIndex||K);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(i,n){for(var r,s=t([],i.length,e),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))})})}function u(t){return t&&typeof t.getElementsByTagName!==z&&t}function c(){}function d(t,i){var n,r,s,o,a,h,l,u=X[t+" "];if(u)return i?0:u.slice(0);for(a=t,h=[],l=S.preFilter;a;){(!n||(r=le.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),h.push(s=[])),n=!1,(r=ue.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(he," ")}),a=a.slice(n.length));for(o in S.filter)!(r=fe[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):X(t,h).slice(0)}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,r=i&&"parentNode"===n,s=W++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,s)}:function(e,i,o){var a,h,l=[j,s];if(o){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(h=e[U]||(e[U]={}),(a=h[n])&&a[0]===j&&a[1]===s)return l[2]=a[2];if(h[n]=l,l[2]=t(e,i,o))return!0}}}function m(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function g(t,e,i,n,r){for(var s,o=[],a=0,h=t.length,l=null!=e;h>a;a++)(s=t[a])&&(!i||i(s,n,r))&&(o.push(s),l&&e.push(a));return o}function y(t,e,i,r,s,o){return r&&!r[U]&&(r=y(r)),s&&!s[U]&&(s=y(s,o)),n(function(n,o,a,h){var l,u,c,d=[],p=[],f=o.length,m=n||_(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?m:g(m,d,t,a,h),v=i?s||(n?t:f||r)?[]:o:y;if(i&&i(y,v,a,h),r)for(l=g(v,p),r(l,[],a,h),u=l.length;u--;)(c=l[u])&&(v[p[u]]=!(y[p[u]]=c));if(n){if(s||t){if(s){for(l=[],u=v.length;u--;)(c=v[u])&&l.push(y[u]=c);s(null,v=[],l,h)}for(u=v.length;u--;)(c=v[u])&&(l=s?ee.call(n,c):d[u])>-1&&(n[l]=!(o[l]=c))}}else v=g(v===o?v.splice(f,v.length):v),s?s(null,o,v,h):Z.apply(o,v)})}function v(t){for(var e,i,n,r=t.length,s=S.relative[t[0].type],o=s||S.relative[" "],a=s?1:0,h=f(function(t){return t===e},o,!0),l=f(function(t){return ee.call(e,t)>-1},o,!0),u=[function(t,i,n){return!s&&(n||i!==E)||((e=i).nodeType?h(t,i,n):l(t,i,n))}];r>a;a++)if(i=S.relative[t[a].type])u=[f(m(u),i)];else{if(i=S.filter[t[a].type].apply(null,t[a].matches),i[U]){for(n=++a;r>n&&!S.relative[t[n].type];n++);return y(a>1&&m(u),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(he,"$1"),i,n>a&&v(t.slice(a,n)),r>n&&v(t=t.slice(n)),r>n&&p(t))}u.push(i)}return m(u)}function x(t,i){var r=i.length>0,s=t.length>0,o=function(n,o,a,h,l){var u,c,d,p=0,f="0",m=n&&[],y=[],v=E,x=n||s&&S.find.TAG("*",l),_=j+=null==v?1:Math.random()||.1,b=x.length;for(l&&(E=o!==k&&o);f!==b&&null!=(u=x[f]);f++){if(s&&u){for(c=0;d=t[c++];)if(d(u,o,a)){h.push(u);break}l&&(j=_)}r&&((u=!d&&u)&&p--,n&&m.push(u))}if(p+=f,r&&f!==p){for(c=0;d=i[c++];)d(m,y,o,a);if(n){if(p>0)for(;f--;)m[f]||y[f]||(y[f]=J.call(h));y=g(y)}Z.apply(h,y),l&&!n&&y.length>0&&p+i.length>1&&e.uniqueSort(h)}return l&&(j=_,E=v),m};return r?n(o):o}function _(t,i,n){for(var r=0,s=i.length;s>r;r++)e(t,i[r],n);return n}function b(t,e,i,n){var r,s,o,a,h,l=d(t);if(!n&&1===l.length){if(s=l[0]=l[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&T.getById&&9===e.nodeType&&F&&S.relative[s[1].type]){if(e=(S.find.ID(o.matches[0].replace(be,we),e)||[])[0],!e)return i;t=t.slice(s.shift().value.length)}for(r=fe.needsContext.test(t)?0:s.length;r--&&(o=s[r],!S.relative[a=o.type]);)if((h=S.find[a])&&(n=h(o.matches[0].replace(be,we),xe.test(s[0].type)&&u(e.parentNode)||e))){if(s.splice(r,1),t=n.length&&p(s),!t)return Z.apply(i,n),i;break}}return R(t,l)(n,e,!F,i,xe.test(t)&&u(e.parentNode)||e),i}var w,T,S,A,C,R,E,P,L,D,k,O,F,M,I,B,N,U="sizzle"+-new Date,G=t.document,j=0,W=0,H=i(),X=i(),Y=i(),V=function(t,e){return t===e&&(L=!0),0},z="undefined",K=1<<31,q={}.hasOwnProperty,$=[],J=$.pop,Q=$.push,Z=$.push,te=$.slice,ee=$.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",se=re.replace("w","w#"),oe="\\["+ne+"*("+re+")"+ne+"*(?:([*^$|!~]?=)"+ne+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+se+")|)|)"+ne+"*\\]",ae=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+oe.replace(3,8)+")*)|.*)\\)|)",he=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),pe=new RegExp("^"+se+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,_e=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply($=te.call(G.childNodes),G.childNodes),$[G.childNodes.length].nodeType}catch(Te){Z={apply:$.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}T=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:G,n=i.defaultView;return i!==k&&9===i.nodeType&&i.documentElement?(k=i,O=i.documentElement,F=!C(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){D()},!1):n.attachEvent&&n.attachEvent("onunload",function(){D()})),T.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=ye.test(i.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),T.getById=r(function(t){return O.appendChild(t).id=U,!i.getElementsByName||!i.getElementsByName(U).length}),T.getById?(S.find.ID=function(t,e){if(typeof e.getElementById!==z&&F){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},S.filter.ID=function(t){var e=t.replace(be,we);return function(t){return t.getAttribute("id")===e}}):(delete S.find.ID,S.filter.ID=function(t){var e=t.replace(be,we);return function(t){var i=typeof t.getAttributeNode!==z&&t.getAttributeNode("id");return i&&i.value===e}}),S.find.TAG=T.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==z?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},S.find.CLASS=T.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==z&&F?e.getElementsByClassName(t):void 0},I=[],M=[],(T.qsa=ye.test(i.querySelectorAll))&&(r(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||M.push(":checked")}),r(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(T.matchesSelector=ye.test(B=O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){T.disconnectedMatch=B.call(t,"div"),B.call(t,"[s!='']:x"),I.push("!=",ae)}),M=M.length&&new RegExp(M.join("|")),I=I.length&&new RegExp(I.join("|")),e=ye.test(O.compareDocumentPosition),N=e||ye.test(O.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return L=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!T.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===G&&N(G,t)?-1:e===i||e.ownerDocument===G&&N(G,e)?1:P?ee.call(P,t)-ee.call(P,e):0:4&n?-1:1)}:function(t,e){if(t===e)return L=!0,0;var n,r=0,s=t.parentNode,a=e.parentNode,h=[t],l=[e];if(!s||!a)return t===i?-1:e===i?1:s?-1:a?1:P?ee.call(P,t)-ee.call(P,e):0;if(s===a)return o(t,e);for(n=t;n=n.parentNode;)h.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;h[r]===l[r];)r++;return r?o(h[r],l[r]):h[r]===G?-1:l[r]===G?1:0},i):k},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==k&&D(t),i=i.replace(ce,"='$1']"),!(!T.matchesSelector||!F||I&&I.test(i)||M&&M.test(i)))try{var n=B.call(t,i);if(n||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return e(i,k,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==k&&D(t),N(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==k&&D(t);var i=S.attrHandle[e.toLowerCase()],n=i&&q.call(S.attrHandle,e.toLowerCase())?i(t,e,!F):void 0;return void 0!==n?n:T.attributes||!F?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(L=!T.detectDuplicates,P=!T.sortStable&&t.slice(0),t.sort(V),L){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return P=null,t},A=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=A(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=A(e);return i},S=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(be,we),t[3]=(t[4]||t[5]||"").replace(be,we),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:i&&de.test(i)&&(e=d(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(be,we).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==z&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var s=e.attr(r,t);return null==s?"!="===i:i?(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s+" ").indexOf(n)>-1:"|="===i?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,h){var l,u,c,d,p,f,m=s!==o?"nextSibling":"previousSibling",g=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!h&&!a;if(g){if(s){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===y:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&v){for(u=g[U]||(g[U]={}),l=u[t]||[],p=l[0]===j&&l[1],d=l[0]===j&&l[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[j,p,d];break}}else if(v&&(l=(e[U]||(e[U]={}))[t])&&l[0]===j)d=l[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==y:1!==c.nodeType)||!++d||(v&&((c[U]||(c[U]={}))[t]=[j,d]),c!==e)););return d-=r,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var r,s=S.pseudos[t]||S.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[U]?s(i):s.length>1?(r=[t,t,"",i],S.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=s(t,i),o=r.length;o--;)n=ee.call(t,r[o]),t[n]=!(e[n]=r[o])}):function(t){return s(t,0,r)}):s}},pseudos:{not:n(function(t){var e=[],i=[],r=R(t.replace(he,"$1"));return r[U]?n(function(t,e,i,n){for(var s,o=r(t,null,n,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,n,s){return e[0]=t,r(e,null,s,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||A(e)).indexOf(t)>-1}}),lang:n(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(be,we).toLowerCase(),function(e){var i;do if(i=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[0>i?i+e:i]}),even:l(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:l(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},S.pseudos.nth=S.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})S.pseudos[w]=h(w);return c.prototype=S.filters=S.pseudos,S.setFilters=new c,R=e.compile=function(t,e){var i,n=[],r=[],s=Y[t+" "];if(!s){for(e||(e=d(t)),i=e.length;i--;)s=v(e[i]),s[U]?n.push(s):r.push(s);s=Y(t,x(r,n))}return s},T.sortStable=U.split("").sort(V).join("")===U,T.detectDuplicates=!!L,D(),T.sortDetached=r(function(t){return 1&t.compareDocumentPosition(k.createElement("div"))
}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),T.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(ie,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);se.find=ue,se.expr=ue.selectors,se.expr[":"]=se.expr.pseudos,se.unique=ue.uniqueSort,se.text=ue.getText,se.isXMLDoc=ue.isXML,se.contains=ue.contains;var ce=se.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;se.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?se.find.matchesSelector(n,t)?[n]:[]:se.find.matches(t,se.grep(e,function(t){return 1===t.nodeType}))},se.fn.extend({find:function(t){var e,i=[],n=this,r=n.length;if("string"!=typeof t)return this.pushStack(se(t).filter(function(){for(e=0;r>e;e++)if(se.contains(n[e],this))return!0}));for(e=0;r>e;e++)se.find(t,n[e],i);return i=this.pushStack(r>1?se.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ce.test(t)?se(t):t||[],!1).length}});var fe,me=t.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ye=se.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ge.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||fe).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof se?e[0]:e,se.merge(this,se.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:me,!0)),de.test(i[1])&&se.isPlainObject(e))for(i in e)se.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=me.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return fe.find(t);this.length=1,this[0]=n}return this.context=me,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):se.isFunction(t)?"undefined"!=typeof fe.ready?fe.ready(t):t(se):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),se.makeArray(t,this))};ye.prototype=se.fn,fe=se(me);var ve=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};se.extend({dir:function(t,e,i){for(var n=[],r=t[e];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!se(r).is(i));)1===r.nodeType&&n.push(r),r=r[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),se.fn.extend({has:function(t){var e,i=se(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(se.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,s=[],o=ce.test(t)||"string"!=typeof t?se(t,e||this.context):0;r>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&se.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?se.unique(s):s)},index:function(t){return t?"string"==typeof t?se.inArray(this[0],se(t)):se.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(se.unique(se.merge(this.get(),se(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),se.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return se.dir(t,"parentNode")},parentsUntil:function(t,e,i){return se.dir(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return se.dir(t,"nextSibling")},prevAll:function(t){return se.dir(t,"previousSibling")},nextUntil:function(t,e,i){return se.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return se.dir(t,"previousSibling",i)},siblings:function(t){return se.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return se.sibling(t.firstChild)},contents:function(t){return se.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:se.merge([],t.childNodes)}},function(t,e){se.fn[t]=function(i,n){var r=se.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=se.filter(n,r)),this.length>1&&(xe[t]||(r=se.unique(r)),ve.test(t)&&(r=r.reverse())),this.pushStack(r)}});var _e=/\S+/g,be={};se.Callbacks=function(t){t="string"==typeof t?be[t]||s(t):se.extend({},t);var e,i,n,r,o,a,h=[],l=!t.once&&[],u=function(s){for(i=t.memory&&s,n=!0,o=a||0,a=0,r=h.length,e=!0;h&&r>o;o++)if(h[o].apply(s[0],s[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,h&&(l?l.length&&u(l.shift()):i?h=[]:c.disable())},c={add:function(){if(h){var n=h.length;!function s(e){se.each(e,function(e,i){var n=se.type(i);"function"===n?t.unique&&c.has(i)||h.push(i):i&&i.length&&"string"!==n&&s(i)})}(arguments),e?r=h.length:i&&(a=n,u(i))}return this},remove:function(){return h&&se.each(arguments,function(t,i){for(var n;(n=se.inArray(i,h,n))>-1;)h.splice(n,1),e&&(r>=n&&r--,o>=n&&o--)}),this},has:function(t){return t?se.inArray(t,h)>-1:!(!h||!h.length)},empty:function(){return h=[],r=0,this},disable:function(){return h=l=i=void 0,this},disabled:function(){return!h},lock:function(){return l=void 0,i||c.disable(),this},locked:function(){return!l},fireWith:function(t,i){return!h||n&&!l||(i=i||[],i=[t,i.slice?i.slice():i],e?l.push(i):u(i)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},se.extend({Deferred:function(t){var e=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return se.Deferred(function(i){se.each(e,function(e,s){var o=se.isFunction(t[e])&&t[e];r[s[1]](function(){var t=o&&o.apply(this,arguments);t&&se.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?se.extend(t,n):n}},r={};return n.pipe=n.then,se.each(e,function(t,s){var o=s[2],a=s[3];n[s[1]]=o.add,a&&o.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=o.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,s=q.call(arguments),o=s.length,a=1!==o||t&&se.isFunction(t.promise)?o:0,h=1===a?t:se.Deferred(),l=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?q.call(arguments):r,n===e?h.notifyWith(i,n):--a||h.resolveWith(i,n)}};if(o>1)for(e=new Array(o),i=new Array(o),n=new Array(o);o>r;r++)s[r]&&se.isFunction(s[r].promise)?s[r].promise().done(l(r,n,s)).fail(h.reject).progress(l(r,i,e)):--a;return a||h.resolveWith(n,s),h.promise()}});var we;se.fn.ready=function(t){return se.ready.promise().done(t),this},se.extend({isReady:!1,readyWait:1,holdReady:function(t){t?se.readyWait++:se.ready(!0)},ready:function(t){if(t===!0?!--se.readyWait:!se.isReady){if(!me.body)return setTimeout(se.ready);se.isReady=!0,t!==!0&&--se.readyWait>0||(we.resolveWith(me,[se]),se.fn.trigger&&se(me).trigger("ready").off("ready"))}}}),se.ready.promise=function(e){if(!we)if(we=se.Deferred(),"complete"===me.readyState)setTimeout(se.ready);else if(me.addEventListener)me.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{me.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&me.documentElement}catch(n){}i&&i.doScroll&&!function r(){if(!se.isReady){try{i.doScroll("left")}catch(t){return setTimeout(r,50)}o(),se.ready()}}()}return we.promise(e)};var Te,Se="undefined";for(Te in se(ne))break;ne.ownLast="0"!==Te,ne.inlineBlockNeedsLayout=!1,se(function(){var t,e,i=me.getElementsByTagName("body")[0];i&&(t=me.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e=me.createElement("div"),i.appendChild(t).appendChild(e),typeof e.style.zoom!==Se&&(e.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(ne.inlineBlockNeedsLayout=3===e.offsetWidth)&&(i.style.zoom=1)),i.removeChild(t),t=e=null)}),function(){var t=me.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),se.acceptData=function(t){var e=se.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ce=/([A-Z])/g;se.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?se.cache[t[se.expando]]:t[se.expando],!!t&&!l(t)},data:function(t,e,i){return u(t,e,i)},removeData:function(t,e){return c(t,e)},_data:function(t,e,i){return u(t,e,i,!0)},_removeData:function(t,e){return c(t,e,!0)}}),se.fn.extend({data:function(t,e){var i,n,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=se.data(s),1===s.nodeType&&!se._data(s,"parsedAttrs"))){for(i=o.length;i--;)n=o[i].name,0===n.indexOf("data-")&&(n=se.camelCase(n.slice(5)),h(s,n,r[n]));se._data(s,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){se.data(this,t)}):arguments.length>1?this.each(function(){se.data(this,t,e)}):s?h(s,t,se.data(s,t)):void 0},removeData:function(t){return this.each(function(){se.removeData(this,t)})}}),se.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=se._data(t,e),i&&(!n||se.isArray(i)?n=se._data(t,e,se.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=se.queue(t,e),n=i.length,r=i.shift(),s=se._queueHooks(t,e),o=function(){se.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete s.stop,r.call(t,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return se._data(t,i)||se._data(t,i,{empty:se.Callbacks("once memory").add(function(){se._removeData(t,e+"queue"),se._removeData(t,i)})})}}),se.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?se.queue(this[0],t):void 0===e?this:this.each(function(){var i=se.queue(this,t,e);se._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&se.dequeue(this,t)})},dequeue:function(t){return this.each(function(){se.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=se.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)i=se._data(s[o],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var Re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=["Top","Right","Bottom","Left"],Pe=function(t,e){return t=e||t,"none"===se.css(t,"display")||!se.contains(t.ownerDocument,t)},Le=se.access=function(t,e,i,n,r,s,o){var a=0,h=t.length,l=null==i;if("object"===se.type(i)){r=!0;for(a in i)se.access(t,e,a,i[a],!0,s,o)}else if(void 0!==n&&(r=!0,se.isFunction(n)||(o=!0),l&&(o?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(se(t),i)})),e))for(;h>a;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return r?t:l?e.call(t):h?e(t[0],i):s},De=/^(?:checkbox|radio)$/i;!function(){var t=me.createDocumentFragment(),e=me.createElement("div"),i=me.createElement("input");if(e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==me.createElement("nav").cloneNode(!0).outerHTML,i.type="checkbox",i.checked=!0,t.appendChild(i),ne.appendChecked=i.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(n){ne.deleteExpando=!1}}t=e=i=null}(),function(){var e,i,n=me.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(ne[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),ne[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var ke=/^(?:input|select|textarea)$/i,Oe=/^key/,Fe=/^(?:mouse|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Ie=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(t,e,i,n,r){var s,o,a,h,l,u,c,d,p,f,m,g=se._data(t);if(g){for(i.handler&&(h=i,i=h.handler,r=h.selector),i.guid||(i.guid=se.guid++),(o=g.events)||(o=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof se===Se||t&&se.event.triggered===t.type?void 0:se.event.dispatch.apply(u.elem,arguments)},u.elem=t),e=(e||"").match(_e)||[""],a=e.length;a--;)s=Ie.exec(e[a])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p&&(l=se.event.special[p]||{},p=(r?l.delegateType:l.bindType)||p,l=se.event.special[p]||{},c=se.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&se.expr.match.needsContext.test(r),namespace:f.join(".")},h),(d=o[p])||(d=o[p]=[],d.delegateCount=0,l.setup&&l.setup.call(t,n,f,u)!==!1||(t.addEventListener?t.addEventListener(p,u,!1):t.attachEvent&&t.attachEvent("on"+p,u))),l.add&&(l.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),se.event.global[p]=!0);t=null}},remove:function(t,e,i,n,r){var s,o,a,h,l,u,c,d,p,f,m,g=se.hasData(t)&&se._data(t);if(g&&(u=g.events)){for(e=(e||"").match(_e)||[""],l=e.length;l--;)if(a=Ie.exec(e[l])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(c=se.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,d=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),h=s=d.length;s--;)o=d[s],!r&&m!==o.origType||i&&i.guid!==o.guid||a&&!a.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector)||(d.splice(s,1),o.selector&&d.delegateCount--,c.remove&&c.remove.call(t,o));h&&!d.length&&(c.teardown&&c.teardown.call(t,f,g.handle)!==!1||se.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)se.event.remove(t,p+e[l],i,n,!0);se.isEmptyObject(u)&&(delete g.handle,se._removeData(t,"events"))}},trigger:function(e,i,n,r){var s,o,a,h,l,u,c,d=[n||me],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=u=n=n||me,3!==n.nodeType&&8!==n.nodeType&&!Me.test(p+se.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),o=p.indexOf(":")<0&&"on"+p,e=e[se.expando]?e:new se.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:se.makeArray(i,[e]),l=se.event.special[p]||{},r||!l.trigger||l.trigger.apply(n,i)!==!1)){if(!r&&!l.noBubble&&!se.isWindow(n)){for(h=l.delegateType||p,Me.test(h+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),u=a;u===(n.ownerDocument||me)&&d.push(u.defaultView||u.parentWindow||t)}for(c=0;(a=d[c++])&&!e.isPropagationStopped();)e.type=c>1?h:l.bindType||p,s=(se._data(a,"events")||{})[e.type]&&se._data(a,"handle"),s&&s.apply(a,i),s=o&&a[o],s&&s.apply&&se.acceptData(a)&&(e.result=s.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),i)===!1)&&se.acceptData(n)&&o&&n[p]&&!se.isWindow(n)){u=n[o],u&&(n[o]=null),se.event.triggered=p;try{n[p]()}catch(m){}se.event.triggered=void 0,u&&(n[o]=u)}return e.result}},dispatch:function(t){t=se.event.fix(t);var e,i,n,r,s,o=[],a=q.call(arguments),h=(se._data(this,"events")||{})[t.type]||[],l=se.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(o=se.event.handlers.call(this,t,h),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,s=0;(n=r.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((se.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,s,o=[],a=e.delegateCount,h=t.target;if(a&&h.nodeType&&(!t.button||"click"!==t.type))for(;h!=this;h=h.parentNode||this)if(1===h.nodeType&&(h.disabled!==!0||"click"!==t.type)){for(r=[],s=0;a>s;s++)n=e[s],i=n.selector+" ",void 0===r[i]&&(r[i]=n.needsContext?se(i,this).index(h)>=0:se.find(i,this,null,[h]).length),r[i]&&r.push(n);r.length&&o.push({elem:h,handlers:r})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},fix:function(t){if(t[se.expando])return t;var e,i,n,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Fe.test(r)?this.mouseHooks:Oe.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new se.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=s.srcElement||me),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,s):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,s=e.button,o=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||me,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&o&&(t.relatedTarget=o===t.target?e.toElement:o),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return se.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return se.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=se.extend(new se.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?se.event.trigger(r,null,e):se.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},se.removeEvent=me.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Se&&(t[n]=null),t.detachEvent(n,i))},se.Event=function(t,e){return this instanceof se.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&(t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault())?d:p):this.type=t,e&&se.extend(this,e),this.timeStamp=t&&t.timeStamp||se.now(),this[se.expando]=!0,void 0):new se.Event(t,e)},se.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d,this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){se.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,s=t.handleObj;return(!r||r!==n&&!se.contains(n,r))&&(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),ne.submitBubbles||(se.event.special.submit={setup:function(){return se.nodeName(this,"form")?!1:(se.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=se.nodeName(e,"input")||se.nodeName(e,"button")?e.form:void 0;i&&!se._data(i,"submitBubbles")&&(se.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),se._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&se.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return se.nodeName(this,"form")?!1:(se.event.remove(this,"._submit"),void 0)}}),ne.changeBubbles||(se.event.special.change={setup:function(){return ke.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(se.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,t,!0)})),!1):(se.event.add(this,"beforeactivate._change",function(t){var e=t.target;ke.test(e.nodeName)&&!se._data(e,"changeBubbles")&&(se.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||se.event.simulate("change",this.parentNode,t,!0)}),se._data(e,"changeBubbles",!0))}),void 0)},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return se.event.remove(this,"._change"),!ke.test(this.nodeName)}}),ne.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){se.event.simulate(e,t.target,se.event.fix(t),!0)};se.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=se._data(n,e);r||n.addEventListener(t,i,!0),se._data(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=se._data(n,e)-1;r?se._data(n,e,r):(n.removeEventListener(t,i,!0),se._removeData(n,e))}}}),se.fn.extend({on:function(t,e,i,n,r){var s,o;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(s in t)this.on(s,e,i,t[s],r);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===r&&(o=n,n=function(t){return se().off(t),o.apply(this,arguments)},n.guid=o.guid||(o.guid=se.guid++)),this.each(function(){se.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,se(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){se.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){se.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?se.event.trigger(t,e,i,!0):void 0}});var Be="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ne=/ jQuery\d+="(?:null|\d+)"/g,Ue=new RegExp("<(?:"+Be+")[\\s/>]","i"),Ge=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,We=/<([\w:]+)/,He=/<tbody/i,Xe=/<|&#?\w+;/,Ye=/<(?:script|style|link)/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^$|\/(?:java|ecma)script/i,Ke=/^true\/(.*)/,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,$e={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Je=m(me),Qe=Je.appendChild(me.createElement("div"));$e.optgroup=$e.option,$e.tbody=$e.tfoot=$e.colgroup=$e.caption=$e.thead,$e.th=$e.td,se.extend({clone:function(t,e,i){var n,r,s,o,a,h=se.contains(t.ownerDocument,t);if(ne.html5Clone||se.isXMLDoc(t)||!Ue.test("<"+t.nodeName+">")?s=t.cloneNode(!0):(Qe.innerHTML=t.outerHTML,Qe.removeChild(s=Qe.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||se.isXMLDoc(t)))for(n=g(s),a=g(t),o=0;null!=(r=a[o]);++o)n[o]&&T(r,n[o]);if(e)if(i)for(a=a||g(t),n=n||g(s),o=0;null!=(r=a[o]);o++)w(r,n[o]);else w(t,s);return n=g(s,"script"),n.length>0&&b(n,!h&&g(t,"script")),n=a=r=null,s},buildFragment:function(t,e,i,n){for(var r,s,o,a,h,l,u,c=t.length,d=m(e),p=[],f=0;c>f;f++)if(s=t[f],s||0===s)if("object"===se.type(s))se.merge(p,s.nodeType?[s]:s);else if(Xe.test(s)){for(a=a||d.appendChild(e.createElement("div")),h=(We.exec(s)||["",""])[1].toLowerCase(),u=$e[h]||$e._default,a.innerHTML=u[1]+s.replace(je,"<$1></$2>")+u[2],r=u[0];r--;)a=a.lastChild;if(!ne.leadingWhitespace&&Ge.test(s)&&p.push(e.createTextNode(Ge.exec(s)[0])),!ne.tbody)for(s="table"!==h||He.test(s)?"<table>"!==u[1]||He.test(s)?0:a:a.firstChild,r=s&&s.childNodes.length;r--;)se.nodeName(l=s.childNodes[r],"tbody")&&!l.childNodes.length&&s.removeChild(l);for(se.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(e.createTextNode(s));for(a&&d.removeChild(a),ne.appendChecked||se.grep(g(p,"input"),y),f=0;s=p[f++];)if((!n||-1===se.inArray(s,n))&&(o=se.contains(s.ownerDocument,s),a=g(d.appendChild(s),"script"),o&&b(a),i))for(r=0;s=a[r++];)ze.test(s.type||"")&&i.push(s);return a=null,d},cleanData:function(t,e){for(var i,n,r,s,o=0,a=se.expando,h=se.cache,l=ne.deleteExpando,u=se.event.special;null!=(i=t[o]);o++)if((e||se.acceptData(i))&&(r=i[a],s=r&&h[r])){if(s.events)for(n in s.events)u[n]?se.event.remove(i,n):se.removeEvent(i,n,s.handle);h[r]&&(delete h[r],l?delete i[a]:typeof i.removeAttribute!==Se?i.removeAttribute(a):i[a]=null,K.push(r))}}}),se.fn.extend({text:function(t){return Le(this,function(t){return void 0===t?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||me).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?se.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||se.cleanData(g(i)),i.parentNode&&(e&&se.contains(i.ownerDocument,i)&&b(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&se.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&se.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return se.clone(this,t,e)})},html:function(t){return Le(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Ne,""):void 0;if(!("string"!=typeof t||Ye.test(t)||!ne.htmlSerialize&&Ue.test(t)||!ne.leadingWhitespace&&Ge.test(t)||$e[(We.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(je,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(se.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,se.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=$.apply([],t);var i,n,r,s,o,a,h=0,l=this.length,u=this,c=l-1,d=t[0],p=se.isFunction(d);if(p||l>1&&"string"==typeof d&&!ne.checkClone&&Ve.test(d))return this.each(function(i){var n=u.eq(i);p&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(l&&(a=se.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(s=se.map(g(a,"script"),x),r=s.length;l>h;h++)n=a,h!==c&&(n=se.clone(n,!0,!0),r&&se.merge(s,g(n,"script"))),e.call(this[h],n,h);if(r)for(o=s[s.length-1].ownerDocument,se.map(s,_),h=0;r>h;h++)n=s[h],ze.test(n.type||"")&&!se._data(n,"globalEval")&&se.contains(o,n)&&(n.src?se._evalUrl&&se._evalUrl(n.src):se.globalEval((n.text||n.textContent||n.innerHTML||"").replace(qe,"")));a=i=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){se.fn[t]=function(t){for(var i,n=0,r=[],s=se(t),o=s.length-1;o>=n;n++)i=n===o?this:this.clone(!0),se(s[n])[e](i),J.apply(r,i.get());return this.pushStack(r)}});var Ze,ti={};!function(){var t,e,i=me.createElement("div"),n="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=i.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",ne.opacity=/^0.5/.test(t.style.opacity),ne.cssFloat=!!t.style.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===i.style.backgroundClip,t=i=null,ne.shrinkWrapBlocks=function(){var t,i,r,s;if(null==e){if(t=me.getElementsByTagName("body")[0],!t)return;s="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",i=me.createElement("div"),r=me.createElement("div"),t.appendChild(i).appendChild(r),e=!1,typeof r.style.zoom!==Se&&(r.style.cssText=n+";width:1px;padding:1px;zoom:1",r.innerHTML="<div></div>",r.firstChild.style.width="5px",e=3!==r.offsetWidth),t.removeChild(i),t=i=r=null}return e}}();var ei,ii,ni=/^margin/,ri=new RegExp("^("+Re+")(?!px)[a-z%]+$","i"),si=/^(top|right|bottom|left)$/;t.getComputedStyle?(ei=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ii=function(t,e,i){var n,r,s,o,a=t.style;return i=i||ei(t),o=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==o||se.contains(t.ownerDocument,t)||(o=se.style(t,e)),ri.test(o)&&ni.test(e)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s)),void 0===o?o:o+""}):me.documentElement.currentStyle&&(ei=function(t){return t.currentStyle},ii=function(t,e,i){var n,r,s,o,a=t.style;return i=i||ei(t),o=i?i[e]:void 0,null==o&&a&&a[e]&&(o=a[e]),ri.test(o)&&!si.test(e)&&(n=a.left,r=t.runtimeStyle,s=r&&r.left,s&&(r.left=t.currentStyle.left),a.left="fontSize"===e?"1em":o,o=a.pixelLeft+"px",a.left=n,s&&(r.left=s)),void 0===o?o:o+""||"auto"}),function(){function e(){var e,i,n=me.getElementsByTagName("body")[0];n&&(e=me.createElement("div"),i=me.createElement("div"),e.style.cssText=l,n.appendChild(e).appendChild(i),i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",se.swap(n,null!=n.style.zoom?{zoom:1}:{},function(){r=4===i.offsetWidth}),s=!0,o=!1,a=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(i,null)||{}).top,s="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width),n.removeChild(e),i=n=null)}var i,n,r,s,o,a,h=me.createElement("div"),l="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",u="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=h.getElementsByTagName("a")[0],i.style.cssText="float:left;opacity:.5",ne.opacity=/^0.5/.test(i.style.opacity),ne.cssFloat=!!i.style.cssFloat,h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===h.style.backgroundClip,i=h=null,se.extend(ne,{reliableHiddenOffsets:function(){if(null!=n)return n;
var t,e,i,r=me.createElement("div"),s=me.getElementsByTagName("body")[0];if(s)return r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=me.createElement("div"),t.style.cssText=l,s.appendChild(t).appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=r.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",i=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",n=i&&0===e[0].offsetHeight,s.removeChild(t),r=s=null,n},boxSizing:function(){return null==r&&e(),r},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){var e,i,n,r;if(null==a&&t.getComputedStyle){if(e=me.getElementsByTagName("body")[0],!e)return;i=me.createElement("div"),n=me.createElement("div"),i.style.cssText=l,e.appendChild(i).appendChild(n),r=n.appendChild(me.createElement("div")),r.style.cssText=n.style.cssText=u,r.style.marginRight=r.style.width="0",n.style.width="1px",a=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight),e.removeChild(i)}return a}})}(),se.swap=function(t,e,i,n){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];r=i.apply(t,n||[]);for(s in e)t.style[s]=o[s];return r};var oi=/alpha\([^)]*\)/i,ai=/opacity\s*=\s*([^)]*)/,hi=/^(none|table(?!-c[ea]).+)/,li=new RegExp("^("+Re+")(.*)$","i"),ui=new RegExp("^([+-])=("+Re+")","i"),ci={position:"absolute",visibility:"hidden",display:"block"},di={letterSpacing:0,fontWeight:400},pi=["Webkit","O","Moz","ms"];se.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ii(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=se.camelCase(e),h=t.style;if(e=se.cssProps[a]||(se.cssProps[a]=R(h,a)),o=se.cssHooks[e]||se.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(r=o.get(t,!1,n))?r:h[e];if(s=typeof i,"string"===s&&(r=ui.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(se.css(t,e)),s="number"),null!=i&&i===i&&("number"!==s||se.cssNumber[a]||(i+="px"),ne.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),!(o&&"set"in o&&void 0===(i=o.set(t,i,n)))))try{h[e]="",h[e]=i}catch(l){}}},css:function(t,e,i,n){var r,s,o,a=se.camelCase(e);return e=se.cssProps[a]||(se.cssProps[a]=R(t.style,a)),o=se.cssHooks[e]||se.cssHooks[a],o&&"get"in o&&(s=o.get(t,!0,i)),void 0===s&&(s=ii(t,e,n)),"normal"===s&&e in di&&(s=di[e]),""===i||i?(r=parseFloat(s),i===!0||se.isNumeric(r)?r||0:s):s}}),se.each(["height","width"],function(t,e){se.cssHooks[e]={get:function(t,i,n){return i?0===t.offsetWidth&&hi.test(se.css(t,"display"))?se.swap(t,ci,function(){return D(t,e,n)}):D(t,e,n):void 0},set:function(t,i,n){var r=n&&ei(t);return P(t,i,n?L(t,e,n,ne.boxSizing()&&"border-box"===se.css(t,"boxSizing",!1,r),r):0)}}}),ne.opacity||(se.cssHooks.opacity={get:function(t,e){return ai.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,r=se.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===se.trim(s.replace(oi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=oi.test(s)?s.replace(oi,r):s+" "+r)}}),se.cssHooks.marginRight=C(ne.reliableMarginRight,function(t,e){return e?se.swap(t,{display:"inline-block"},ii,[t,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(t,e){se.cssHooks[t+e]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];4>n;n++)r[t+Ee[n]+e]=s[n]||s[n-2]||s[0];return r}},ni.test(t)||(se.cssHooks[t+e].set=P)}),se.fn.extend({css:function(t,e){return Le(this,function(t,e,i){var n,r,s={},o=0;if(se.isArray(e)){for(n=ei(t),r=e.length;r>o;o++)s[e[o]]=se.css(t,e[o],!1,n);return s}return void 0!==i?se.style(t,e,i):se.css(t,e)},t,e,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Pe(this)?se(this).show():se(this).hide()})}}),se.Tween=k,k.prototype={constructor:k,init:function(t,e,i,n,r,s){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(se.cssNumber[i]?"":"px")},cur:function(){var t=k.propHooks[this.prop];return t&&t.get?t.get(this):k.propHooks._default.get(this)},run:function(t){var e,i=k.propHooks[this.prop];return this.pos=e=this.options.duration?se.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):k.propHooks._default.set(this),this}},k.prototype.init.prototype=k.prototype,k.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=se.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){se.fx.step[t.prop]?se.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[se.cssProps[t.prop]]||se.cssHooks[t.prop])?se.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},k.propHooks.scrollTop=k.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},se.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},se.fx=k.prototype.init,se.fx.step={};var fi,mi,gi=/^(?:toggle|show|hide)$/,yi=new RegExp("^(?:([+-])=|)("+Re+")([a-z%]*)$","i"),vi=/queueHooks$/,xi=[I],_i={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=yi.exec(e),s=r&&r[3]||(se.cssNumber[t]?"":"px"),o=(se.cssNumber[t]||"px"!==s&&+n)&&yi.exec(se.css(i.elem,t)),a=1,h=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+n||1;do a=a||".5",o/=a,se.style(i.elem,t,o+s);while(a!==(a=i.cur()/n)&&1!==a&&--h)}return r&&(o=i.start=+o||+n||0,i.unit=s,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};se.Animation=se.extend(N,{tweener:function(t,e){se.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,r=t.length;r>n;n++)i=t[n],_i[i]=_i[i]||[],_i[i].unshift(e)},prefilter:function(t,e){e?xi.unshift(t):xi.push(t)}}),se.speed=function(t,e,i){var n=t&&"object"==typeof t?se.extend({},t):{complete:i||!i&&e||se.isFunction(t)&&t,duration:t,easing:i&&e||e&&!se.isFunction(e)&&e};return n.duration=se.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in se.fx.speeds?se.fx.speeds[n.duration]:se.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){se.isFunction(n.old)&&n.old.call(this),n.queue&&se.dequeue(this,n.queue)},n},se.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=se.isEmptyObject(t),s=se.speed(e,i,n),o=function(){var e=N(this,se.extend({},t),s);(r||se._data(this,"finish"))&&e.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=se.timers,o=se._data(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&vi.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(i),e=!1,s.splice(r,1));(e||!i)&&se.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=se._data(this),n=i[t+"queue"],r=i[t+"queueHooks"],s=se.timers,o=n?n.length:0;for(i.finish=!0,se.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;o>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),se.each(["toggle","show","hide"],function(t,e){var i=se.fn[e];se.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(F(e,!0),t,n,r)}}),se.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){se.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),se.timers=[],se.fx.tick=function(){var t,e=se.timers,i=0;for(fi=se.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||se.fx.stop(),fi=void 0},se.fx.timer=function(t){se.timers.push(t),t()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){mi||(mi=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(mi),mi=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(t,e){return t=se.fx?se.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,r=me.createElement("div");r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=r.getElementsByTagName("a")[0],i=me.createElement("select"),n=i.appendChild(me.createElement("option")),e=r.getElementsByTagName("input")[0],t.style.cssText="top:1px",ne.getSetAttribute="t"!==r.className,ne.style=/top/.test(t.getAttribute("style")),ne.hrefNormalized="/a"===t.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=n.selected,ne.enctype=!!me.createElement("form").enctype,i.disabled=!0,ne.optDisabled=!n.disabled,e=me.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value,t=e=i=n=r=null}();var bi=/\r/g;se.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=se.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,se(this).val()):t,null==r?r="":"number"==typeof r?r+="":se.isArray(r)&&(r=se.map(r,function(t){return null==t?"":t+""})),e=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=se.valHooks[r.type]||se.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(bi,""):null==i?"":i)}}}),se.extend({valHooks:{option:{get:function(t){var e=se.find.attr(t,"value");return null!=e?e:se.text(t)}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,s="select-one"===t.type||0>r,o=s?null:[],a=s?r+1:n.length,h=0>r?a:s?r:0;a>h;h++)if(i=n[h],!(!i.selected&&h!==r||(ne.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&se.nodeName(i.parentNode,"optgroup"))){if(e=se(i).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var i,n,r=t.options,s=se.makeArray(e),o=r.length;o--;)if(n=r[o],se.inArray(se.valHooks.option.get(n),s)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),r}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(t,e){return se.isArray(e)?t.checked=se.inArray(se(t).val(),e)>=0:void 0}},ne.checkOn||(se.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var wi,Ti,Si=se.expr.attrHandle,Ai=/^(?:checked|selected)$/i,Ci=ne.getSetAttribute,Ri=ne.input;se.fn.extend({attr:function(t,e){return Le(this,se.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){se.removeAttr(this,t)})}}),se.extend({attr:function(t,e,i){var n,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===Se?se.prop(t,e,i):(1===s&&se.isXMLDoc(t)||(e=e.toLowerCase(),n=se.attrHooks[e]||(se.expr.match.bool.test(e)?Ti:wi)),void 0===i?n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=se.find.attr(t,e),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):(se.removeAttr(t,e),void 0))},removeAttr:function(t,e){var i,n,r=0,s=e&&e.match(_e);if(s&&1===t.nodeType)for(;i=s[r++];)n=se.propFix[i]||i,se.expr.match.bool.test(i)?Ri&&Ci||!Ai.test(i)?t[n]=!1:t[se.camelCase("default-"+i)]=t[n]=!1:se.attr(t,i,""),t.removeAttribute(Ci?i:n)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&se.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),Ti={set:function(t,e,i){return e===!1?se.removeAttr(t,i):Ri&&Ci||!Ai.test(i)?t.setAttribute(!Ci&&se.propFix[i]||i,i):t[se.camelCase("default-"+i)]=t[i]=!0,i}},se.each(se.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Si[e]||se.find.attr;Si[e]=Ri&&Ci||!Ai.test(e)?function(t,e,n){var r,s;return n||(s=Si[e],Si[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,Si[e]=s),r}:function(t,e,i){return i?void 0:t[se.camelCase("default-"+e)]?e.toLowerCase():null}}),Ri&&Ci||(se.attrHooks.value={set:function(t,e,i){return se.nodeName(t,"input")?(t.defaultValue=e,void 0):wi&&wi.set(t,e,i)}}),Ci||(wi={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},Si.id=Si.name=Si.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},se.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:wi.set},se.attrHooks.contenteditable={set:function(t,e,i){wi.set(t,""===e?!1:e,i)}},se.each(["width","height"],function(t,e){se.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ne.style||(se.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ei=/^(?:input|select|textarea|button|object)$/i,Pi=/^(?:a|area)$/i;se.fn.extend({prop:function(t,e){return Le(this,se.prop,t,e,arguments.length>1)},removeProp:function(t){return t=se.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),se.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,r,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return s=1!==o||!se.isXMLDoc(t),s&&(e=se.propFix[e]||e,r=se.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=se.find.attr(t,"tabindex");return e?parseInt(e,10):Ei.test(t.nodeName)||Pi.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||se.each(["href","src"],function(t,e){se.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(se.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),ne.enctype||(se.propFix.enctype="encoding");var Li=/[\t\r\n\f]/g;se.fn.extend({addClass:function(t){var e,i,n,r,s,o,a=0,h=this.length,l="string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(_e)||[];h>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Li," "):" ")){for(s=0;r=e[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=se.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(t){var e,i,n,r,s,o,a=0,h=this.length,l=0===arguments.length||"string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(_e)||[];h>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Li," "):"")){for(s=0;r=e[s++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");o=t?se.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):se.isFunction(t)?this.each(function(i){se(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,r=se(this),s=t.match(_e)||[];e=s[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(i===Se||"boolean"===i)&&(this.className&&se._data(this,"__className__",this.className),this.className=this.className||t===!1?"":se._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Li," ").indexOf(e)>=0)return!0;return!1}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){se.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),se.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Di=se.now(),ki=/\?/,Oi=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;se.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,r=se.trim(e+"");return r&&!se.trim(r.replace(Oi,function(t,e,r,s){return i&&e&&(n=0),0===n?t:(i=r||e,n+=!s-!r,"")}))?Function("return "+r)():se.error("Invalid JSON: "+e)},se.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(r){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+e),i};var Fi,Mi,Ii=/#.*$/,Bi=/([?&])_=[^&]*/,Ni=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ui=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Gi=/^(?:GET|HEAD)$/,ji=/^\/\//,Wi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hi={},Xi={},Yi="*/".concat("*");try{Mi=location.href}catch(Vi){Mi=me.createElement("a"),Mi.href="",Mi=Mi.href}Fi=Wi.exec(Mi.toLowerCase())||[],se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mi,type:"GET",isLocal:Ui.test(Fi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,se.ajaxSettings),e):j(se.ajaxSettings,t)},ajaxPrefilter:U(Hi),ajaxTransport:U(Xi),ajax:function(t,e){function i(t,e,i,n){var r,u,y,v,_,w=e;2!==x&&(x=2,a&&clearTimeout(a),l=void 0,o=n||"",b.readyState=t>0?4:0,r=t>=200&&300>t||304===t,i&&(v=W(c,b,i)),v=H(c,v,b,r),r?(c.ifModified&&(_=b.getResponseHeader("Last-Modified"),_&&(se.lastModified[s]=_),_=b.getResponseHeader("etag"),_&&(se.etag[s]=_)),204===t||"HEAD"===c.type?w="nocontent":304===t?w="notmodified":(w=v.state,u=v.data,y=v.error,r=!y)):(y=w,(t||!w)&&(w="error",0>t&&(t=0))),b.status=t,b.statusText=(e||w)+"",r?f.resolveWith(d,[u,w,b]):f.rejectWith(d,[b,w,y]),b.statusCode(g),g=void 0,h&&p.trigger(r?"ajaxSuccess":"ajaxError",[b,c,r?u:y]),m.fireWith(d,[b,w]),h&&(p.trigger("ajaxComplete",[b,c]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,o,a,h,l,u,c=se.ajaxSetup({},e),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?se(d):se.event,f=se.Deferred(),m=se.Callbacks("once memory"),g=c.statusCode||{},y={},v={},x=0,_="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!u)for(u={};e=Ni.exec(o);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return x||(t=v[i]=v[i]||t,y[t]=e),this},overrideMimeType:function(t){return x||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>x)for(e in t)g[e]=[g[e],t[e]];else b.always(t[b.status]);return this},abort:function(t){var e=t||_;return l&&l.abort(e),i(0,e),this}};if(f.promise(b).complete=m.add,b.success=b.done,b.error=b.fail,c.url=((t||c.url||Mi)+"").replace(Ii,"").replace(ji,Fi[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=se.trim(c.dataType||"*").toLowerCase().match(_e)||[""],null==c.crossDomain&&(n=Wi.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===Fi[1]&&n[2]===Fi[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Fi[3]||("http:"===Fi[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=se.param(c.data,c.traditional)),G(Hi,c,e,b),2===x)return b;h=c.global,h&&0===se.active++&&se.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Gi.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(ki.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Bi.test(s)?s.replace(Bi,"$1_="+Di++):s+(ki.test(s)?"&":"?")+"_="+Di++)),c.ifModified&&(se.lastModified[s]&&b.setRequestHeader("If-Modified-Since",se.lastModified[s]),se.etag[s]&&b.setRequestHeader("If-None-Match",se.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&b.setRequestHeader("Content-Type",c.contentType),b.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Yi+"; q=0.01":""):c.accepts["*"]);for(r in c.headers)b.setRequestHeader(r,c.headers[r]);if(c.beforeSend&&(c.beforeSend.call(d,b,c)===!1||2===x))return b.abort();_="abort";for(r in{success:1,error:1,complete:1})b[r](c[r]);if(l=G(Xi,c,e,b)){b.readyState=1,h&&p.trigger("ajaxSend",[b,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){b.abort("timeout")},c.timeout));try{x=1,l.send(y,i)}catch(w){if(!(2>x))throw w;i(-1,w)}}else i(-1,"No Transport");return b},getJSON:function(t,e,i){return se.get(t,e,i,"json")},getScript:function(t,e){return se.get(t,void 0,e,"script")}}),se.each(["get","post"],function(t,e){se[e]=function(t,i,n,r){return se.isFunction(i)&&(r=r||n,n=i,i=void 0),se.ajax({url:t,type:e,dataType:r,data:i,success:n})}}),se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){se.fn[e]=function(t){return this.on(e,t)}}),se._evalUrl=function(t){return se.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(t){if(se.isFunction(t))return this.each(function(e){se(this).wrapAll(t.call(this,e))});if(this[0]){var e=se(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return se.isFunction(t)?this.each(function(e){se(this).wrapInner(t.call(this,e))}):this.each(function(){var e=se(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=se.isFunction(t);return this.each(function(i){se(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||se.css(t,"display"))},se.expr.filters.visible=function(t){return!se.expr.filters.hidden(t)};var zi=/%20/g,Ki=/\[\]$/,qi=/\r?\n/g,$i=/^(?:submit|button|image|reset|file)$/i,Ji=/^(?:input|select|textarea|keygen)/i;se.param=function(t,e){var i,n=[],r=function(t,e){e=se.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(t)||t.jquery&&!se.isPlainObject(t))se.each(t,function(){r(this.name,this.value)});else for(i in t)X(i,t[i],e,r);return n.join("&").replace(zi,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=se.prop(this,"elements");return t?se.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!se(this).is(":disabled")&&Ji.test(this.nodeName)&&!$i.test(t)&&(this.checked||!De.test(t))}).map(function(t,e){var i=se(this).val();return null==i?null:se.isArray(i)?se.map(i,function(t){return{name:e.name,value:t.replace(qi,"\r\n")}}):{name:e.name,value:i.replace(qi,"\r\n")}}).get()}}),se.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Y()||V()}:Y;var Qi=0,Zi={},tn=se.ajaxSettings.xhr();t.ActiveXObject&&se(t).on("unload",function(){for(var t in Zi)Zi[t](void 0,!0)}),ne.cors=!!tn&&"withCredentials"in tn,tn=ne.ajax=!!tn,tn&&se.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(i,n){var r,s=t.xhr(),o=++Qi;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)void 0!==i[r]&&s.setRequestHeader(r,i[r]+"");s.send(t.hasContent&&t.data||null),e=function(i,r){var a,h,l;if(e&&(r||4===s.readyState))if(delete Zi[o],e=void 0,s.onreadystatechange=se.noop,r)4!==s.readyState&&s.abort();else{l={},a=s.status,"string"==typeof s.responseText&&(l.text=s.responseText);try{h=s.statusText}catch(u){h=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=l.text?200:404}l&&n(a,h,l,s.getAllResponseHeaders())},t.async?4===s.readyState?setTimeout(e):s.onreadystatechange=Zi[o]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return se.globalEval(t),t}}}),se.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),se.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=me.head||se("head")[0]||me.documentElement;return{send:function(n,r){e=me.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||r(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var en=[],nn=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||se.expando+"_"+Di++;return this[t]=!0,t}}),se.ajaxPrefilter("json jsonp",function(e,i,n){var r,s,o,a=e.jsonp!==!1&&(nn.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=se.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(nn,"$1"+r):e.jsonp!==!1&&(e.url+=(ki.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||se.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){o=arguments},n.always(function(){t[r]=s,e[r]&&(e.jsonpCallback=i.jsonpCallback,en.push(r)),o&&se.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),se.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||me;var n=de.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=se.buildFragment([t],e,r),r&&r.length&&se(r).remove(),se.merge([],n.childNodes))};var rn=se.fn.load;se.fn.load=function(t,e,i){if("string"!=typeof t&&rn)return rn.apply(this,arguments);var n,r,s,o=this,a=t.indexOf(" ");return a>=0&&(n=t.slice(a,t.length),t=t.slice(0,a)),se.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&se.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){r=arguments,o.html(n?se("<div>").append(se.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){o.each(i,r||[t.responseText,e,t])}),this},se.expr.filters.animated=function(t){return se.grep(se.timers,function(e){return t===e.elem}).length};var sn=t.document.documentElement;se.offset={setOffset:function(t,e,i){var n,r,s,o,a,h,l,u=se.css(t,"position"),c=se(t),d={};"static"===u&&(t.style.position="relative"),a=c.offset(),s=se.css(t,"top"),h=se.css(t,"left"),l=("absolute"===u||"fixed"===u)&&se.inArray("auto",[s,h])>-1,l?(n=c.position(),o=n.top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(h)||0),se.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):c.css(d)}},se.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){se.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},r=this[0],s=r&&r.ownerDocument;if(s)return e=s.documentElement,se.contains(e,r)?(typeof r.getBoundingClientRect!==Se&&(n=r.getBoundingClientRect()),i=z(s),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===se.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),se.nodeName(t[0],"html")||(i=t.offset()),i.top+=se.css(t[0],"borderTopWidth",!0),i.left+=se.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-se.css(n,"marginTop",!0),left:e.left-i.left-se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||sn;t&&!se.nodeName(t,"html")&&"static"===se.css(t,"position");)t=t.offsetParent;return t||sn})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);se.fn[t]=function(n){return Le(this,function(t,n,r){var s=z(t);return void 0===r?s?e in s?s[e]:s.document.documentElement[n]:t[n]:(s?s.scrollTo(i?se(s).scrollLeft():r,i?r:se(s).scrollTop()):t[n]=r,void 0)},t,n,arguments.length,null)}}),se.each(["top","left"],function(t,e){se.cssHooks[e]=C(ne.pixelPosition,function(t,i){return i?(i=ii(t,e),ri.test(i)?se(t).position()[e]+"px":i):void 0})}),se.each({Height:"height",Width:"width"},function(t,e){se.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){se.fn[n]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||r===!0?"margin":"border");return Le(this,function(e,i,n){var r;return se.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?se.css(e,i,o):se.style(e,i,n,o)},e,s?n:void 0,s,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var on=t.jQuery,an=t.$;return se.noConflict=function(e){return t.$===se&&(t.$=an),e&&t.jQuery===se&&(t.jQuery=on),se},typeof e===Se&&(t.jQuery=t.$=se),se}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,n){var r=t.Event(i);return e.trigger(r,n),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var r,s,o,a,h,l,u,c;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),h=a===e?null:a,l=n.data("with-credentials")||null,u=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){r=n.attr("method"),s=n.attr("action"),o=n.serializeArray();
var d=n.data("ujs:submit-button");d&&(o.push(d),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(r=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(r=n.data("method")||"get",s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(r=n.data("method"),s=i.href(n),o=n.data("params")||null);c={type:r||"GET",data:o,dataType:u,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),i.fire(n,"ajax:beforeSend",[t,r])},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:h},l&&(c.xhrFields={withCredentials:l}),s&&(c.url=s);var p=i.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var r=i.href(n),s=n.data("method"),o=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),h=t("meta[name=csrf-param]").attr("content"),l=t('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+s+'" type="hidden" />';h!==e&&a!==e&&(u+='<input name="'+h+'" value="'+a+'" type="hidden" />'),o&&l.attr("target",o),l.hide().append(u).appendTo("body"),l.submit()},disableFormElements:function(e){e.find(i.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(i.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),r=!1;return n?(i.fire(t,"confirm")&&(r=i.confirm(n),e=i.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,i,n){var r,s,o=t(),a=i||"input,textarea",h=e.find(a);return h.each(function(){if(r=t(this),s=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!s==!n){if(r.is("input[type=radio]")&&h.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;o=o.add(r)}}),o.length?o:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var r=t(this),s=r.data("method"),o=r.data("params"),a=n.metaKey||n.ctrlKey;if(!i.allowAction(r))return i.stopEverything(n);if(!a&&r.is(i.linkDisableSelector)&&i.disableElement(r),r.data("remote")!==e){if(a&&(!s||"GET"===s)&&!o)return!0;var h=i.handleRemote(r);return h===!1?i.enableElement(r):h.error(function(){i.enableElement(r)}),!1}return r.data("method")?(i.handleMethod(r),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var r=t(this),s=r.data("remote")!==e,o=i.blankInputs(r,i.requiredInputSelector),a=i.nonBlankInputs(r,i.fileInputSelector);if(!i.allowAction(r))return i.stopEverything(n);if(o&&r.attr("novalidate")==e&&i.fire(r,"ajax:aborted:required",[o]))return i.stopEverything(n);if(s){if(a){setTimeout(function(){i.disableFormElements(r)},13);var h=i.fire(r,"ajax:aborted:file",[a]);return h||setTimeout(function(){i.enableFormElements(r)},13),h}return i.handleRemote(r),!1}setTimeout(function(){i.disableFormElements(r)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var r=n.attr("name"),s=r?{name:r,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),n.delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),$(function(){$(".about-link").click(function(t){t.preventDefault(),$("#about-wrap").slideToggle()})}),!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.Phaser=e()}(this,function(){function t(t){return[(255&t>>16)/255,(255&t>>8)/255,(255&t)/255]}function e(){return i.Matrix="undefined"!=typeof Float32Array?Float32Array:Array,i.Matrix}function t(t){return[(255&t>>16)/255,(255&t>>8)/255,(255&t)/255]}var i=i||{},n=n||{VERSION:"1.1.3",DEV_VERSION:"1.1.3",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,SPRITE:0,BUTTON:1,BULLET:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4};i.InteractionManager=function(){},n.Utils={shuffle:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},pad:function(t,e,i,n){if("undefined"==typeof e)var e=0;if("undefined"==typeof i)var i=" ";if("undefined"==typeof n)var n=3;var r=0;if(e+1>=t.length)switch(n){case 1:t=Array(e+1-t.length).join(i)+t;break;case 3:var s=Math.ceil((r=e-t.length)/2),o=r-s;t=Array(o+1).join(i)+t+Array(s+1).join(i);break;default:t+=Array(e+1-t.length).join(i)}return t},isPlainObject:function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!hasOwn.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},extend:function(){var t,e,i,r,s,o,a=arguments[0]||{},h=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},h=2),l===h&&(a=this,--h);l>h;h++)if(null!=(t=arguments[h]))for(e in t)i=a[e],r=t[e],a!==r&&(u&&r&&(n.Utils.isPlainObject(r)||(s=Array.isArray(r)))?(s?(s=!1,o=i&&Array.isArray(i)?i:[]):o=i&&n.Utils.isPlainObject(i)?i:{},a[e]=n.Utils.extend(u,o,r)):void 0!==r&&(a[e]=r));return a}},function(){var t=!1;t&&(window.console=void 0),void 0===window.console&&(window.console={debug:function(){return!0},info:function(){return!1},warn:function(){return!1},log:function(){return!1}}),debug=function(t){window.console.debug(t)},info=function(t){window.console.info(t)},warn=function(t){window.console.warn(t)},log=function(t){window.console.log(t)}}(),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var t=Array.prototype.slice;return function(e){function i(){var s=r.concat(t.call(arguments));n.apply(this instanceof i?this:e,s)}var n=this,r=t.call(arguments,1);if("function"!=typeof n)throw new TypeError;return i.prototype=function s(t){return t&&(s.prototype=t),this instanceof s?void 0:new s}(n.prototype),i}}()),e(),i.mat3={},i.mat3.create=function(){var t=new i.Matrix(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.mat3.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.mat4={},i.mat4.create=function(){var t=new i.Matrix(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.mat3.multiply=function(t,e,i){i||(i=t);var n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],h=t[5],l=t[6],u=t[7],c=t[8],d=e[0],p=e[1],f=e[2],m=e[3],g=e[4],y=e[5],v=e[6],x=e[7],_=e[8];return i[0]=d*n+p*o+f*l,i[1]=d*r+p*a+f*u,i[2]=d*s+p*h+f*c,i[3]=m*n+g*o+y*l,i[4]=m*r+g*a+y*u,i[5]=m*s+g*h+y*c,i[6]=v*n+x*o+_*l,i[7]=v*r+x*a+_*u,i[8]=v*s+x*h+_*c,i},i.mat3.clone=function(t){var e=new i.Matrix(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.mat3.transpose=function(t,e){if(!e||t===e){var i=t[1],n=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=n,t[7]=r,t}return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e},i.mat3.toMat4=function(t,e){return e||(e=i.mat4.create()),e[15]=1,e[14]=0,e[13]=0,e[12]=0,e[11]=0,e[10]=t[8],e[9]=t[7],e[8]=t[6],e[7]=0,e[6]=t[5],e[5]=t[4],e[4]=t[3],e[3]=0,e[2]=t[2],e[1]=t[1],e[0]=t[0],e},i.mat4.create=function(){var t=new i.Matrix(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.mat4.transpose=function(t,e){if(!e||t===e){var i=t[1],n=t[2],r=t[3],s=t[6],o=t[7],a=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=s,t[11]=t[14],t[12]=r,t[13]=o,t[14]=a,t}return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e},i.mat4.multiply=function(t,e,i){i||(i=t);var n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],h=t[5],l=t[6],u=t[7],c=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15],x=e[0],_=e[1],b=e[2],w=e[3];return i[0]=x*n+_*a+b*c+w*m,i[1]=x*r+_*h+b*d+w*g,i[2]=x*s+_*l+b*p+w*y,i[3]=x*o+_*u+b*f+w*v,x=e[4],_=e[5],b=e[6],w=e[7],i[4]=x*n+_*a+b*c+w*m,i[5]=x*r+_*h+b*d+w*g,i[6]=x*s+_*l+b*p+w*y,i[7]=x*o+_*u+b*f+w*v,x=e[8],_=e[9],b=e[10],w=e[11],i[8]=x*n+_*a+b*c+w*m,i[9]=x*r+_*h+b*d+w*g,i[10]=x*s+_*l+b*p+w*y,i[11]=x*o+_*u+b*f+w*v,x=e[12],_=e[13],b=e[14],w=e[15],i[12]=x*n+_*a+b*c+w*m,i[13]=x*r+_*h+b*d+w*g,i[14]=x*s+_*l+b*p+w*y,i[15]=x*o+_*u+b*f+w*v,i},i.Point=function(t,e){this.x=t||0,this.y=e||0},i.Point.prototype.clone=function(){return new i.Point(this.x,this.y)},i.Point.prototype.constructor=i.Point,i.Rectangle=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},i.Rectangle.prototype.clone=function(){return new i.Rectangle(this.x,this.y,this.width,this.height)},i.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var n=this.y;if(e>=n&&e<=n+this.height)return!0}return!1},i.Rectangle.prototype.constructor=i.Rectangle,i.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],n=0,r=t.length;r>n;n+=2)e.push(new i.Point(t[n],t[n+1]));t=e}this.points=t},i.Polygon.prototype.clone=function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].clone());return new i.Polygon(t)},i.Polygon.prototype.contains=function(t,e){for(var i=!1,n=0,r=this.points.length-1;n<this.points.length;r=n++){var s=this.points[n].x,o=this.points[n].y,a=this.points[r].x,h=this.points[r].y,l=o>e!=h>e&&(a-s)*(e-o)/(h-o)+s>t;l&&(i=!i)}return i},i.Polygon.prototype.constructor=i.Polygon,i.DisplayObject=function(){this.last=this,this.first=this,this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.worldTransform=i.mat3.create(),this.localTransform=i.mat3.create(),this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=new i.Rectangle(0,0,1,1)},i.DisplayObject.prototype.constructor=i.DisplayObject,i.DisplayObject.prototype.setInteractive=function(t){this.interactive=t},Object.defineProperty(i.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){t?this._mask?(t.start=this._mask.start,t.end=this._mask.end):(this.addFilter(t),t.renderable=!1):(this.removeFilter(this._mask),this._mask.renderable=!0),this._mask=t}}),Object.defineProperty(i.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){this._filters&&this.removeFilter(this._filters),this.addFilter(t);for(var e=[],i=0;i<t.length;i++)for(var n=t[i].passes,r=0;r<n.length;r++)e.push(n[r]);t.start.filterPasses=e}else this._filters&&this.removeFilter(this._filters);this._filters=t}}),i.DisplayObject.prototype.addFilter=function(t){var e=new i.FilterBlock,n=new i.FilterBlock;t.start=e,t.end=n,e.data=t,n.data=t,e.first=e.last=this,n.first=n.last=this,e.open=!0,e.target=this;var r,s,o=e,a=e;s=this.first._iPrev,s?(r=s._iNext,o._iPrev=s,s._iNext=o):r=this,r&&(r._iPrev=a,a._iNext=r);var o=n,a=n,r=null,s=null;s=this.last,r=s._iNext,r&&(r._iPrev=a,a._iNext=r),o._iPrev=s,s._iNext=o;for(var h=this,l=this.last;h;)h.last==l&&(h.last=n),h=h.parent;this.first=e,this.__renderGroup&&this.__renderGroup.addFilterBlocks(e,n)},i.DisplayObject.prototype.removeFilter=function(t){console.log("YUOIO");var e=t.start,i=e._iNext,n=e._iPrev;i&&(i._iPrev=n),n&&(n._iNext=i),this.first=e._iNext;var r=t.end,i=r._iNext,n=r._iPrev;i&&(i._iPrev=n),n._iNext=i;for(var s=r._iPrev,o=this;o.last==r&&(o.last=s,o=o.parent););this.__renderGroup&&this.__renderGroup.removeFilterBlocks(e,r)},i.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var t=this.localTransform,e=this.parent.worldTransform,n=this.worldTransform;t[0]=this._cr*this.scale.x,t[1]=-this._sr*this.scale.y,t[3]=this._sr*this.scale.x,t[4]=this._cr*this.scale.y;var r=this.pivot.x,s=this.pivot.y,o=t[0],a=t[1],h=this.position.x-t[0]*r-s*t[1],l=t[3],u=t[4],c=this.position.y-t[4]*s-r*t[3],d=e[0],p=e[1],f=e[2],m=e[3],g=e[4],y=e[5];t[2]=h,t[5]=c,n[0]=d*o+p*l,n[1]=d*a+p*u,n[2]=d*h+p*c+f,n[3]=m*o+g*l,n[4]=m*a+g*u,n[5]=m*h+g*c+y,this.worldAlpha=this.alpha*this.parent.worldAlpha,this.vcount=i.visibleCount},i.visibleCount=0,i.DisplayObjectContainer=function(){i.DisplayObject.call(this),this.children=[]},i.DisplayObjectContainer.prototype=Object.create(i.DisplayObject.prototype),i.DisplayObjectContainer.prototype.constructor=i.DisplayObjectContainer,i.DisplayObjectContainer.prototype.addChild=function(t){if(void 0!=t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.stage){var e=t;do e.interactive&&(this.stage.dirty=!0),e.stage=this.stage,e=e._iNext;while(e)}var i,n,r=t.first,s=t.last;n=this._filters||this._mask?this.last._iPrev:this.last,i=n._iNext;for(var o=this,a=n;o;)o.last==a&&(o.last=t.last),o=o.parent;i&&(i._iPrev=s,s._iNext=i),r._iPrev=n,n._iNext=r,this.__renderGroup&&(t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),this.__renderGroup.addDisplayObjectAndChildren(t))},i.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(!(e>=0&&e<=this.children.length))throw new Error(t+" The index "+e+" supplied is out of bounds "+this.children.length);if(void 0!=t.parent&&t.parent.removeChild(t),t.parent=this,this.stage){var i=t;do i.interactive&&(this.stage.dirty=!0),i.stage=this.stage,i=i._iNext;while(i)}var n,r,s=t.first,o=t.last;if(e==this.children.length){r=this.last;for(var a=this,h=this.last;a;)a.last==h&&(a.last=t.last),a=a.parent}else r=0===e?this:this.children[e-1].last;n=r._iNext,n&&(n._iPrev=o,o._iNext=n),s._iPrev=r,r._iNext=s,this.children.splice(e,0,t),this.__renderGroup&&(t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),this.__renderGroup.addDisplayObjectAndChildren(t))},i.DisplayObjectContainer.prototype.swapChildren=function(){},i.DisplayObjectContainer.prototype.getChildAt=function(t){if(t>=0&&t<this.children.length)return this.children[t];throw new Error(child+" Both the supplied DisplayObjects must be a child of the caller "+this)},i.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error(t+" The supplied DisplayObject must be a child of the caller "+this);var i=t.first,n=t.last,r=n._iNext,s=i._iPrev;if(r&&(r._iPrev=s),s._iNext=r,this.last==n)for(var o=i._iPrev,a=this;a.last==n.last&&(a.last=o,a=a.parent););if(n._iNext=null,i._iPrev=null,this.stage){var h=t;do h.interactive&&(this.stage.dirty=!0),h.stage=null,h=h._iNext;while(h)}t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),t.parent=void 0,this.children.splice(e,1)},i.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible){i.DisplayObject.prototype.updateTransform.call(this);for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()}},i.blendModes={},i.blendModes.NORMAL=0,i.blendModes.SCREEN=1,i.Sprite=function(t){i.DisplayObjectContainer.call(this),this.anchor=new i.Point,this.texture=t,this.blendMode=i.blendModes.NORMAL,this._width=0,this._height=0,t.baseTexture.hasLoaded?this.updateFrame=!0:(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},i.Sprite.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Sprite.prototype.constructor=i.Sprite,Object.defineProperty(i.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(i.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),i.Sprite.prototype.setTexture=function(t){this.texture.baseTexture!=t.baseTexture?(this.textureChange=!0,this.texture=t,this.__renderGroup&&this.__renderGroup.updateTexture(this)):this.texture=t,this.updateFrame=!0},i.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height),this.updateFrame=!0},i.Sprite.fromFrame=function(t){var e=i.TextureCache[t];if(!e)throw new Error("The frameId '"+t+"' does not exist in the texture cache"+this);return new i.Sprite(e)},i.Sprite.fromImage=function(t){var e=i.Texture.fromImage(t);return new i.Sprite(e)},i.Stage=function(t){i.DisplayObjectContainer.call(this),this.worldTransform=i.mat3.create(),this.interactive=!0,this.interactionManager=new i.InteractionManager(this),this.dirty=!0,this.__childrenAdded=[],this.__childrenRemoved=[],this.stage=this,this.stage.hitArea=new i.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t),this.worldVisible=!0},i.Stage.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Stage.prototype.constructor=i.Stage,i.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},i.Stage.prototype.updateTransform=function(){this.worldAlpha=1,this.vcount=i.visibleCount;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},i.Stage.prototype.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=t(this.backgroundColor);var i=this.backgroundColor.toString(16);i="000000".substr(0,6-i.length)+i,this.backgroundColorString="#"+i},i.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},i.CustomRenderable=function(){i.DisplayObject.call(this),this.renderable=!0},i.CustomRenderable.prototype=Object.create(i.DisplayObject.prototype),i.CustomRenderable.prototype.constructor=i.CustomRenderable,i.CustomRenderable.prototype.renderCanvas=function(){},i.CustomRenderable.prototype.initWebGL=function(){},i.CustomRenderable.prototype.renderWebGL=function(){},i.Strip=function(t,e,n){i.DisplayObjectContainer.call(this),this.texture=t,this.blendMode=i.blendModes.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(r){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}this.width=e,this.height=n,t.baseTexture.hasLoaded?(this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0):(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},i.Strip.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Strip.prototype.constructor=i.Strip,i.Strip.prototype.setTexture=function(t){this.texture=t,this.width=t.frame.width,this.height=t.frame.height,this.updateFrame=!0},i.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},i.Rope=function(t,e){i.Strip.call(this,t),this.points=e;try{this.verticies=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length)}catch(n){this.verticies=verticies,this.uvs=uvs,this.colors=colors,this.indices=indices}this.refresh()},i.Rope.prototype=Object.create(i.Strip.prototype),i.Rope.prototype.constructor=i.Rope,i.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,i=this.indices,n=this.colors,r=t[0],s=t[0];this.count-=.2,e[0]=0,e[1]=1,e[2]=0,e[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var o=t.length,a=1;o>a;a++){var s=t[a],h=4*a,l=a/(o-1);a%2?(e[h]=l,e[h+1]=0,e[h+2]=l,e[h+3]=1):(e[h]=l,e[h+1]=0,e[h+2]=l,e[h+3]=1),h=2*a,n[h]=1,n[h+1]=1,h=2*a,i[h]=h,i[h+1]=h+1,r=s}}},i.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var e,n=this.verticies,r=t[0],s={x:0,y:0},o=t[0];this.count-=.2,n[0]=o.x+s.x,n[1]=o.y+s.y,n[2]=o.x-s.x,n[3]=o.y-s.y;for(var a=t.length,h=1;a>h;h++){var o=t[h],l=4*h;e=h<t.length-1?t[h+1]:o,s.y=-(e.x-r.x),s.x=e.y-r.y;var u=10*(1-h/(a-1));u>1&&(u=1);var c=Math.sqrt(s.x*s.x+s.y*s.y),d=this.texture.height/2;s.x/=c,s.y/=c,s.x*=d,s.y*=d,n[l]=o.x+s.x,n[l+1]=o.y+s.y,n[l+2]=o.x-s.x,n[l+3]=o.y-s.y,r=o}i.DisplayObjectContainer.prototype.updateTransform.call(this)}},i.Rope.prototype.setTexture=function(t){this.texture=t,this.updateFrame=!0},i.TilingSprite=function(t,e,n){i.DisplayObjectContainer.call(this),this.texture=t,this.width=e,this.height=n,this.tileScale=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this.renderable=!0,this.blendMode=i.blendModes.NORMAL},i.TilingSprite.prototype=Object.create(i.DisplayObjectContainer.prototype),i.TilingSprite.prototype.constructor=i.TilingSprite,i.TilingSprite.prototype.setTexture=function(t){this.texture=t,this.updateFrame=!0},i.TilingSprite.prototype.onTextureUpdate=function(){this.updateFrame=!0},i.AbstractFilter=function(t,e){this.passes=[this],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},i.FilterBlock=function(){this.visible=!0,this.renderable=!0},i.Graphics=function(){i.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.currentPath={points:[]}},i.Graphics.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Graphics.prototype.constructor=i.Graphics,i.Graphics.prototype.lineStyle=function(t,e,n){0===this.currentPath.points.length&&this.graphicsData.pop(),this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0==n?1:n,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:i.Graphics.POLY},this.graphicsData.push(this.currentPath)},i.Graphics.prototype.moveTo=function(t,e){0===this.currentPath.points.length&&this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:i.Graphics.POLY},this.currentPath.points.push(t,e),this.graphicsData.push(this.currentPath)},i.Graphics.prototype.lineTo=function(t,e){this.currentPath.points.push(t,e),this.dirty=!0},i.Graphics.prototype.beginFill=function(t,e){this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0==e?1:e},i.Graphics.prototype.endFill=function(){this.filling=!1,this.fillColor=null,this.fillAlpha=1},i.Graphics.prototype.drawRect=function(t,e,n,r){0===this.currentPath.points.length&&this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,r],type:i.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0},i.Graphics.prototype.drawCircle=function(t,e,n){0===this.currentPath.points.length&&this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,n],type:i.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0},i.Graphics.prototype.drawElipse=function(t,e,n,r){0===this.currentPath.points.length&&this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,r],type:i.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0},i.Graphics.prototype.clear=function(){this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null},i.Graphics.prototype.updateFilterBounds=function(){if(!this.bounds){for(var t,e,n,r=1/0,s=-1/0,o=1/0,a=-1/0,h=0;h<this.graphicsData.length;h++){var l=this.graphicsData[h],u=l.type,c=l.lineWidth;if(t=l.points,u===i.Graphics.RECT){e=t.x-c/2,n=t.y-c/2;var d=t.width+c,p=t.height+c;r=r>e?e:r,s=e+d>s?e+d:s,o=o>n?e:o,a=n+p>a?n+p:a}else if(u===i.Graphics.CIRC||u===i.Graphics.ELIP){e=t.x,n=t.y;var f=t.radius+c/2;r=r>e-f?e-f:r,s=e+f>s?e+f:s,o=o>n-f?n-f:o,a=n+f>a?n+f:a}else for(var m=0;m<t.length;m+=2)e=t[m],n=t[m+1],r=r>e-c?e-c:r,s=e+c>s?e+c:s,o=o>n-c?n-c:o,a=n+c>a?n+c:a}this.bounds=new i.Rectangle(r,o,s-r,a-o)}},i.Graphics.POLY=0,i.Graphics.RECT=1,i.Graphics.CIRC=2,i.Graphics.ELIP=3,i.CanvasGraphics=function(){},i.CanvasGraphics.renderGraphics=function(t,e){for(var n=t.worldAlpha,r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],o=s.points;if(e.strokeStyle=color="#"+("00000"+(0|s.lineColor).toString(16)).substr(-6),e.lineWidth=s.lineWidth,s.type==i.Graphics.POLY){e.beginPath(),e.moveTo(o[0],o[1]);for(var a=1;a<o.length/2;a++)e.lineTo(o[2*a],o[2*a+1]);o[0]==o[o.length-2]&&o[1]==o[o.length-1]&&e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*n,e.fillStyle=color="#"+("00000"+(0|s.fillColor).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*n,e.stroke())}else if(s.type==i.Graphics.RECT)(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*n,e.fillStyle=color="#"+("00000"+(0|s.fillColor).toString(16)).substr(-6),e.fillRect(o[0],o[1],o[2],o[3])),s.lineWidth&&(e.globalAlpha=s.lineAlpha*n,e.strokeRect(o[0],o[1],o[2],o[3]));else if(s.type==i.Graphics.CIRC)e.beginPath(),e.arc(o[0],o[1],o[2],0,2*Math.PI),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*n,e.fillStyle=color="#"+("00000"+(0|s.fillColor).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*n,e.stroke());else if(s.type==i.Graphics.ELIP){var h=s.points,l=2*h[2],u=2*h[3],c=h[0]-l/2,d=h[1]-u/2;e.beginPath();var p=.5522848,f=l/2*p,m=u/2*p,g=c+l,y=d+u,v=c+l/2,x=d+u/2;e.moveTo(c,x),e.bezierCurveTo(c,x-m,v-f,d,v,d),e.bezierCurveTo(v+f,d,g,x-m,g,x),e.bezierCurveTo(g,x+m,v+f,y,v,y),e.bezierCurveTo(v-f,y,c,x+m,c,x),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*n,e.fillStyle=color="#"+("00000"+(0|s.fillColor).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*n,e.stroke())}}},i.CanvasGraphics.renderGraphicsMask=function(t,e){t.worldAlpha;var n=t.graphicsData.length;if(0!==n){n>1&&(n=1,console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var r=0;1>r;r++){var s=t.graphicsData[r],o=s.points;if(s.type==i.Graphics.POLY){e.beginPath(),e.moveTo(o[0],o[1]);for(var a=1;a<o.length/2;a++)e.lineTo(o[2*a],o[2*a+1]);o[0]==o[o.length-2]&&o[1]==o[o.length-1]&&e.closePath()}else if(s.type==i.Graphics.RECT)e.beginPath(),e.rect(o[0],o[1],o[2],o[3]),e.closePath();else if(s.type==i.Graphics.CIRC)e.beginPath(),e.arc(o[0],o[1],o[2],0,2*Math.PI),e.closePath();else if(s.type==i.Graphics.ELIP){var h=s.points,l=2*h[2],u=2*h[3],c=h[0]-l/2,d=h[1]-u/2;e.beginPath();var p=.5522848,f=l/2*p,m=u/2*p,g=c+l,y=d+u,v=c+l/2,x=d+u/2;e.moveTo(c,x),e.bezierCurveTo(c,x-m,v-f,d,v,d),e.bezierCurveTo(v+f,d,g,x-m,g,x),e.bezierCurveTo(g,x+m,v+f,y,v,y),e.bezierCurveTo(v-f,y,c,x+m,c,x),e.closePath()}}}},i.CanvasRenderer=function(t,e,i,n){this.transparent=n,this.width=t||800,this.height=e||600,this.view=i||document.createElement("canvas"),this.context=this.view.getContext("2d"),this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0},i.CanvasRenderer.prototype.constructor=i.CanvasRenderer,i.CanvasRenderer.prototype.render=function(t){i.texturesToUpdate=[],i.texturesToDestroy=[],i.visibleCount++,t.updateTransform(),this.view.style.backgroundColor==t.backgroundColorString||this.transparent||(this.view.style.backgroundColor=t.backgroundColorString),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),i.Texture.frameUpdates.length>0&&(i.Texture.frameUpdates=[])},i.CanvasRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e},i.CanvasRenderer.prototype.renderDisplayObject=function(t){var e,n=this.context;n.globalCompositeOperation="source-over";var r=t.last._iNext;t=t.first;do if(e=t.worldTransform,t.visible)if(t.renderable){if(t instanceof i.Sprite){var s=t.texture.frame;s&&s.width&&s.height&&(n.globalAlpha=t.worldAlpha,n.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),n.drawImage(t.texture.baseTexture.source,s.x,s.y,s.width,s.height,t.anchor.x*-s.width,t.anchor.y*-s.height,s.width,s.height))}else if(t instanceof i.Strip)n.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),this.renderStrip(t);else if(t instanceof i.TilingSprite)n.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),this.renderTilingSprite(t);else if(t instanceof i.CustomRenderable)n.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),t.renderCanvas(this);else if(t instanceof i.Graphics)n.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),i.CanvasGraphics.renderGraphics(t,n);else if(t instanceof i.FilterBlock&&t.data instanceof i.Graphics){var o=t.data;if(t.open){n.save();var a=o.alpha,h=o.worldTransform;n.setTransform(h[0],h[3],h[1],h[4],h[2],h[5]),o.worldAlpha=.5,n.worldAlpha=0,i.CanvasGraphics.renderGraphicsMask(o,n),n.clip(),o.worldAlpha=a}else n.restore()}t=t._iNext}else t=t._iNext;else t=t.last._iNext;while(t!=r)},i.CanvasRenderer.prototype.renderStripFlat=function(t){var e=this.context,i=t.verticies;t.uvs;var n=i.length/2;this.count++,e.beginPath();for(var r=1;n-2>r;r++){var s=2*r,o=i[s],a=i[s+2],h=i[s+4],l=i[s+1],u=i[s+3],c=i[s+5];e.moveTo(o,l),e.lineTo(a,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},i.CanvasRenderer.prototype.renderTilingSprite=function(t){var e=this.context;e.globalAlpha=t.worldAlpha,t.__tilePattern||(t.__tilePattern=e.createPattern(t.texture.baseTexture.source,"repeat")),e.beginPath();var i=t.tilePosition,n=t.tileScale;e.scale(n.x,n.y),e.translate(i.x,i.y),e.fillStyle=t.__tilePattern,e.fillRect(-i.x,-i.y,t.width/n.x,t.height/n.y),e.scale(1/n.x,1/n.y),e.translate(-i.x,-i.y),e.closePath()},i.CanvasRenderer.prototype.renderStrip=function(t){var e=this.context,i=t.verticies,n=t.uvs,r=i.length/2;this.count++;for(var s=1;r-2>s;s++){var o=2*s,a=i[o],h=i[o+2],l=i[o+4],u=i[o+1],c=i[o+3],d=i[o+5],p=n[o]*t.texture.width,f=n[o+2]*t.texture.width,m=n[o+4]*t.texture.width,g=n[o+1]*t.texture.height,y=n[o+3]*t.texture.height,v=n[o+5]*t.texture.height;e.save(),e.beginPath(),e.moveTo(a,u),e.lineTo(h,c),e.lineTo(l,d),e.closePath(),e.clip();var x=p*y+g*m+f*v-y*m-g*f-p*v,_=a*y+g*l+h*v-y*l-g*h-a*v,b=p*h+a*m+f*l-h*m-a*f-p*l,w=p*y*l+g*h*m+a*f*v-a*y*m-g*f*l-p*h*v,T=u*y+g*d+c*v-y*d-g*c-u*v,S=p*c+u*m+f*d-c*m-u*f-p*d,A=p*y*d+g*c*m+u*f*v-u*y*m-g*f*d-p*c*v;e.transform(_/x,T/x,b/x,S/x,w/x,A/x),e.drawImage(t.texture.baseTexture.source,0,0),e.restore()}},i.PixiShader=function(){this.program,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;","}"],this.textureCount=0
},i.PixiShader.prototype.init=function(){var t=i.compileProgram(this.vertexSrc||i.PixiShader.defaultVertexSrc,this.fragmentSrc),e=i.gl;e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord");for(var n in this.uniforms)this.uniforms[n].uniformLocation=e.getUniformLocation(t,n);this.initUniforms(),this.program=t},i.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t;for(var e in this.uniforms){var t=this.uniforms[e],n=t.type;"sampler2D"==n?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"==n||"mat3"==n||"mat4"==n?(t.glMatrix=!0,t.glValueLength=1,"mat2"==n?t.glFunc=i.gl.uniformMatrix2fv:"mat3"==n?t.glFunc=i.gl.uniformMatrix3fv:"mat4"==n&&(t.glFunc=i.gl.uniformMatrix4fv)):(t.glFunc=i.gl["uniform"+n],t.glValueLength="2f"==n||"2i"==n?2:"3f"==n||"3i"==n?3:"4f"==n||"4i"==n?4:1)}},i.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){if(i.gl.activeTexture(i.gl["TEXTURE"+this.textureCount]),i.gl.bindTexture(i.gl.TEXTURE_2D,t.value.baseTexture._glTexture),t.textureData){var e=t.textureData,n=e.magFilter?e.magFilter:i.gl.LINEAR,r=e.minFilter?e.minFilter:i.gl.LINEAR,s=e.wrapS?e.wrapS:i.gl.CLAMP_TO_EDGE,o=e.wrapT?e.wrapT:i.gl.CLAMP_TO_EDGE,a=e.luminance?i.gl.LUMINANCE:i.gl.RGBA;if(e.repeat&&(s=i.gl.REPEAT,o=i.gl.REPEAT),i.gl.pixelStorei(i.gl.UNPACK_FLIP_Y_WEBGL,!1),e.width){var h=e.width?e.width:512,l=e.height?e.height:2,u=e.border?e.border:0;i.gl.texImage2D(i.gl.TEXTURE_2D,0,a,h,l,u,a,i.gl.UNSIGNED_BYTE,null)}else i.gl.texImage2D(i.gl.TEXTURE_2D,0,a,i.gl.RGBA,i.gl.UNSIGNED_BYTE,t.value.baseTexture.source);i.gl.texParameteri(i.gl.TEXTURE_2D,i.gl.TEXTURE_MAG_FILTER,n),i.gl.texParameteri(i.gl.TEXTURE_2D,i.gl.TEXTURE_MIN_FILTER,r),i.gl.texParameteri(i.gl.TEXTURE_2D,i.gl.TEXTURE_WRAP_S,s),i.gl.texParameteri(i.gl.TEXTURE_2D,i.gl.TEXTURE_WRAP_T,o)}i.gl.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},i.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t;for(var e in this.uniforms)t=this.uniforms[e],1==t.glValueLength?t.glMatrix===!0?t.glFunc.call(i.gl,t.uniformLocation,t.transpose,t.value):t.glFunc.call(i.gl,t.uniformLocation,t.value):2==t.glValueLength?t.glFunc.call(i.gl,t.uniformLocation,t.value.x,t.value.y):3==t.glValueLength?t.glFunc.call(i.gl,t.uniformLocation,t.value.x,t.value.y,t.value.z):4==t.glValueLength?t.glFunc.call(i.gl,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"==t.type&&(t._init?(i.gl.activeTexture(i.gl["TEXTURE"+this.textureCount]),i.gl.bindTexture(i.gl.TEXTURE_2D,t.value.baseTexture._glTexture),i.gl.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},i.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","vTextureCoord = aTextureCoord;","vColor = aColor;","}"],i.PrimitiveShader=function(){this.program,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","varying vec4 vColor;","void main(void) {","vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","v -= offsetVector.xyx;","gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","vColor = aColor  * alpha;","}"]},i.PrimitiveShader.prototype.init=function(){var t=i.compileProgram(this.vertexSrc,this.fragmentSrc),e=i.gl;e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},i.StripShader=function(){this.program,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","gl_FragColor = gl_FragColor * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","varying vec2 offsetVector;","varying float vColor;","void main(void) {","vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","v -= offsetVector.xyx;","gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","vTextureCoord = aTextureCoord;","vColor = aColor;","}"]},i.StripShader.prototype.init=function(){var t=i.compileProgram(this.vertexSrc,this.fragmentSrc),e=i.gl;e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},i._batchs=[],i._getBatch=function(t){return 0===i._batchs.length?new i.WebGLBatch(t):i._batchs.pop()},i._returnBatch=function(t){t.clean(),i._batchs.push(t)},i._restoreBatchs=function(t){for(var e=0;e<i._batchs.length;e++)i._batchs[e].restoreLostContext(t)},i.WebGLBatch=function(t){this.gl=t,this.size=0,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.blendMode=i.blendModes.NORMAL,this.dynamicSize=1},i.WebGLBatch.prototype.constructor=i.WebGLBatch,i.WebGLBatch.prototype.clean=function(){this.verticies=[],this.uvs=[],this.indices=[],this.colors=[],this.dynamicSize=1,this.texture=null,this.last=null,this.size=0,this.head,this.tail},i.WebGLBatch.prototype.restoreLostContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer()},i.WebGLBatch.prototype.init=function(t){t.batch=this,this.dirty=!0,this.blendMode=t.blendMode,this.texture=t.texture.baseTexture,this.head=t,this.tail=t,this.size=1,this.growBatch()},i.WebGLBatch.prototype.insertBefore=function(t,e){this.size++,t.batch=this,this.dirty=!0;var i=e.__prev;e.__prev=t,t.__next=e,i?(t.__prev=i,i.__next=t):this.head=t},i.WebGLBatch.prototype.insertAfter=function(t,e){this.size++,t.batch=this,this.dirty=!0;var i=e.__next;e.__next=t,t.__prev=e,i?(t.__next=i,i.__prev=t):this.tail=t},i.WebGLBatch.prototype.remove=function(t){return this.size--,0===this.size?(t.batch=null,t.__prev=null,t.__next=null,void 0):(t.__prev?t.__prev.__next=t.__next:(this.head=t.__next,this.head.__prev=null),t.__next?t.__next.__prev=t.__prev:(this.tail=t.__prev,this.tail.__next=null),t.batch=null,t.__next=null,t.__prev=null,this.dirty=!0,void 0)},i.WebGLBatch.prototype.split=function(t){this.dirty=!0;var e=new i.WebGLBatch(this.gl);e.init(t),e.texture=this.texture,e.tail=this.tail,this.tail=t.__prev,this.tail.__next=null,t.__prev=null;for(var n=0;t;)n++,t.batch=e,t=t.__next;return e.size=n,this.size-=n,e},i.WebGLBatch.prototype.merge=function(t){this.dirty=!0,this.tail.__next=t.head,t.head.__prev=this.tail,this.size+=t.size,this.tail=t.tail;for(var e=t.head;e;)e.batch=this,e=e.__next},i.WebGLBatch.prototype.growBatch=function(){var t=this.gl;this.dynamicSize=1==this.size?1:1.5*this.size,this.verticies=new Float32Array(8*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.verticies,t.DYNAMIC_DRAW),this.uvs=new Float32Array(8*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.DYNAMIC_DRAW),this.dirtyUVS=!0,this.colors=new Float32Array(4*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.DYNAMIC_DRAW),this.dirtyColors=!0,this.indices=new Uint16Array(6*this.dynamicSize);for(var e=this.indices.length/6,i=0;e>i;i++){var n=6*i,r=4*i;this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},i.WebGLBatch.prototype.refresh=function(){this.gl,this.dynamicSize<this.size&&this.growBatch();for(var t,e=0,i=this.head;i;){t=8*e;var n=i.texture,r=n.frame,s=n.baseTexture.width,o=n.baseTexture.height;this.uvs[t+0]=r.x/s,this.uvs[t+1]=r.y/o,this.uvs[t+2]=(r.x+r.width)/s,this.uvs[t+3]=r.y/o,this.uvs[t+4]=(r.x+r.width)/s,this.uvs[t+5]=(r.y+r.height)/o,this.uvs[t+6]=r.x/s,this.uvs[t+7]=(r.y+r.height)/o,i.updateFrame=!1,colorIndex=4*e,this.colors[colorIndex]=this.colors[colorIndex+1]=this.colors[colorIndex+2]=this.colors[colorIndex+3]=i.worldAlpha,i=i.__next,e++}this.dirtyUVS=!0,this.dirtyColors=!0},i.WebGLBatch.prototype.update=function(){this.gl;for(var t,e,n,r,s,o,a,h,l,u,c,d,p,f,m,g,y=0,v=this.head,x=this.verticies,_=this.uvs,b=this.colors;v;){if(v.vcount===i.visibleCount){if(e=v.texture.frame.width,n=v.texture.frame.height,r=v.anchor.x,s=v.anchor.y,o=e*(1-r),a=e*-r,h=n*(1-s),l=n*-s,u=8*y,t=v.worldTransform,c=t[0],d=t[3],p=t[1],f=t[4],m=t[2],g=t[5],x[u+0]=c*a+p*l+m,x[u+1]=f*l+d*a+g,x[u+2]=c*o+p*l+m,x[u+3]=f*l+d*o+g,x[u+4]=c*o+p*h+m,x[u+5]=f*h+d*o+g,x[u+6]=c*a+p*h+m,x[u+7]=f*h+d*a+g,v.updateFrame||v.texture.updateFrame){this.dirtyUVS=!0;var w=v.texture,T=w.frame,S=w.baseTexture.width,A=w.baseTexture.height;_[u+0]=T.x/S,_[u+1]=T.y/A,_[u+2]=(T.x+T.width)/S,_[u+3]=T.y/A,_[u+4]=(T.x+T.width)/S,_[u+5]=(T.y+T.height)/A,_[u+6]=T.x/S,_[u+7]=(T.y+T.height)/A,v.updateFrame=!1}if(v.cacheAlpha!=v.worldAlpha){v.cacheAlpha=v.worldAlpha;var C=4*y;b[C]=b[C+1]=b[C+2]=b[C+3]=v.worldAlpha,this.dirtyColors=!0}}else u=8*y,x[u+0]=x[u+1]=x[u+2]=x[u+3]=x[u+4]=x[u+5]=x[u+6]=x[u+7]=0;y++,v=v.__next}},i.WebGLBatch.prototype.render=function(t,e){if(t=t||0,void 0==e&&(e=this.size),this.dirty&&(this.refresh(),this.dirty=!1),0!==this.size){this.update();var n=this.gl,r=i.defaultShader;n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.verticies),n.vertexAttribPointer(r.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer),this.dirtyUVS&&(this.dirtyUVS=!1,n.bufferSubData(n.ARRAY_BUFFER,0,this.uvs)),n.vertexAttribPointer(r.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.texture._glTexture),n.bindBuffer(n.ARRAY_BUFFER,this.colorBuffer),this.dirtyColors&&(this.dirtyColors=!1,n.bufferSubData(n.ARRAY_BUFFER,0,this.colors)),n.vertexAttribPointer(r.colorAttribute,1,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var s=e-t;n.drawElements(n.TRIANGLES,6*s,n.UNSIGNED_SHORT,12*t)}},i.WebGLFilterManager=function(t){this.transparent=t,this.filterStack=[],this.texturePool=[],this.offsetX=0,this.offsetY=0,this.initShaderBuffers()},i.WebGLFilterManager.prototype.begin=function(t,e){this.width=2*t.x,this.height=2*-t.y,this.buffer=e},i.WebGLFilterManager.prototype.pushFilter=function(t){var e=i.gl;this.filterStack.push(t);var n=t.filterPasses[0];this.offsetX+=t.target.filterArea.x,this.offsetY+=t.target.filterArea.y;var r=this.texturePool.pop();r||(r=new i.FilterTexture(this.width,this.height)),e.bindTexture(e.TEXTURE_2D,r.texture),this.getBounds(t.target);var s=t.target.filterArea,o=n.padding;s.x-=o,s.y-=o,s.width+=2*o,s.height+=2*o,s.x<0&&(s.x=0),s.width>this.width&&(s.width=this.width),s.y<0&&(s.y=0),s.height>this.height&&(s.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,r.frameBuffer),e.viewport(0,0,s.width,s.height),i.projection.x=s.width/2,i.projection.y=-s.height/2,i.offset.x=-s.x,i.offset.y=-s.y,e.uniform2f(i.defaultShader.projectionVector,s.width/2,-s.height/2),e.uniform2f(i.defaultShader.offsetVector,-s.x,-s.y),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=r},i.WebGLFilterManager.prototype.popFilter=function(){var t=i.gl,e=this.filterStack.pop(),n=e.target.filterArea,r=e._glFilterTexture;if(e.filterPasses.length>1){t.viewport(0,0,n.width,n.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=n.height,this.vertexArray[2]=n.width,this.vertexArray[3]=n.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=n.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var s=r,o=this.texturePool.pop();o||(o=new i.FilterTexture(this.width,this.height)),t.bindFramebuffer(t.FRAMEBUFFER,o.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var a=0;a<e.filterPasses.length-1;a++){var h=e.filterPasses[a];t.bindFramebuffer(t.FRAMEBUFFER,o.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),this.applyFilterPass(h,n,n.width,n.height);var l=s;s=o,o=l}t.enable(t.BLEND),r=s,this.texturePool.push(o)}var u=e.filterPasses[e.filterPasses.length-1];this.offsetX-=n.x,this.offsetY-=n.y;var c=this.width,d=this.height,p=0,f=0,m=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,this.transparent);else{var g=this.filterStack[this.filterStack.length-1],n=g.target.filterArea;c=n.width,d=n.height,p=n.x,f=n.y,m=g._glFilterTexture.frameBuffer}i.projection.x=c/2,i.projection.y=-d/2,i.offset.x=p,i.offset.y=f;var n=e.target.filterArea,y=n.x-p,v=n.y-f;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=y,this.vertexArray[1]=v+n.height,this.vertexArray[2]=y+n.width,this.vertexArray[3]=v+n.height,this.vertexArray[4]=y,this.vertexArray[5]=v,this.vertexArray[6]=y+n.width,this.vertexArray[7]=v,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,c,d),t.bindFramebuffer(t.FRAMEBUFFER,m),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r.texture),this.applyFilterPass(u,n,c,d),t.useProgram(i.defaultShader.program),t.uniform2f(i.defaultShader.projectionVector,c/2,-d/2),t.uniform2f(i.defaultShader.offsetVector,-p,-f),this.texturePool.push(r),e._glFilterTexture=null},i.WebGLFilterManager.prototype.applyFilterPass=function(t,e,n,r){var s=i.gl;if(!t.shader){var o=new i.PixiShader;o.fragmentSrc=t.fragmentSrc,o.uniforms=t.uniforms,o.init(),t.shader=o}var o=t.shader;s.useProgram(o.program),s.uniform2f(o.projectionVector,n/2,-r/2),s.uniform2f(o.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),o.syncUniforms(),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer),s.vertexAttribPointer(o.aVertexPosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.uvBuffer),s.vertexAttribPointer(o.aTextureCoord,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.indexBuffer),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)},i.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=i.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},i.WebGLFilterManager.prototype.getBounds=function(t){var e,n,r,s,o,a,h,l,u,c,d,p,f,m,g,y,v,x,_,b,w,T,S,A,C=t.first,R=t.last._iNext,E=-1/0,P=-1/0,L=1/0,D=1/0;do{if(C.visible)if(C instanceof i.Sprite)n=C.texture.frame.width,r=C.texture.frame.height,s=C.anchor.x,o=C.anchor.y,a=n*(1-s),h=n*-s,l=r*(1-o),u=r*-o,c=!0;else if(C instanceof i.Graphics){C.updateFilterBounds();var k=C.bounds;n=k.width,r=k.height,a=k.x,h=k.x+k.width,l=k.y,u=k.y+k.height,c=!0}c&&(e=C.worldTransform,d=e[0],p=e[3],f=e[1],m=e[4],g=e[2],y=e[5],v=d*h+f*u+g,w=m*u+p*h+y,x=d*a+f*u+g,T=m*u+p*a+y,_=d*a+f*l+g,S=m*l+p*a+y,b=d*h+f*l+g,A=m*l+p*h+y,L=L>v?v:L,L=L>x?x:L,L=L>_?_:L,L=L>b?b:L,D=D>w?w:D,D=D>T?T:D,D=D>S?S:D,D=D>A?A:D,E=v>E?v:E,E=x>E?x:E,E=_>E?_:E,E=b>E?b:E,P=w>P?w:P,P=T>P?T:P,P=S>P?S:P,P=A>P?A:P),c=!1,C=C._iNext}while(C!=R);t.filterArea.x=L,t.filterArea.y=D,t.filterArea.width=E-L,t.filterArea.height=P-D},i.FilterTexture=function(t,e){var n=i.gl;this.frameBuffer=n.createFramebuffer(),this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture,0),this.resize(t,e)},i.FilterTexture.prototype.resize=function(t,e){this.width=t,this.height=e;var n=i.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,null)},i.WebGLGraphics=function(){},i.WebGLGraphics.renderGraphics=function(t,e){var n=i.gl;t._webGL||(t._webGL={points:[],indices:[],lastIndex:0,buffer:n.createBuffer(),indexBuffer:n.createBuffer()}),t.dirty&&(t.dirty=!1,t.clearDirty&&(t.clearDirty=!1,t._webGL.lastIndex=0,t._webGL.points=[],t._webGL.indices=[]),i.WebGLGraphics.updateGraphics(t)),i.activatePrimitiveShader();var r=i.mat3.clone(t.worldTransform);i.mat3.transpose(r),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.uniformMatrix3fv(i.primitiveShader.translationMatrix,!1,r),n.uniform2f(i.primitiveShader.projectionVector,e.x,-e.y),n.uniform2f(i.primitiveShader.offsetVector,-i.offset.x,-i.offset.y),n.uniform1f(i.primitiveShader.alpha,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,t._webGL.buffer),n.vertexAttribPointer(i.primitiveShader.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(i.primitiveShader.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._webGL.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,t._webGL.indices.length,n.UNSIGNED_SHORT,0),i.deactivatePrimitiveShader()},i.WebGLGraphics.updateGraphics=function(t){for(var e=t._webGL.lastIndex;e<t.graphicsData.length;e++){var n=t.graphicsData[e];n.type==i.Graphics.POLY?(n.fill&&n.points.length>3&&i.WebGLGraphics.buildPoly(n,t._webGL),n.lineWidth>0&&i.WebGLGraphics.buildLine(n,t._webGL)):n.type==i.Graphics.RECT?i.WebGLGraphics.buildRectangle(n,t._webGL):(n.type==i.Graphics.CIRC||n.type==i.Graphics.ELIP)&&i.WebGLGraphics.buildCircle(n,t._webGL)}t._webGL.lastIndex=t.graphicsData.length;var r=i.gl;t._webGL.glPoints=new Float32Array(t._webGL.points),r.bindBuffer(r.ARRAY_BUFFER,t._webGL.buffer),r.bufferData(r.ARRAY_BUFFER,t._webGL.glPoints,r.STATIC_DRAW),t._webGL.glIndicies=new Uint16Array(t._webGL.indices),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t._webGL.indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t._webGL.glIndicies,r.STATIC_DRAW)},i.WebGLGraphics.buildRectangle=function(e,n){var r=e.points,s=r[0],o=r[1],a=r[2],h=r[3];if(e.fill){var l=t(e.fillColor),u=e.fillAlpha,c=l[0]*u,d=l[1]*u,p=l[2]*u,f=n.points,m=n.indices,g=f.length/6;f.push(s,o),f.push(c,d,p,u),f.push(s+a,o),f.push(c,d,p,u),f.push(s,o+h),f.push(c,d,p,u),f.push(s+a,o+h),f.push(c,d,p,u),m.push(g,g,g+1,g+2,g+3,g+3)}e.lineWidth&&(e.points=[s,o,s+a,o,s+a,o+h,s,o+h,s,o],i.WebGLGraphics.buildLine(e,n))},i.WebGLGraphics.buildCircle=function(e,n){var r=e.points,s=r[0],o=r[1],a=r[2],h=r[3],l=40,u=2*Math.PI/l;if(e.fill){var c=t(e.fillColor),d=e.fillAlpha,p=c[0]*d,f=c[1]*d,m=c[2]*d,g=n.points,y=n.indices,v=g.length/6;y.push(v);for(var x=0;l+1>x;x++)g.push(s,o,p,f,m,d),g.push(s+Math.sin(u*x)*a,o+Math.cos(u*x)*h,p,f,m,d),y.push(v++,v++);y.push(v-1)}if(e.lineWidth){e.points=[];for(var x=0;l+1>x;x++)e.points.push(s+Math.sin(u*x)*a,o+Math.cos(u*x)*h);i.WebGLGraphics.buildLine(e,n)}},i.WebGLGraphics.buildLine=function(e,n){var r=e.points;if(0!==r.length){if(e.lineWidth%2)for(var s=0;s<r.length;s++)r[s]+=.5;var o=new i.Point(r[0],r[1]),a=new i.Point(r[r.length-2],r[r.length-1]);if(o.x==a.x&&o.y==a.y){r.pop(),r.pop(),a=new i.Point(r[r.length-2],r[r.length-1]);var h=a.x+.5*(o.x-a.x),l=a.y+.5*(o.y-a.y);r.unshift(h,l),r.push(h,l)}var u,c,d,p,f,m,g,y,v,x,_,b,w,T,S,A,C,R,E,P,L,D=n.points,k=n.indices,O=r.length/2,F=r.length,M=D.length/6,I=e.lineWidth/2,B=t(e.lineColor),N=e.lineAlpha,U=B[0]*N,G=B[1]*N,j=B[2]*N;u=r[0],c=r[1],d=r[2],p=r[3],g=-(c-p),y=u-d,L=Math.sqrt(g*g+y*y),g/=L,y/=L,g*=I,y*=I,D.push(u-g,c-y,U,G,j,N),D.push(u+g,c+y,U,G,j,N);for(var s=1;O-1>s;s++)u=r[2*(s-1)],c=r[2*(s-1)+1],d=r[2*s],p=r[2*s+1],f=r[2*(s+1)],m=r[2*(s+1)+1],g=-(c-p),y=u-d,L=Math.sqrt(g*g+y*y),g/=L,y/=L,g*=I,y*=I,v=-(p-m),x=d-f,L=Math.sqrt(v*v+x*x),v/=L,x/=L,v*=I,x*=I,w=-y+c-(-y+p),T=-g+d-(-g+u),S=(-g+u)*(-y+p)-(-g+d)*(-y+c),A=-x+m-(-x+p),C=-v+d-(-v+f),R=(-v+f)*(-x+p)-(-v+d)*(-x+m),E=w*C-A*T,Math.abs(E)<.1?(E+=10.1,D.push(d-g,p-y,U,G,j,N),D.push(d+g,p+y,U,G,j,N)):(px=(T*R-C*S)/E,py=(A*S-w*R)/E,P=(px-d)*(px-d)+(py-p)+(py-p),P>19600?(_=g-v,b=y-x,L=Math.sqrt(_*_+b*b),_/=L,b/=L,_*=I,b*=I,D.push(d-_,p-b),D.push(U,G,j,N),D.push(d+_,p+b),D.push(U,G,j,N),D.push(d-_,p-b),D.push(U,G,j,N),F++):(D.push(px,py),D.push(U,G,j,N),D.push(d-(px-d),p-(py-p)),D.push(U,G,j,N)));u=r[2*(O-2)],c=r[2*(O-2)+1],d=r[2*(O-1)],p=r[2*(O-1)+1],g=-(c-p),y=u-d,L=Math.sqrt(g*g+y*y),g/=L,y/=L,g*=I,y*=I,D.push(d-g,p-y),D.push(U,G,j,N),D.push(d+g,p+y),D.push(U,G,j,N),k.push(M);for(var s=0;F>s;s++)k.push(M++);k.push(M-1)}},i.WebGLGraphics.buildPoly=function(e,n){var r=e.points;if(!(r.length<6)){for(var s=n.points,o=n.indices,a=r.length/2,h=t(e.fillColor),l=e.fillAlpha,u=h[0]*l,c=h[1]*l,d=h[2]*l,p=i.PolyK.Triangulate(r),f=s.length/6,m=0;m<p.length;m+=3)o.push(p[m]+f),o.push(p[m]+f),o.push(p[m+1]+f),o.push(p[m+2]+f),o.push(p[m+2]+f);for(var m=0;a>m;m++)s.push(r[2*m],r[2*m+1],u,c,d,l)}},i._defaultFrame=new i.Rectangle(0,0,1,1),i.gl,i.WebGLRenderer=function(t,e,n,r,s){this.transparent=!!r,this.width=t||800,this.height=e||600,this.view=n||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height;var o=this;this.view.addEventListener("webglcontextlost",function(t){o.handleContextLost(t)},!1),this.view.addEventListener("webglcontextrestored",function(t){o.handleContextRestored(t)},!1),this.batchs=[];var a={alpha:this.transparent,antialias:!!s,premultipliedAlpha:!1,stencil:!0};try{i.gl=this.gl=this.view.getContext("experimental-webgl",a)}catch(h){try{i.gl=this.gl=this.view.getContext("webgl",a)}catch(h){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}i.initDefaultShaders();var l=this.gl;l.useProgram(i.defaultShader.program),i.WebGLRenderer.gl=l,this.batch=new i.WebGLBatch(l),l.disable(l.DEPTH_TEST),l.disable(l.CULL_FACE),l.enable(l.BLEND),l.colorMask(!0,!0,!0,this.transparent),i.projection=new i.Point(400,300),i.offset=new i.Point(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.stageRenderGroup=new i.WebGLRenderGroup(this.gl,this.transparent)},i.WebGLRenderer.prototype.constructor=i.WebGLRenderer,i.WebGLRenderer.getBatch=function(){return 0===i._batchs.length?new i.WebGLBatch(i.WebGLRenderer.gl):i._batchs.pop()},i.WebGLRenderer.returnBatch=function(t){t.clean(),i._batchs.push(t)},i.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(this.__stage=t,this.stageRenderGroup.setRenderable(t)),i.WebGLRenderer.updateTextures(),i.visibleCount++,t.updateTransform();var e=this.gl;if(e.colorMask(!0,!0,!0,this.transparent),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],!this.transparent),e.clear(e.COLOR_BUFFER_BIT),this.stageRenderGroup.backgroundColor=t.backgroundColorSplit,i.projection.x=this.width/2,i.projection.y=-this.height/2,this.stageRenderGroup.render(i.projection),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),i.Texture.frameUpdates.length>0){for(var n=0;n<i.Texture.frameUpdates.length;n++)i.Texture.frameUpdates[n].updateFrame=!1;i.Texture.frameUpdates=[]}}},i.WebGLRenderer.updateTextures=function(){for(var t=0;t<i.texturesToUpdate.length;t++)i.WebGLRenderer.updateTexture(i.texturesToUpdate[t]);for(var t=0;t<i.texturesToDestroy.length;t++)i.WebGLRenderer.destroyTexture(i.texturesToDestroy[t]);i.texturesToUpdate=[],i.texturesToDestroy=[]},i.WebGLRenderer.updateTexture=function(t){var e=i.gl;t._glTexture||(t._glTexture=e.createTexture()),t.hasLoaded&&(e.bindTexture(e.TEXTURE_2D,t._glTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null))},i.WebGLRenderer.destroyTexture=function(t){var e=i.gl;t._glTexture&&(t._glTexture=e.createTexture(),e.deleteTexture(e.TEXTURE_2D,t._glTexture))},i.WebGLRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e,this.gl.viewport(0,0,this.width,this.height),i.projection.x=this.width/2,i.projection.y=-this.height/2},i.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},i.WebGLRenderer.prototype.handleContextRestored=function(){this.gl=this.view.getContext("experimental-webgl",{alpha:!0}),this.initShaders();for(var t in i.TextureCache){var e=i.TextureCache[t].baseTexture;e._glTexture=null,i.WebGLRenderer.updateTexture(e)}for(var n=0;n<this.batchs.length;n++)this.batchs[n].restoreLostContext(this.gl),this.batchs[n].dirty=!0;i._restoreBatchs(this.gl),this.contextLost=!1},i.WebGLRenderGroup=function(t,e){this.gl=t,this.root,this.backgroundColor,this.transparent=void 0==e?!0:e,this.batchs=[],this.toRemove=[],this.filterManager=new i.WebGLFilterManager(this.transparent)},i.WebGLRenderGroup.prototype.constructor=i.WebGLRenderGroup,i.WebGLRenderGroup.prototype.setRenderable=function(t){this.root&&this.removeDisplayObjectAndChildren(this.root),t.worldVisible=t.visible,this.root=t,this.addDisplayObjectAndChildren(t)},i.WebGLRenderGroup.prototype.render=function(t,e){i.WebGLRenderer.updateTextures();var n=this.gl;n.uniform2f(i.defaultShader.projectionVector,t.x,t.y),this.filterManager.begin(t,e),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA);for(var r,s=0;s<this.batchs.length;s++)r=this.batchs[s],r instanceof i.WebGLBatch?this.batchs[s].render():this.renderSpecial(r,t)},i.WebGLRenderGroup.prototype.renderSpecific=function(t,e,n){i.WebGLRenderer.updateTextures();var r=this.gl;r.uniform2f(i.defaultShader.projectionVector,e.x,e.y),this.filterManager.begin(e,n);for(var s,o,a,h,l=t.first;l._iNext&&(!l.renderable||!l.__renderGroup);)l=l._iNext;var u=l.batch;if(l instanceof i.Sprite){u=l.batch;var c=u.head;if(c==l)s=0;else for(s=1;c.__next!=l;)s++,c=c.__next}else u=l;for(var d=t.last;d._iPrev&&(!d.renderable||!d.__renderGroup);)d=d._iNext;if(d instanceof i.Sprite){endBatch=d.batch;var c=endBatch.head;if(c==d)a=0;else for(a=1;c.__next!=d;)a++,c=c.__next}else endBatch=d;if(u==endBatch)return u instanceof i.WebGLBatch?u.render(s,a+1):this.renderSpecial(u,e),void 0;o=this.batchs.indexOf(u),h=this.batchs.indexOf(endBatch),u instanceof i.WebGLBatch?u.render(s):this.renderSpecial(u,e);for(var p=o+1;h>p;p++)renderable=this.batchs[p],renderable instanceof i.WebGLBatch?this.batchs[p].render():this.renderSpecial(renderable,e);endBatch instanceof i.WebGLBatch?endBatch.render(0,a+1):this.renderSpecial(endBatch,e)},i.WebGLRenderGroup.prototype.renderSpecial=function(t,e){var n=t.vcount===i.visibleCount;t instanceof i.TilingSprite?n&&this.renderTilingSprite(t,e):t instanceof i.Strip?n&&this.renderStrip(t,e):t instanceof i.CustomRenderable?n&&t.renderWebGL(this,e):t instanceof i.Graphics?n&&t.renderable&&i.WebGLGraphics.renderGraphics(t,e):t instanceof i.FilterBlock&&this.handleFilterBlock(t,e)},flip=!1;var r=[],s=0;return i.WebGLRenderGroup.prototype.handleFilterBlock=function(t,e){var n=i.gl;if(t.open)t.data instanceof Array?this.filterManager.pushFilter(t):(s++,r.push(t),n.enable(n.STENCIL_TEST),n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,1,1),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.WebGLGraphics.renderGraphics(t.data,e),n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.NOTEQUAL,0,r.length),n.stencilOp(n.KEEP,n.KEEP,n.KEEP));else if(t.data instanceof Array)this.filterManager.popFilter();else{var o=r.pop(t);o&&(n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,1,1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),i.WebGLGraphics.renderGraphics(o.data,e),n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.NOTEQUAL,0,r.length),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)),n.disable(n.STENCIL_TEST)}},i.WebGLRenderGroup.prototype.updateTexture=function(t){this.removeObject(t);for(var e=t.first;e!=this.root&&(e=e._iPrev,!e.renderable||!e.__renderGroup););for(var i=t.last;i._iNext&&(i=i._iNext,!i.renderable||!i.__renderGroup););this.insertObject(t,e,i)},i.WebGLRenderGroup.prototype.addFilterBlocks=function(t,e){t.__renderGroup=this,e.__renderGroup=this;for(var i=t;i!=this.root.first&&(i=i._iPrev,!i.renderable||!i.__renderGroup););this.insertAfter(t,i);for(var n=e;n!=this.root.first&&(n=n._iPrev,!n.renderable||!n.__renderGroup););this.insertAfter(e,n)},i.WebGLRenderGroup.prototype.removeFilterBlocks=function(t,e){this.removeObject(t),this.removeObject(e)},i.WebGLRenderGroup.prototype.addDisplayObjectAndChildren=function(t){t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t);for(var e=t.first;e!=this.root.first&&(e=e._iPrev,!e.renderable||!e.__renderGroup););for(var i=t.last;i._iNext&&(i=i._iNext,!i.renderable||!i.__renderGroup););var n=t.first,r=t.last._iNext;do n.__renderGroup=this,n.renderable&&(this.insertObject(n,e,i),e=n),n=n._iNext;while(n!=r)},i.WebGLRenderGroup.prototype.removeDisplayObjectAndChildren=function(t){if(t.__renderGroup==this){t.last;do t.__renderGroup=null,t.renderable&&this.removeObject(t),t=t._iNext;while(t)}},i.WebGLRenderGroup.prototype.insertObject=function(t,e,n){var r=e,s=n;if(t instanceof i.Sprite){var o,a;if(r instanceof i.Sprite){if(o=r.batch,o&&o.texture==t.texture.baseTexture&&o.blendMode==t.blendMode)return o.insertAfter(t,r),void 0}else o=r;if(s)if(s instanceof i.Sprite){if(a=s.batch){if(a.texture==t.texture.baseTexture&&a.blendMode==t.blendMode)return a.insertBefore(t,s),void 0;if(a==o){var h=o.split(s),l=i.WebGLRenderer.getBatch(),u=this.batchs.indexOf(o);return l.init(t),this.batchs.splice(u+1,0,l,h),void 0}}}else a=s;var l=i.WebGLRenderer.getBatch();if(l.init(t),o){var u=this.batchs.indexOf(o);this.batchs.splice(u+1,0,l)}else this.batchs.push(l)}else t instanceof i.TilingSprite?this.initTilingSprite(t):t instanceof i.Strip&&this.initStrip(t),this.insertAfter(t,r)},i.WebGLRenderGroup.prototype.insertAfter=function(t,e){if(e instanceof i.Sprite){var n=e.batch;if(n)if(n.tail==e){var r=this.batchs.indexOf(n);this.batchs.splice(r+1,0,t)}else{var s=n.split(e.__next),r=this.batchs.indexOf(n);this.batchs.splice(r+1,0,t,s)}else this.batchs.push(t)
}else{var r=this.batchs.indexOf(e);this.batchs.splice(r+1,0,t)}},i.WebGLRenderGroup.prototype.removeObject=function(t){var e;if(t instanceof i.Sprite){var n=t.batch;if(!n)return;n.remove(t),0==n.size&&(e=n)}else e=t;if(e){var r=this.batchs.indexOf(e);if(-1==r)return;if(0===r||r==this.batchs.length-1)return this.batchs.splice(r,1),e instanceof i.WebGLBatch&&i.WebGLRenderer.returnBatch(e),void 0;if(this.batchs[r-1]instanceof i.WebGLBatch&&this.batchs[r+1]instanceof i.WebGLBatch&&this.batchs[r-1].texture==this.batchs[r+1].texture&&this.batchs[r-1].blendMode==this.batchs[r+1].blendMode)return this.batchs[r-1].merge(this.batchs[r+1]),e instanceof i.WebGLBatch&&i.WebGLRenderer.returnBatch(e),i.WebGLRenderer.returnBatch(this.batchs[r+1]),this.batchs.splice(r,2),void 0;this.batchs.splice(r,1),e instanceof i.WebGLBatch&&i.WebGLRenderer.returnBatch(e)}},i.WebGLRenderGroup.prototype.initTilingSprite=function(t){var e=this.gl;t.verticies=new Float32Array([0,0,t.width,0,t.width,t.height,0,t.height]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.colors=new Float32Array([1,1,1,1]),t.indices=new Uint16Array([0,1,3,2]),t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.verticies,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW),t.texture.baseTexture._glTexture?(e.bindTexture(e.TEXTURE_2D,t.texture.baseTexture._glTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),t.texture.baseTexture._powerOf2=!0):t.texture.baseTexture._powerOf2=!0},i.WebGLRenderGroup.prototype.renderStrip=function(t,e){var n=this.gl;i.activateStripShader();var r=i.stripShader;r.program;var s=i.mat3.clone(t.worldTransform);i.mat3.transpose(s),n.uniformMatrix3fv(r.translationMatrix,!1,s),n.uniform2f(r.projectionVector,e.x,e.y),n.uniform2f(r.offsetVector,-i.offset.x,-i.offset.y),n.uniform1f(r.alpha,t.worldAlpha),t.dirty?(t.dirty=!1,n.bindBuffer(n.ARRAY_BUFFER,t._vertexBuffer),n.bufferData(n.ARRAY_BUFFER,t.verticies,n.STATIC_DRAW),n.vertexAttribPointer(r.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t._uvBuffer),n.bufferData(n.ARRAY_BUFFER,t.uvs,n.STATIC_DRAW),n.vertexAttribPointer(r.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.texture.baseTexture._glTexture),n.bindBuffer(n.ARRAY_BUFFER,t._colorBuffer),n.bufferData(n.ARRAY_BUFFER,t.colors,n.STATIC_DRAW),n.vertexAttribPointer(r.colorAttribute,1,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.indices,n.STATIC_DRAW)):(n.bindBuffer(n.ARRAY_BUFFER,t._vertexBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,t.verticies),n.vertexAttribPointer(r.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t._uvBuffer),n.vertexAttribPointer(r.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.texture.baseTexture._glTexture),n.bindBuffer(n.ARRAY_BUFFER,t._colorBuffer),n.vertexAttribPointer(r.colorAttribute,1,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._indexBuffer)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0),i.deactivateStripShader()},i.WebGLRenderGroup.prototype.renderTilingSprite=function(t,e){var n=this.gl;i.shaderProgram;var r=t.tilePosition,s=t.tileScale,o=r.x/t.texture.baseTexture.width,a=r.y/t.texture.baseTexture.height,h=t.width/t.texture.baseTexture.width/s.x,l=t.height/t.texture.baseTexture.height/s.y;t.uvs[0]=0-o,t.uvs[1]=0-a,t.uvs[2]=1*h-o,t.uvs[3]=0-a,t.uvs[4]=1*h-o,t.uvs[5]=1*l-a,t.uvs[6]=0-o,t.uvs[7]=1*l-a,n.bindBuffer(n.ARRAY_BUFFER,t._uvBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,t.uvs),this.renderStrip(t,e)},i.WebGLRenderGroup.prototype.initStrip=function(t){var e=this.gl;this.shaderProgram,t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.verticies,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},i.initDefaultShaders=function(){i.primitiveShader=new i.PrimitiveShader,i.primitiveShader.init(),i.stripShader=new i.StripShader,i.stripShader.init(),i.defaultShader=new i.PixiShader,i.defaultShader.init();var t=i.gl,e=i.defaultShader.program;t.useProgram(e),t.enableVertexAttribArray(i.defaultShader.aVertexPosition),t.enableVertexAttribArray(i.defaultShader.colorAttribute),t.enableVertexAttribArray(i.defaultShader.aTextureCoord)},i.activatePrimitiveShader=function(){var t=i.gl;t.useProgram(i.primitiveShader.program),t.disableVertexAttribArray(i.defaultShader.aVertexPosition),t.disableVertexAttribArray(i.defaultShader.colorAttribute),t.disableVertexAttribArray(i.defaultShader.aTextureCoord),t.enableVertexAttribArray(i.primitiveShader.aVertexPosition),t.enableVertexAttribArray(i.primitiveShader.colorAttribute)},i.deactivatePrimitiveShader=function(){var t=i.gl;t.useProgram(i.defaultShader.program),t.disableVertexAttribArray(i.primitiveShader.aVertexPosition),t.disableVertexAttribArray(i.primitiveShader.colorAttribute),t.enableVertexAttribArray(i.defaultShader.aVertexPosition),t.enableVertexAttribArray(i.defaultShader.colorAttribute),t.enableVertexAttribArray(i.defaultShader.aTextureCoord)},i.activateStripShader=function(){var t=i.gl;t.useProgram(i.stripShader.program)},i.deactivateStripShader=function(){var t=i.gl;t.useProgram(i.defaultShader.program)},i.CompileVertexShader=function(t,e){return i._CompileShader(t,e,t.VERTEX_SHADER)},i.CompileFragmentShader=function(t,e){return i._CompileShader(t,e,t.FRAGMENT_SHADER)},i._CompileShader=function(t,e,i){var n=e.join("\n"),r=t.createShader(i);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)},i.compileProgram=function(t,e){var n=i.gl,r=i.CompileFragmentShader(n,e),s=i.CompileVertexShader(n,t),o=n.createProgram();return n.attachShader(o,s),n.attachShader(o,r),n.linkProgram(o),n.getProgramParameter(o,n.LINK_STATUS)||console.log("Could not initialise shaders"),o},i.BitmapText=function(t,e){i.DisplayObjectContainer.call(this),this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},i.BitmapText.prototype=Object.create(i.DisplayObjectContainer.prototype),i.BitmapText.prototype.constructor=i.BitmapText,i.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},i.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):i.BitmapText.fonts[this.fontName].size,this.dirty=!0},i.BitmapText.prototype.updateText=function(){for(var t=i.BitmapText.fonts[this.fontName],e=new i.Point,n=null,r=[],s=0,o=[],a=0,h=this.fontSize/t.size,l=0;l<this.text.length;l++){var u=this.text.charCodeAt(l);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(l)))o.push(e.x),s=Math.max(s,e.x),a++,e.x=0,e.y+=t.lineHeight,n=null;else{var c=t.chars[u];c&&(n&&c[n]&&(e.x+=c.kerning[n]),r.push({texture:c.texture,line:a,charCode:u,position:new i.Point(e.x+c.xOffset,e.y+c.yOffset)}),e.x+=c.xAdvance,n=u)}}o.push(e.x),s=Math.max(s,e.x);var d=[];for(l=0;a>=l;l++){var p=0;"right"==this.style.align?p=s-o[l]:"center"==this.style.align&&(p=(s-o[l])/2),d.push(p)}for(l=0;l<r.length;l++){var f=new i.Sprite(r[l].texture);f.position.x=(r[l].position.x+d[r[l].line])*h,f.position.y=r[l].position.y*h,f.scale.x=f.scale.y=h,this.addChild(f)}this.width=e.x*h,this.height=(e.y+t.lineHeight)*h},i.BitmapText.prototype.updateTransform=function(){if(this.dirty){for(;this.children.length>0;)this.removeChild(this.getChildAt(0));this.updateText(),this.dirty=!1}i.DisplayObjectContainer.prototype.updateTransform.call(this)},i.BitmapText.fonts={},i.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),i.Sprite.call(this,i.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},i.Text.prototype=Object.create(i.Sprite.prototype),i.Text.prototype.constructor=i.Text,i.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,this.style=t,this.dirty=!0},i.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},i.Text.prototype.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),n=[],r=0,s=0;s<e.length;s++){var o=this.context.measureText(e[s]).width;n[s]=o,r=Math.max(r,o)}this.canvas.width=r+this.style.strokeThickness;var a=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness;for(this.canvas.height=a*e.length,this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top",s=0;s<e.length;s++){var h=new i.Point(this.style.strokeThickness/2,this.style.strokeThickness/2+s*a);"right"==this.style.align?h.x+=r-n[s]:"center"==this.style.align&&(h.x+=(r-n[s])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[s],h.x,h.y),this.style.fill&&this.context.fillText(e[s],h.x,h.y)}this.updateTexture()},i.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.frame.width=this.canvas.width,this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,i.texturesToUpdate.push(this.texture.baseTexture)},i.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),i.Sprite.prototype.updateTransform.call(this)},i.Text.prototype.determineFontHeight=function(t){var e=i.Text.heightCache[t];if(!e){var n=document.getElementsByTagName("body")[0],r=document.createElement("div"),s=document.createTextNode("M");r.appendChild(s),r.setAttribute("style",t+";position:absolute;top:0;left:0"),n.appendChild(r),e=r.offsetHeight,i.Text.heightCache[t]=e,n.removeChild(r)}return e},i.Text.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),n=0;n<i.length;n++){for(var r=this.style.wordWrapWidth,s=i[n].split(" "),o=0;o<s.length;o++){var a=this.context.measureText(s[o]).width,h=a+this.context.measureText(" ").width;h>r?(o>0&&(e+="\n"),e+=s[o]+" ",r=this.style.wordWrapWidth-a):(r-=h,e+=s[o]+" ")}e+="\n"}return e},i.Text.prototype.destroy=function(t){t&&this.texture.destroy()},i.Text.heightCache={},i.BaseTextureCache={},i.texturesToUpdate=[],i.texturesToDestroy=[],i.BaseTexture=function(t){if(i.EventTarget.call(this),this.width=100,this.height=100,this.hasLoaded=!1,this.source=t,t){if(this.source instanceof Image||this.source instanceof HTMLImageElement)if(this.source.complete)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,i.texturesToUpdate.push(this);else{var e=this;this.source.onload=function(){e.hasLoaded=!0,e.width=e.source.width,e.height=e.source.height,i.texturesToUpdate.push(e),e.dispatchEvent({type:"loaded",content:e})}}else this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,i.texturesToUpdate.push(this);this._powerOf2=!1}},i.BaseTexture.prototype.constructor=i.BaseTexture,i.BaseTexture.prototype.destroy=function(){this.source instanceof Image&&(this.source.src=null),this.source=null,i.texturesToDestroy.push(this)},i.BaseTexture.fromImage=function(t,e){var n=i.BaseTextureCache[t];if(!n){var r=new Image;e&&(r.crossOrigin=""),r.src=t,n=new i.BaseTexture(r),i.BaseTextureCache[t]=n}return n},i.TextureCache={},i.FrameCache={},i.Texture=function(t,e){if(i.EventTarget.call(this),e||(this.noFrame=!0,e=new i.Rectangle(0,0,1,1)),t instanceof i.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=new i.Point,this.scope=this,t.hasLoaded)this.noFrame&&(e=new i.Rectangle(0,0,t.width,t.height)),this.setFrame(e);else{var n=this;t.addEventListener("loaded",function(){n.onBaseTextureLoaded()})}},i.Texture.prototype.constructor=i.Texture,i.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new i.Rectangle(0,0,t.width,t.height)),this.noFrame=!1,this.width=this.frame.width,this.height=this.frame.height,this.scope.dispatchEvent({type:"update",content:this})},i.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy()},i.Texture.prototype.setFrame=function(t){if(this.frame=t,this.width=t.width,this.height=t.height,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0,i.Texture.frameUpdates.push(this)},i.Texture.fromImage=function(t,e){var n=i.TextureCache[t];return n||(n=new i.Texture(i.BaseTexture.fromImage(t,e)),i.TextureCache[t]=n),n},i.Texture.fromFrame=function(t){var e=i.TextureCache[t];if(!e)throw new Error("The frameId '"+t+"' does not exist in the texture cache "+this);return e},i.Texture.fromCanvas=function(t){var e=new i.BaseTexture(t);return new i.Texture(e)},i.Texture.addTextureToCache=function(t,e){i.TextureCache[e]=t},i.Texture.removeTextureFromCache=function(t){var e=i.TextureCache[t];return i.TextureCache[t]=null,e},i.Texture.frameUpdates=[],i.RenderTexture=function(t,e){i.EventTarget.call(this),this.width=t||100,this.height=e||100,this.indetityMatrix=i.mat3.create(),this.frame=new i.Rectangle(0,0,this.width,this.height),i.gl?this.initWebGL():this.initCanvas()},i.RenderTexture.prototype=Object.create(i.Texture.prototype),i.RenderTexture.prototype.constructor=i.RenderTexture,i.RenderTexture.prototype.initWebGL=function(){var t=i.gl;this.glFramebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.glFramebuffer),this.glFramebuffer.width=this.width,this.glFramebuffer.height=this.height,this.baseTexture=new i.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.baseTexture._glTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.baseTexture.isRender=!0,t.bindFramebuffer(t.FRAMEBUFFER,this.glFramebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.baseTexture._glTexture,0),this.projection=new i.Point(this.width/2,-this.height/2),this.render=this.renderWebGL},i.RenderTexture.prototype.resize=function(t,e){if(this.width=t,this.height=e,i.gl){this.projection.x=this.width/2,this.projection.y=-this.height/2;var n=i.gl;n.bindTexture(n.TEXTURE_2D,this.baseTexture._glTexture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null)}else this.frame.width=this.width,this.frame.height=this.height,this.renderer.resize(this.width,this.height)},i.RenderTexture.prototype.initCanvas=function(){this.renderer=new i.CanvasRenderer(this.width,this.height,null,0),this.baseTexture=new i.BaseTexture(this.renderer.view),this.frame=new i.Rectangle(0,0,this.width,this.height),this.render=this.renderCanvas},i.RenderTexture.prototype.renderWebGL=function(t,e,n){var r=i.gl;r.colorMask(!0,!0,!0,!0),r.viewport(0,0,this.width,this.height),r.bindFramebuffer(r.FRAMEBUFFER,this.glFramebuffer),n&&(r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT));var s=t.children,o=t.worldTransform;t.worldTransform=i.mat3.create(),t.worldTransform[4]=-1,t.worldTransform[5]=-2*this.projection.y,e&&(t.worldTransform[2]=e.x,t.worldTransform[5]-=e.y),i.visibleCount++,t.vcount=i.visibleCount;for(var a=0,h=s.length;h>a;a++)s[a].updateTransform();var l=t.__renderGroup;l?t==l.root?l.render(this.projection,this.glFramebuffer):l.renderSpecific(t,this.projection,this.glFramebuffer):(this.renderGroup||(this.renderGroup=new i.WebGLRenderGroup(r)),this.renderGroup.setRenderable(t),this.renderGroup.render(this.projection,this.glFramebuffer)),t.worldTransform=o},i.RenderTexture.prototype.renderCanvas=function(t,e,n){var r=t.children;t.worldTransform=i.mat3.create(),e&&(t.worldTransform[2]=e.x,t.worldTransform[5]=e.y);for(var s=0,o=r.length;o>s;s++)r[s].updateTransform();n&&this.renderer.context.clearRect(0,0,this.width,this.height),this.renderer.renderDisplayObject(t),this.renderer.context.setTransform(1,0,0,1,0,0)},i.EventTarget=function(){var t={};this.addEventListener=this.on=function(e,i){void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(i)&&t[e].push(i)},this.dispatchEvent=this.emit=function(e){if(t[e.type]&&t[e.type].length)for(var i=0,n=t[e.type].length;n>i;i++)t[e.type][i](e)},this.removeEventListener=this.off=function(e,i){var n=t[e].indexOf(i);-1!==n&&t[e].splice(n,1)}},i.PolyK={},i.PolyK.Triangulate=function(t){var e=!0,n=t.length>>1;if(3>n)return[];for(var r=[],s=[],o=0;n>o;o++)s.push(o);for(var o=0,a=n;a>3;){var h=s[(o+0)%a],l=s[(o+1)%a],u=s[(o+2)%a],c=t[2*h],d=t[2*h+1],p=t[2*l],f=t[2*l+1],m=t[2*u],g=t[2*u+1],y=!1;if(i.PolyK._convex(c,d,p,f,m,g,e)){y=!0;for(var v=0;a>v;v++){var x=s[v];if(x!=h&&x!=l&&x!=u&&i.PolyK._PointInTriangle(t[2*x],t[2*x+1],c,d,p,f,m,g)){y=!1;break}}}if(y)r.push(h,l,u),s.splice((o+1)%a,1),a--,o=0;else if(o++>3*a){if(!e)return console.log("PIXI Warning: shape too complex to fill"),[];var r=[];s=[];for(var o=0;n>o;o++)s.push(o);o=0,a=n,e=!1}}return r.push(s[0],s[1],s[2]),r},i.PolyK._PointInTriangle=function(t,e,i,n,r,s,o,a){var h=o-i,l=a-n,u=r-i,c=s-n,d=t-i,p=e-n,f=h*h+l*l,m=h*u+l*c,g=h*d+l*p,y=u*u+c*c,v=u*d+c*p,x=1/(f*y-m*m),_=(y*g-m*v)*x,b=(f*v-m*g)*x;return _>=0&&b>=0&&1>_+b},i.PolyK._convex=function(t,e,i,n,r,s,o){return(e-n)*(r-i)+(i-t)*(s-n)>=0==o},n.Camera=function(t,e,i,r,s,o){this.game=t,this.world=t.world,this.id=0,this.view=new n.Rectangle(i,r,s,o),this.screenView=new n.Rectangle(i,r,s,o),this.bounds=new n.Rectangle(i,r,s,o),this.deadzone=null,this.visible=!0,this.atLimit={x:!1,y:!1},this.target=null,this._edge=0,this.displayObject=null},n.Camera.FOLLOW_LOCKON=0,n.Camera.FOLLOW_PLATFORMER=1,n.Camera.FOLLOW_TOPDOWN=2,n.Camera.FOLLOW_TOPDOWN_TIGHT=3,n.Camera.prototype={follow:function(t,e){"undefined"==typeof e&&(e=n.Camera.FOLLOW_LOCKON),this.target=t;var i;switch(e){case n.Camera.FOLLOW_PLATFORMER:var r=this.width/8,s=this.height/3;this.deadzone=new n.Rectangle((this.width-r)/2,(this.height-s)/2-.25*s,r,s);break;case n.Camera.FOLLOW_TOPDOWN:i=Math.max(this.width,this.height)/4,this.deadzone=new n.Rectangle((this.width-i)/2,(this.height-i)/2,i,i);break;case n.Camera.FOLLOW_TOPDOWN_TIGHT:i=Math.max(this.width,this.height)/8,this.deadzone=new n.Rectangle((this.width-i)/2,(this.height-i)/2,i,i);break;case n.Camera.FOLLOW_LOCKON:this.deadzone=null;break;default:this.deadzone=null}},focusOn:function(t){this.setPosition(Math.round(t.x-this.view.halfWidth),Math.round(t.y-this.view.halfHeight))},focusOnXY:function(t,e){this.setPosition(Math.round(t-this.view.halfWidth),Math.round(e-this.view.halfHeight))},update:function(){this.target&&this.updateTarget(),this.bounds&&this.checkBounds(),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},updateTarget:function(){this.deadzone?(this._edge=this.target.x-this.deadzone.x,this.view.x>this._edge&&(this.view.x=this._edge),this._edge=this.target.x+this.target.width-this.deadzone.x-this.deadzone.width,this.view.x<this._edge&&(this.view.x=this._edge),this._edge=this.target.y-this.deadzone.y,this.view.y>this._edge&&(this.view.y=this._edge),this._edge=this.target.y+this.target.height-this.deadzone.y-this.deadzone.height,this.view.y<this._edge&&(this.view.y=this._edge)):this.focusOnXY(this.target.x,this.target.y)},setBoundsToWorld:function(){this.bounds.setTo(this.game.world.x,this.game.world.y,this.game.world.width,this.game.world.height)},checkBounds:function(){this.atLimit.x=!1,this.atLimit.y=!1,this.view.x<this.bounds.x&&(this.atLimit.x=!0,this.view.x=this.bounds.x),this.view.x>this.bounds.right-this.width&&(this.atLimit.x=!0,this.view.x=this.bounds.right-this.width+1),this.view.y<this.bounds.top&&(this.atLimit.y=!0,this.view.y=this.bounds.top),this.view.y>this.bounds.bottom-this.height&&(this.atLimit.y=!0,this.view.y=this.bounds.bottom-this.height+1),this.view.floor()},setPosition:function(t,e){this.view.x=t,this.view.y=e,this.bounds&&this.checkBounds()},setSize:function(t,e){this.view.width=t,this.view.height=e}},Object.defineProperty(n.Camera.prototype,"x",{get:function(){return this.view.x},set:function(t){this.view.x=t,this.bounds&&this.checkBounds()}}),Object.defineProperty(n.Camera.prototype,"y",{get:function(){return this.view.y},set:function(t){this.view.y=t,this.bounds&&this.checkBounds()}}),Object.defineProperty(n.Camera.prototype,"width",{get:function(){return this.view.width},set:function(t){this.view.width=t}}),Object.defineProperty(n.Camera.prototype,"height",{get:function(){return this.view.height},set:function(t){this.view.height=t}}),n.State=function(){this.game=null,this.add=null,this.camera=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.sound=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.particles=null,this.physics=null},n.State.prototype={preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},render:function(){},paused:function(){},destroy:function(){}},n.StateManager=function(t,e){this.game=t,this.states={},this._pendingState=null,null!==e&&(this._pendingState=e),this._created=!1,this.current="",this.onInitCallback=null,this.onPreloadCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPreRenderCallback=null,this.onLoadUpdateCallback=null,this.onLoadRenderCallback=null,this.onPausedCallback=null,this.onShutDownCallback=null},n.StateManager.prototype={boot:function(){this.game.onPause.add(this.pause,this),this.game.onResume.add(this.resume,this),null!==this._pendingState&&("string"==typeof this._pendingState?this.start(this._pendingState,!1,!1):this.add("default",this._pendingState,!0))},add:function(t,e,i){"undefined"==typeof i&&(i=!1);var r;return e instanceof n.State?r=e:"object"==typeof e?(r=e,r.game=this.game):"function"==typeof e&&(r=new e(this.game)),this.states[t]=r,i&&(this.game.isBooted?this.start(t):this._pendingState=t),r},remove:function(t){this.current==t&&(this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onDestroyCallback=null),delete this.states[t]},start:function(t,e,i){return"undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=!1),this.game.isBooted===!1?(this._pendingState=t,void 0):(this.checkState(t)!==!1&&(this.current&&this.onShutDownCallback.call(this.callbackContext,this.game),e&&(this.game.tweens.removeAll(),this.game.world.destroy(),i===!0&&this.game.cache.destroy()),this.setCurrentState(t),this.onPreloadCallback?(this.game.load.reset(),this.onPreloadCallback.call(this.callbackContext,this.game),0===this.game.load.totalQueuedFiles()?this.game.loadComplete():this.game.load.start()):this.game.loadComplete()),void 0)},dummy:function(){},checkState:function(t){if(this.states[t]){var e=!1;return this.states[t].preload&&(e=!0),e===!1&&this.states[t].loadRender&&(e=!0),e===!1&&this.states[t].loadUpdate&&(e=!0),e===!1&&this.states[t].create&&(e=!0),e===!1&&this.states[t].update&&(e=!0),e===!1&&this.states[t].preRender&&(e=!0),e===!1&&this.states[t].render&&(e=!0),e===!1&&this.states[t].paused&&(e=!0),e===!1?(console.warn("Invalid Phaser State object given. Must contain at least a one of the required functions."),!1):!0}return console.warn("Phaser.StateManager - No state found with the key: "+t),!1},link:function(t){this.states[t].game=this.game,this.states[t].add=this.game.add,this.states[t].camera=this.game.camera,this.states[t].cache=this.game.cache,this.states[t].input=this.game.input,this.states[t].load=this.game.load,this.states[t].math=this.game.math,this.states[t].sound=this.game.sound,this.states[t].stage=this.game.stage,this.states[t].time=this.game.time,this.states[t].tweens=this.game.tweens,this.states[t].world=this.game.world,this.states[t].particles=this.game.particles,this.states[t].physics=this.game.physics,this.states[t].rnd=this.game.rnd},setCurrentState:function(t){this.callbackContext=this.states[t],this.link(t),this.onInitCallback=this.states[t].init||this.dummy,this.onPreloadCallback=this.states[t].preload||null,this.onLoadRenderCallback=this.states[t].loadRender||null,this.onLoadUpdateCallback=this.states[t].loadUpdate||null,this.onCreateCallback=this.states[t].create||null,this.onUpdateCallback=this.states[t].update||null,this.onPreRenderCallback=this.states[t].preRender||null,this.onRenderCallback=this.states[t].render||null,this.onPausedCallback=this.states[t].paused||null,this.onShutDownCallback=this.states[t].shutdown||this.dummy,this.current=t,this._created=!1,this.onInitCallback.call(this.callbackContext,this.game)},loadComplete:function(){this._created===!1&&this.onCreateCallback?(this._created=!0,this.onCreateCallback.call(this.callbackContext,this.game)):this._created=!0},pause:function(){this._created&&this.onPausedCallback&&this.onPausedCallback.call(this.callbackContext,this.game,!0)},resume:function(){this._created&&this.onre&&this.onPausedCallback.call(this.callbackContext,this.game,!1)},update:function(){this._created&&this.onUpdateCallback?this.onUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},preRender:function(){this.onPreRenderCallback&&this.onPreRenderCallback.call(this.callbackContext,this.game)},render:function(){this._created&&this.onRenderCallback?(this.game.renderType===n.CANVAS&&(this.game.context.save(),this.game.context.setTransform(1,0,0,1,0,0)),this.onRenderCallback.call(this.callbackContext,this.game),this.game.renderType===n.CANVAS&&this.game.context.restore()):this.onLoadRenderCallback&&this.onLoadRenderCallback.call(this.callbackContext,this.game)},destroy:function(){this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onDestroyCallback=null,this.game=null,this.states={},this._pendingState=null}},n.LinkedList=function(){this.next=null,this.prev=null,this.first=null,this.last=null,this.total=0},n.LinkedList.prototype={add:function(t){return 0===this.total&&null==this.first&&null==this.last?(this.first=t,this.last=t,this.next=t,t.prev=this,this.total++,t):(this.last.next=t,t.prev=this.last,this.last=t,this.total++,t)},remove:function(t){t==this.first?this.first=this.first.next:t==this.last&&(this.last=this.last.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.next=t.prev=null,null==this.first&&(this.last=null),this.total--},callAll:function(t){if(this.first&&this.last){var e=this.first;do e&&e[t]&&e[t].call(e),e=e.next;while(e!=this.last.next)}}},n.Signal=function(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){n.Signal.prototype.dispatch.apply(t,arguments)}},n.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,validateListener:function(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))},_registerListener:function(t,e,i,r){var s,o=this._indexOfListener(t,i);if(-1!==o){if(s=this._bindings[o],s.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else s=new n.SignalBinding(this,t,e,i,r),this._addBinding(s);return this.memorize&&this._prevParams&&s.execute(this._prevParams),s},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,n=this._bindings.length;n--;)if(i=this._bindings[n],i._listener===t&&i.context===e)return n;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,i){return this.validateListener(t,"add"),this._registerListener(t,!1,e,i)},addOnce:function(t,e,i){return this.validateListener(t,"addOnce"),this._registerListener(t,!0,e,i)},remove:function(t,e){this.validateListener(t,"remove");var i=this._indexOfListener(t,e);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t,e=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=e),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},n.SignalBinding=function(t,e,i,n,r){this._listener=e,this._isOnce=i,this.context=n,this._signal=t,this._priority=r||0},n.SignalBinding.prototype={active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.Filter=function(t,e,i){this.game=t,this.type=n.WEBGL_FILTER,this.passes=[this],this.dirty=!0,this.padding=0,this.uniforms={time:{type:"1f",value:0},resolution:{type:"2f",value:{x:256,y:256}},mouse:{type:"2f",value:{x:0,y:0}}},this.fragmentSrc=i||[]},n.Filter.prototype={init:function(){},setResolution:function(t,e){this.uniforms.resolution.value.x=t,this.uniforms.resolution.value.y=e},update:function(t){"undefined"!=typeof t&&(t.x>0&&(this.uniforms.mouse.x=t.x.toFixed(2)),t.y>0&&(this.uniforms.mouse.y=t.y.toFixed(2))),this.uniforms.time.value=this.game.time.totalElapsedSeconds()},destroy:function(){this.game=null}},Object.defineProperty(n.Filter.prototype,"width",{get:function(){return this.uniforms.resolution.value.x},set:function(t){this.uniforms.resolution.value.x=t}}),Object.defineProperty(n.Filter.prototype,"height",{get:function(){return this.uniforms.resolution.value.y},set:function(t){this.uniforms.resolution.value.y=t}}),n.Plugin=function(t,e){"undefined"==typeof e&&(e=null),this.game=t,this.parent=e,this.active=!1,this.visible=!1,this.hasPreUpdate=!1,this.hasUpdate=!1,this.hasPostUpdate=!1,this.hasRender=!1,this.hasPostRender=!1},n.Plugin.prototype={preUpdate:function(){},update:function(){},render:function(){},postRender:function(){},destroy:function(){this.game=null,this.parent=null,this.active=!1,this.visible=!1}},n.PluginManager=function(t,e){this.game=t,this._parent=e,this.plugins=[],this._pluginsLength=0},n.PluginManager.prototype={add:function(t){var e=!1;return"function"==typeof t?t=new t(this.game,this._parent):(t.game=this.game,t.parent=this._parent),"function"==typeof t.preUpdate&&(t.hasPreUpdate=!0,e=!0),"function"==typeof t.update&&(t.hasUpdate=!0,e=!0),"function"==typeof t.postUpdate&&(t.hasPostUpdate=!0,e=!0),"function"==typeof t.render&&(t.hasRender=!0,e=!0),"function"==typeof t.postRender&&(t.hasPostRender=!0,e=!0),e?((t.hasPreUpdate||t.hasUpdate||t.hasPostUpdate)&&(t.active=!0),(t.hasRender||t.hasPostRender)&&(t.visible=!0),this._pluginsLength=this.plugins.push(t),"function"==typeof t.init&&t.init(),t):null
},remove:function(t){if(0!==this._pluginsLength)for(this._p=0;this._p<this._pluginsLength;this._p++)if(this.plugins[this._p]===t)return t.destroy(),this.plugins.splice(this._p,1),this._pluginsLength--,void 0},removeAll:function(){for(this._p=0;this._p<this._pluginsLength;this._p++)this.plugins[this._p].destroy();this.plugins.length=0,this._pluginsLength=0},preUpdate:function(){if(0!==this._pluginsLength)for(this._p=0;this._p<this._pluginsLength;this._p++)this.plugins[this._p].active&&this.plugins[this._p].hasPreUpdate&&this.plugins[this._p].preUpdate()},update:function(){if(0!==this._pluginsLength)for(this._p=0;this._p<this._pluginsLength;this._p++)this.plugins[this._p].active&&this.plugins[this._p].hasUpdate&&this.plugins[this._p].update()},postUpdate:function(){if(0!==this._pluginsLength)for(this._p=0;this._p<this._pluginsLength;this._p++)this.plugins[this._p].active&&this.plugins[this._p].hasPostUpdate&&this.plugins[this._p].postUpdate()},render:function(){if(0!==this._pluginsLength)for(this._p=0;this._p<this._pluginsLength;this._p++)this.plugins[this._p].visible&&this.plugins[this._p].hasRender&&this.plugins[this._p].render()},postRender:function(){if(0!==this._pluginsLength)for(this._p=0;this._p<this._pluginsLength;this._p++)this.plugins[this._p].visible&&this.plugins[this._p].hasPostRender&&this.plugins[this._p].postRender()},destroy:function(){this.plugins.length=0,this._pluginsLength=0,this.game=null,this._parent=null}},n.Stage=function(t,e,r){this.game=t,this._backgroundColor="rgb(0,0,0)",this.offset=new n.Point,this.canvas=n.Canvas.create(e,r),this.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%",this._stage=new i.Stage(0,!1),this._stage.name="_stage_root",this._stage.interactive=!1,this.scaleMode=n.StageScaleMode.NO_SCALE,this.scale=new n.StageScaleMode(this.game,e,r),this.aspectRatio=e/r,this._nextOffsetCheck=0,this.checkOffsetInterval=2500},n.Stage.prototype={boot:function(){n.Canvas.getOffset(this.canvas,this.offset),this.bounds=new n.Rectangle(this.offset.x,this.offset.y,this.game.width,this.game.height);var t=this;this._onChange=function(e){return t.visibilityChange(e)},n.Canvas.setUserSelect(this.canvas,"none"),n.Canvas.setTouchAction(this.canvas,"none"),this.backgroundColor="#000",document.addEventListener("visibilitychange",this._onChange,!1),document.addEventListener("webkitvisibilitychange",this._onChange,!1),document.addEventListener("pagehide",this._onChange,!1),document.addEventListener("pageshow",this._onChange,!1),window.onblur=this._onChange,window.onfocus=this._onChange},update:function(){this.checkOffsetInterval!==!1&&this.game.time.now>this._nextOffsetCheck&&(n.Canvas.getOffset(this.canvas,this.offset),this._nextOffsetCheck=this.game.time.now+this.checkOffsetInterval)},visibilityChange:function(t){this.disableVisibilityChange||(this.game.paused="pagehide"==t.type||"blur"==t.type||document.hidden===!0||document.webkitHidden===!0?!0:!1)}},Object.defineProperty(n.Stage.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this.game.transparent===!1&&(this.game.renderType==n.CANVAS?this.game.canvas.style.backgroundColor=t:("string"==typeof t&&(t=n.Color.hexToRGB(t)),this._stage.setBackgroundColor(t)))}}),n.Group=function(t,e,r,s){("undefined"==typeof e||null===typeof e)&&(e=t.world),"undefined"==typeof s&&(s=!1),this.game=t,this.name=r||"group",s?this._container=this.game.stage._stage:(this._container=new i.DisplayObjectContainer,this._container.name=this.name,e?e instanceof n.Group?(e._container.addChild(this._container),e._container.updateTransform()):(e.addChild(this._container),e.updateTransform()):(this.game.stage._stage.addChild(this._container),this.game.stage._stage.updateTransform())),this.type=n.GROUP,this.exists=!0,this.scale=new n.Point(1,1),this.cursor=null},n.Group.RETURN_NONE=0,n.Group.RETURN_TOTAL=1,n.Group.RETURN_CHILD=2,n.Group.SORT_ASCENDING=-1,n.Group.SORT_DESCENDING=1,n.Group.prototype={add:function(t){return t.group!==this&&(t.group=this,t.events&&t.events.onAddedToGroup.dispatch(t,this),this._container.addChild(t),t.updateTransform(),null===this.cursor&&(this.cursor=t)),t},addAt:function(t,e){return t.group!==this&&(t.group=this,t.events&&t.events.onAddedToGroup.dispatch(t,this),this._container.addChildAt(t,e),t.updateTransform(),null===this.cursor&&(this.cursor=t)),t},getAt:function(t){return this._container.getChildAt(t)},create:function(t,e,i,r,s){"undefined"==typeof s&&(s=!0);var o=new n.Sprite(this.game,t,e,i,r);return o.group=this,o.exists=s,o.visible=s,o.alive=s,o.events&&o.events.onAddedToGroup.dispatch(o,this),this._container.addChild(o),o.updateTransform(),null===this.cursor&&(this.cursor=o),o},createMultiple:function(t,e,i,r){"undefined"==typeof r&&(r=!1);for(var s=0;t>s;s++){var o=new n.Sprite(this.game,0,0,e,i);o.group=this,o.exists=r,o.visible=r,o.alive=r,o.events&&o.events.onAddedToGroup.dispatch(o,this),this._container.addChild(o),o.updateTransform(),null===this.cursor&&(this.cursor=o)}},next:function(){this.cursor&&(this.cursor=this.cursor==this._container.last?this._container._iNext:this.cursor._iNext)},previous:function(){this.cursor&&(this.cursor=this.cursor==this._container._iNext?this._container.last:this.cursor._iPrev)},childTest:function(t,e){var i=t+" next: ";i+=e._iNext?e._iNext.name:"-null-",i=i+" "+t+" prev: ",i+=e._iPrev?e._iPrev.name:"-null-",console.log(i)},swapIndex:function(t,e){var i=this.getAt(t),n=this.getAt(e);console.log("swapIndex ",t," with ",e),this.swap(i,n)},swap:function(t,e){if(t===e||!t.parent||!e.parent||t.group!==this||e.group!==this)return!1;var i=t._iPrev,n=t._iNext,r=e._iPrev,s=e._iNext,o=this._container.last._iNext,a=this.game.stage._stage;do a!==t&&a!==e&&(a.first===t?a.first=e:a.first===e&&(a.first=t),a.last===t?a.last=e:a.last===e&&(a.last=t)),a=a._iNext;while(a!=o);return t._iNext==e?(t._iNext=s,t._iPrev=e,e._iNext=t,e._iPrev=i,i&&(i._iNext=e),s&&(s._iPrev=t),t.__renderGroup&&t.__renderGroup.updateTexture(t),e.__renderGroup&&e.__renderGroup.updateTexture(e),!0):e._iNext==t?(t._iNext=e,t._iPrev=r,e._iNext=n,e._iPrev=t,r&&(r._iNext=t),n&&(n._iPrev=e),t.__renderGroup&&t.__renderGroup.updateTexture(t),e.__renderGroup&&e.__renderGroup.updateTexture(e),!0):(t._iNext=s,t._iPrev=r,e._iNext=n,e._iPrev=i,i&&(i._iNext=e),n&&(n._iPrev=e),r&&(r._iNext=t),s&&(s._iPrev=t),t.__renderGroup&&t.__renderGroup.updateTexture(t),e.__renderGroup&&e.__renderGroup.updateTexture(e),!0)},bringToTop:function(t){return t.group===this&&(this.remove(t),this.add(t)),t},getIndex:function(t){return this._container.children.indexOf(t)},replace:function(t,e){if(this._container.first._iNext){var i=this.getIndex(t);-1!=i&&(void 0!==e.parent&&(e.events.onRemovedFromGroup.dispatch(e,this),e.parent.removeChild(e)),this._container.removeChild(t),this._container.addChildAt(e,i),e.events.onAddedToGroup.dispatch(e,this),e.updateTransform(),this.cursor==t&&(this.cursor=this._container._iNext))}},setProperty:function(t,e,i,n){n=n||0;var r=e.length;1==r?0===n?t[e[0]]=i:1==n?t[e[0]]+=i:2==n?t[e[0]]-=i:3==n?t[e[0]]*=i:4==n&&(t[e[0]]/=i):2==r?0===n?t[e[0]][e[1]]=i:1==n?t[e[0]][e[1]]+=i:2==n?t[e[0]][e[1]]-=i:3==n?t[e[0]][e[1]]*=i:4==n&&(t[e[0]][e[1]]/=i):3==r?0===n?t[e[0]][e[1]][e[2]]=i:1==n?t[e[0]][e[1]][e[2]]+=i:2==n?t[e[0]][e[1]][e[2]]-=i:3==n?t[e[0]][e[1]][e[2]]*=i:4==n&&(t[e[0]][e[1]][e[2]]/=i):4==r&&(0===n?t[e[0]][e[1]][e[2]][e[3]]=i:1==n?t[e[0]][e[1]][e[2]][e[3]]+=i:2==n?t[e[0]][e[1]][e[2]][e[3]]-=i:3==n?t[e[0]][e[1]][e[2]][e[3]]*=i:4==n&&(t[e[0]][e[1]][e[2]][e[3]]/=i))},setAll:function(t,e,i,n,r){if(t=t.split("."),"undefined"==typeof i&&(i=!1),"undefined"==typeof n&&(n=!1),r=r||0,this._container.children.length>0&&this._container.first._iNext){var s=this._container.first._iNext;do(i===!1||i&&s.alive)&&(n===!1||n&&s.visible)&&this.setProperty(s,t,e,r),s=s._iNext;while(s!=this._container.last._iNext)}},addAll:function(t,e,i,n){this.setAll(t,e,i,n,1)},subAll:function(t,e,i,n){this.setAll(t,e,i,n,2)},multiplyAll:function(t,e,i,n){this.setAll(t,e,i,n,3)},divideAll:function(t,e,i,n){this.setAll(t,e,i,n,4)},callAllExists:function(t,e){var i=Array.prototype.splice.call(arguments,2);if(this._container.children.length>0&&this._container.first._iNext){var n=this._container.first._iNext;do n.exists==e&&n[t]&&n[t].apply(n,i),n=n._iNext;while(n!=this._container.last._iNext)}},callbackFromArray:function(t,e,i){if(1==i){if(t[e[0]])return t[e[0]]}else if(2==i){if(t[e[0]][e[1]])return t[e[0]][e[1]]}else if(3==i){if(t[e[0]][e[1]][e[2]])return t[e[0]][e[1]][e[2]]}else if(4==i){if(t[e[0]][e[1]][e[2]][e[3]])return t[e[0]][e[1]][e[2]][e[3]]}else if(t[e])return t[e];return!1},callAll:function(t,e){if("undefined"!=typeof t){t=t.split(".");var i=t.length;if("undefined"==typeof e)e=null;else if("string"==typeof e){e=e.split(".");var n=e.length}var r=Array.prototype.splice.call(arguments,2),s=null,o=null;if(this._container.children.length>0&&this._container.first._iNext){var a=this._container.first._iNext;do s=this.callbackFromArray(a,t,i),e&&s?(o=this.callbackFromArray(a,e,n),s&&s.apply(o,r)):s&&s.apply(a,r),a=a._iNext;while(a!=this._container.last._iNext)}}},forEach:function(t,e,i){"undefined"==typeof i&&(i=!1);var n=Array.prototype.splice.call(arguments,3);if(n.unshift(null),this._container.children.length>0&&this._container.first._iNext){var r=this._container.first._iNext;do(i===!1||i&&r.exists)&&(n[0]=r,t.apply(e,n)),r=r._iNext;while(r!=this._container.last._iNext)}},forEachExists:function(t,e){var i=Array.prototype.splice.call(arguments,2);i.unshift(null),this.iterate("exists",!0,n.Group.RETURN_TOTAL,t,e,i)},forEachAlive:function(t,e){var i=Array.prototype.splice.call(arguments,2);i.unshift(null),this.iterate("alive",!0,n.Group.RETURN_TOTAL,t,e,i)},forEachDead:function(t,e){var i=Array.prototype.splice.call(arguments,2);i.unshift(null),this.iterate("alive",!1,n.Group.RETURN_TOTAL,t,e,i)},sort:function(t,e){"undefined"==typeof t&&(t="y"),"undefined"==typeof e&&(e=n.Group.SORT_ASCENDING);var i,r;do{i=!1;for(var s=0,o=this._container.children.length-1;o>s;s++)e==n.Group.SORT_ASCENDING?this._container.children[s][t]>this._container.children[s+1][t]&&(this.swap(this.getAt(s),this.getAt(s+1)),r=this._container.children[s],this._container.children[s]=this._container.children[s+1],this._container.children[s+1]=r,i=!0):this._container.children[s][t]<this._container.children[s+1][t]&&(this.swap(this.getAt(s),this.getAt(s+1)),r=this._container.children[s],this._container.children[s]=this._container.children[s+1],this._container.children[s+1]=r,i=!0)}while(i)},iterate:function(t,e,i,r,s,o){if(i==n.Group.RETURN_TOTAL&&0===this._container.children.length)return-1;"undefined"==typeof r&&(r=!1);var a=0;if(this._container.children.length>0&&this._container.first._iNext){var h=this._container.first._iNext;do{if(h[t]===e&&(a++,r&&(o[0]=h,r.apply(s,o)),i==n.Group.RETURN_CHILD))return h;h=h._iNext}while(h!=this._container.last._iNext)}return i==n.Group.RETURN_TOTAL?a:i==n.Group.RETURN_CHILD?null:void 0},getFirstExists:function(t){return"boolean"!=typeof t&&(t=!0),this.iterate("exists",t,n.Group.RETURN_CHILD)},getFirstAlive:function(){return this.iterate("alive",!0,n.Group.RETURN_CHILD)},getFirstDead:function(){return this.iterate("alive",!1,n.Group.RETURN_CHILD)},countLiving:function(){return this.iterate("alive",!0,n.Group.RETURN_TOTAL)},countDead:function(){return this.iterate("alive",!1,n.Group.RETURN_TOTAL)},getRandom:function(t,e){return 0===this._container.children.length?null:(t=t||0,e=e||this._container.children.length,this.game.math.getRandom(this._container.children,t,e))},remove:function(t){return t.group!==this?!1:(t.events&&t.events.onRemovedFromGroup.dispatch(t,this),t.parent===this._container&&this._container.removeChild(t),this.cursor==t&&(this.cursor=this._container._iNext?this._container._iNext:null),t.group=null,!0)},removeAll:function(){if(0!==this._container.children.length){do this._container.children[0].events&&this._container.children[0].events.onRemovedFromGroup.dispatch(this._container.children[0],this),this._container.removeChild(this._container.children[0]);while(this._container.children.length>0);this.cursor=null}},removeBetween:function(t,e){if(0!==this._container.children.length){if(t>e||0>t||e>this._container.children.length)return!1;for(var i=t;e>i;i++){var n=this._container.children[i];n.events.onRemovedFromGroup.dispatch(n,this),this._container.removeChild(n),this.cursor==n&&(this.cursor=this._container._iNext?this._container._iNext:null)}}},destroy:function(){this.removeAll(),this._container.parent.removeChild(this._container),this._container=null,this.game=null,this.exists=!1,this.cursor=null},validate:function(){var t=this.game.stage._stage.last._iNext,e=this.game.stage._stage,i=null,n=null,r=0;do{if(r>0){if(e!==i)return console.log("check next fail"),!1;if(e._iPrev!==n)return console.log("check previous fail"),!1}i=e._iNext,n=e,e=e._iNext,r++}while(e!=t);return!0},dump:function(t){"undefined"==typeof t&&(t=!1);var e=20,i="\n"+n.Utils.pad("Node",e)+"|"+n.Utils.pad("Next",e)+"|"+n.Utils.pad("Previous",e)+"|"+n.Utils.pad("First",e)+"|"+n.Utils.pad("Last",e);console.log(i);var i=n.Utils.pad("----------",e)+"|"+n.Utils.pad("----------",e)+"|"+n.Utils.pad("----------",e)+"|"+n.Utils.pad("----------",e)+"|"+n.Utils.pad("----------",e);if(console.log(i),t)var r=this.game.stage._stage.last._iNext,s=this.game.stage._stage;else var r=this._container.last._iNext,s=this._container;do{var o=s.name||"*";if(this.cursor==s)var o="> "+o;var a="-",h="-",l="-",u="-";s._iNext&&(a=s._iNext.name),s._iPrev&&(h=s._iPrev.name),s.first&&(l=s.first.name),s.last&&(u=s.last.name),"undefined"==typeof a&&(a="-"),"undefined"==typeof h&&(h="-"),"undefined"==typeof l&&(l="-"),"undefined"==typeof u&&(u="-");var i=n.Utils.pad(o,e)+"|"+n.Utils.pad(a,e)+"|"+n.Utils.pad(h,e)+"|"+n.Utils.pad(l,e)+"|"+n.Utils.pad(u,e);console.log(i),s=s._iNext}while(s!=r)}},Object.defineProperty(n.Group.prototype,"total",{get:function(){return this.iterate("exists",!0,n.Group.RETURN_TOTAL)}}),Object.defineProperty(n.Group.prototype,"length",{get:function(){return this.iterate("exists",!0,n.Group.RETURN_TOTAL)}}),Object.defineProperty(n.Group.prototype,"x",{get:function(){return this._container.position.x},set:function(t){this._container.position.x=t}}),Object.defineProperty(n.Group.prototype,"y",{get:function(){return this._container.position.y},set:function(t){this._container.position.y=t}}),Object.defineProperty(n.Group.prototype,"angle",{get:function(){return n.Math.radToDeg(this._container.rotation)},set:function(t){this._container.rotation=n.Math.degToRad(t)}}),Object.defineProperty(n.Group.prototype,"rotation",{get:function(){return this._container.rotation},set:function(t){this._container.rotation=t}}),Object.defineProperty(n.Group.prototype,"visible",{get:function(){return this._container.visible},set:function(t){this._container.visible=t}}),Object.defineProperty(n.Group.prototype,"alpha",{get:function(){return this._container.alpha},set:function(t){this._container.alpha=t}}),n.World=function(t){n.Group.call(this,t,null,"__world",!1),this.scale=new n.Point(1,1),this.bounds=new n.Rectangle(0,0,t.width,t.height),this.camera=null,this.currentRenderOrderID=0},n.World.prototype=Object.create(n.Group.prototype),n.World.prototype.constructor=n.World,n.World.prototype.boot=function(){this.camera=new n.Camera(this.game,0,0,0,this.game.width,this.game.height),this.camera.displayObject=this._container,this.game.camera=this.camera},n.World.prototype.update=function(){if(this.currentRenderOrderID=0,this.game.stage._stage.first._iNext){var t,e=this.game.stage._stage.first._iNext;do t=!1,e.preUpdate&&(t=e.preUpdate()===!1),e.update&&(t=e.update()===!1||t),e=t?e.last._iNext:e._iNext;while(e!=this.game.stage._stage.last._iNext)}},n.World.prototype.postUpdate=function(){if(this.game.stage._stage.first._iNext){var t=this.game.stage._stage.first._iNext;do t.postUpdate&&t.postUpdate(),t=t._iNext;while(t!=this.game.stage._stage.last._iNext)}this.camera.update()},n.World.prototype.setBounds=function(t,e,i,n){this.bounds.setTo(t,e,i,n),this.camera.bounds&&this.camera.bounds.setTo(t,e,i,n)},n.World.prototype.destroy=function(){this.camera.x=0,this.camera.y=0,this.game.input.reset(!0),this.removeAll()},Object.defineProperty(n.World.prototype,"width",{get:function(){return this.bounds.width},set:function(t){this.bounds.width=t}}),Object.defineProperty(n.World.prototype,"height",{get:function(){return this.bounds.height},set:function(t){this.bounds.height=t}}),Object.defineProperty(n.World.prototype,"centerX",{get:function(){return this.bounds.halfWidth}}),Object.defineProperty(n.World.prototype,"centerY",{get:function(){return this.bounds.halfHeight}}),Object.defineProperty(n.World.prototype,"randomX",{get:function(){return this.bounds.x<0?this.game.rnd.integerInRange(this.bounds.x,this.bounds.width-Math.abs(this.bounds.x)):this.game.rnd.integerInRange(this.bounds.x,this.bounds.width)}}),Object.defineProperty(n.World.prototype,"randomY",{get:function(){return this.bounds.y<0?this.game.rnd.integerInRange(this.bounds.y,this.bounds.height-Math.abs(this.bounds.y)):this.game.rnd.integerInRange(this.bounds.y,this.bounds.height)}}),Object.defineProperty(n.World.prototype,"visible",{get:function(){return this._container.visible},set:function(t){this._container.visible=t}}),n.Game=function(t,e,i,r,s,o,a){t=t||800,e=e||600,i=i||n.AUTO,r=r||"",s=s||null,"undefined"==typeof o&&(o=!1),"undefined"==typeof a&&(a=!0),this.id=n.GAMES.push(this)-1,this.parent=r,this.width=t,this.height=e,this.transparent=o,this.antialias=a,this.renderer=null,this.state=new n.StateManager(this,s),this._paused=!1,this.renderType=i,this._loadComplete=!1,this.isBooted=!1,this.isRunning=!1,this.raf=null,this.add=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.net=null,this.sound=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.physics=null,this.rnd=null,this.device=null,this.camera=null,this.canvas=null,this.context=null,this.debug=null,this.particles=null;var h=this;return this._onBoot=function(){return h.boot()},"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(this._onBoot,0):(document.addEventListener("DOMContentLoaded",this._onBoot,!1),window.addEventListener("load",this._onBoot,!1)),this},n.Game.prototype={boot:function(){this.isBooted||(document.body?(document.removeEventListener("DOMContentLoaded",this._onBoot),window.removeEventListener("load",this._onBoot),this.onPause=new n.Signal,this.onResume=new n.Signal,this.isBooted=!0,this.device=new n.Device,this.math=n.Math,this.rnd=new n.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this.stage=new n.Stage(this,this.width,this.height),this.setUpRenderer(),this.world=new n.World(this),this.add=new n.GameObjectFactory(this),this.cache=new n.Cache(this),this.load=new n.Loader(this),this.time=new n.Time(this),this.tweens=new n.TweenManager(this),this.input=new n.Input(this),this.sound=new n.SoundManager(this),this.physics=new n.Physics.Arcade(this),this.particles=new n.Particles(this),this.plugins=new n.PluginManager(this,this),this.net=new n.Net(this),this.debug=new n.Utils.Debug(this),this.stage.boot(),this.world.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.load.onLoadComplete.add(this.loadComplete,this),this.showDebugHeader(),this.isRunning=!0,this._loadComplete=!1,this.raf=new n.RequestAnimationFrame(this),this.raf.start()):window.setTimeout(this._onBoot,20))},showDebugHeader:function(){var t=n.DEV_VERSION,e="Canvas",i="HTML Audio";if(this.renderType==n.WEBGL?e="WebGL":this.renderType==n.HEADLESS&&(e="Headless"),this.device.webAudio&&(i="WebAudio"),this.device.chrome){var r=["%c %c %c  Phaser v"+t+" - Renderer: "+e+" - Audio: "+i+"  %c %c ","background: #00bff3","background: #0072bc","color: #ffffff; background: #003471","background: #0072bc","background: #00bff3"];console.log.apply(console,r)}else console.log("Phaser v"+t+" - Renderer: "+e+" - Audio: "+i)},setUpRenderer:function(){if(this.renderType===n.HEADLESS||this.renderType===n.CANVAS||this.renderType===n.AUTO&&this.device.webGL===!1){if(!this.device.canvas)throw new Error("Phaser.Game - cannot create Canvas or WebGL context, aborting.");this.renderType===n.AUTO&&(this.renderType=n.CANVAS),this.renderer=new i.CanvasRenderer(this.width,this.height,this.stage.canvas,this.transparent),n.Canvas.setSmoothingEnabled(this.renderer.context,this.antialias),this.canvas=this.renderer.view,this.context=this.renderer.context}else this.renderType=n.WEBGL,this.renderer=new i.WebGLRenderer(this.width,this.height,this.stage.canvas,this.transparent,this.antialias),this.canvas=this.renderer.view,this.context=null;n.Canvas.addToDOM(this.renderer.view,this.parent,!0),n.Canvas.setTouchAction(this.renderer.view)},loadComplete:function(){this._loadComplete=!0,this.state.loadComplete()},update:function(t){this.time.update(t),this._paused?(this.renderer.render(this.stage._stage),this.plugins.render(),this.state.render()):(this.plugins.preUpdate(),this.physics.preUpdate(),this.stage.update(),this.input.update(),this.tweens.update(),this.sound.update(),this.world.update(),this.particles.update(),this.state.update(),this.plugins.update(),this.world.postUpdate(),this.plugins.postUpdate(),this.renderType!==n.HEADLESS&&(this.renderer.render(this.stage._stage),this.plugins.render(),this.state.render(),this.plugins.postRender()))},destroy:function(){this.raf.stop(),this.input.destroy(),this.state.destroy(),this.state=null,this.cache=null,this.input=null,this.load=null,this.sound=null,this.stage=null,this.time=null,this.world=null,this.isBooted=!1}},Object.defineProperty(n.Game.prototype,"paused",{get:function(){return this._paused},set:function(t){t===!0?this._paused===!1&&(this._paused=!0,this.onPause.dispatch(this)):this._paused&&(this._paused=!1,this.onResume.dispatch(this))}}),n.Input=function(t){this.game=t,this.hitCanvas=null,this.hitContext=null},n.Input.MOUSE_OVERRIDES_TOUCH=0,n.Input.TOUCH_OVERRIDES_MOUSE=1,n.Input.MOUSE_TOUCH_COMBINE=2,n.Input.prototype={pollRate:0,_pollCounter:0,_oldPosition:null,_x:0,_y:0,disabled:!1,multiInputOverride:n.Input.MOUSE_TOUCH_COMBINE,position:null,speed:null,circle:null,scale:null,maxPointers:10,currentPointers:0,tapRate:200,doubleTapRate:300,holdRate:2e3,justPressedRate:200,justReleasedRate:200,recordPointerHistory:!1,recordRate:100,recordLimit:100,pointer1:null,pointer2:null,pointer3:null,pointer4:null,pointer5:null,pointer6:null,pointer7:null,pointer8:null,pointer9:null,pointer10:null,activePointer:null,mousePointer:null,mouse:null,keyboard:null,touch:null,mspointer:null,onDown:null,onUp:null,onTap:null,onHold:null,interactiveItems:new n.LinkedList,boot:function(){this.mousePointer=new n.Pointer(this.game,0),this.pointer1=new n.Pointer(this.game,1),this.pointer2=new n.Pointer(this.game,2),this.mouse=new n.Mouse(this.game),this.keyboard=new n.Keyboard(this.game),this.touch=new n.Touch(this.game),this.mspointer=new n.MSPointer(this.game),this.onDown=new n.Signal,this.onUp=new n.Signal,this.onTap=new n.Signal,this.onHold=new n.Signal,this.scale=new n.Point(1,1),this.speed=new n.Point,this.position=new n.Point,this._oldPosition=new n.Point,this.circle=new n.Circle(0,0,44),this.activePointer=this.mousePointer,this.currentPointers=0,this.hitCanvas=document.createElement("canvas"),this.hitCanvas.width=1,this.hitCanvas.height=1,this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.keyboard.start(),this.touch.start(),this.mspointer.start(),this.mousePointer.active=!0},destroy:function(){this.mouse.stop(),this.keyboard.stop(),this.touch.stop(),this.mspointer.stop()},addPointer:function(){for(var t=0,e=10;e>0;e--)null===this["pointer"+e]&&(t=e);return 0===t?(console.warn("You can only have 10 Pointer objects"),null):(this["pointer"+t]=new n.Pointer(this.game,t),this["pointer"+t])},update:function(){return this.pollRate>0&&this._pollCounter<this.pollRate?(this._pollCounter++,void 0):(this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),this.pointer1.update(),this.pointer2.update(),this.pointer3&&this.pointer3.update(),this.pointer4&&this.pointer4.update(),this.pointer5&&this.pointer5.update(),this.pointer6&&this.pointer6.update(),this.pointer7&&this.pointer7.update(),this.pointer8&&this.pointer8.update(),this.pointer9&&this.pointer9.update(),this.pointer10&&this.pointer10.update(),this._pollCounter=0,void 0)},reset:function(t){if(this.game.isBooted!==!1){"undefined"==typeof t&&(t=!1),this.keyboard.reset(),this.mousePointer.reset();for(var e=1;10>=e;e++)this["pointer"+e]&&this["pointer"+e].reset();this.currentPointers=0,this.game.stage.canvas.style.cursor="default",t===!0&&(this.onDown.dispose(),this.onUp.dispose(),this.onTap.dispose(),this.onHold.dispose(),this.onDown=new n.Signal,this.onUp=new n.Signal,this.onTap=new n.Signal,this.onHold=new n.Signal,this.interactiveItems.callAll("reset")),this._pollCounter=0}},resetSpeed:function(t,e){this._oldPosition.setTo(t,e),this.speed.setTo(0,0)},startPointer:function(t){if(this.maxPointers<10&&this.totalActivePointers==this.maxPointers)return null;if(this.pointer1.active===!1)return this.pointer1.start(t);if(this.pointer2.active===!1)return this.pointer2.start(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active===!1)return this["pointer"+e].start(t);return null},updatePointer:function(t){if(this.pointer1.active&&this.pointer1.identifier==t.identifier)return this.pointer1.move(t);if(this.pointer2.active&&this.pointer2.identifier==t.identifier)return this.pointer2.move(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active&&this["pointer"+e].identifier==t.identifier)return this["pointer"+e].move(t);return null},stopPointer:function(t){if(this.pointer1.active&&this.pointer1.identifier==t.identifier)return this.pointer1.stop(t);if(this.pointer2.active&&this.pointer2.identifier==t.identifier)return this.pointer2.stop(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active&&this["pointer"+e].identifier==t.identifier)return this["pointer"+e].stop(t);return null},getPointer:function(t){if(t=t||!1,this.pointer1.active==t)return this.pointer1;if(this.pointer2.active==t)return this.pointer2;for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active==t)return this["pointer"+e];return null},getPointerFromIdentifier:function(t){if(this.pointer1.identifier==t)return this.pointer1;if(this.pointer2.identifier==t)return this.pointer2;for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].identifier==t)return this["pointer"+e];return null}},Object.defineProperty(n.Input.prototype,"x",{get:function(){return this._x},set:function(t){this._x=Math.floor(t)}}),Object.defineProperty(n.Input.prototype,"y",{get:function(){return this._y},set:function(t){this._y=Math.floor(t)}}),Object.defineProperty(n.Input.prototype,"pollLocked",{get:function(){return this.pollRate>0&&this._pollCounter<this.pollRate}}),Object.defineProperty(n.Input.prototype,"totalInactivePointers",{get:function(){return 10-this.currentPointers}}),Object.defineProperty(n.Input.prototype,"totalActivePointers",{get:function(){this.currentPointers=0;for(var t=1;10>=t;t++)this["pointer"+t]&&this["pointer"+t].active&&this.currentPointers++;return this.currentPointers}}),Object.defineProperty(n.Input.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(n.Input.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),n.Key=function(t,e){this.game=t,this.isDown=!1,this.isUp=!1,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this.keyCode=e,this.onDown=new n.Signal,this.onUp=new n.Signal},n.Key.prototype={processKeyDown:function(t){this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.isDown?(this.duration=t.timeStamp-this.timeDown,this.repeats++):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this.repeats=0,this.onDown.dispatch(this))},processKeyUp:function(t){this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.onUp.dispatch(this)},justPressed:function(t){return"undefined"==typeof t&&(t=250),this.isDown&&this.duration<t},justReleased:function(t){return"undefined"==typeof t&&(t=250),this.isDown===!1&&this.game.time.now-this.timeUp<t}},n.Keyboard=function(t){this.game=t,this._keys={},this._hotkeys={},this._capture={},this.disabled=!1,this._onKeyDown=null,this._onKeyUp=null,this.callbackContext=this,this.onDownCallback=null,this.onUpCallback=null},n.Keyboard.prototype={addCallbacks:function(t,e,i){this.callbackContext=t,this.onDownCallback=e,"undefined"!=typeof i&&(this.onUpCallback=i)},addKey:function(t){return this._hotkeys[t]=new n.Key(this.game,t),this.addKeyCapture(t),this._hotkeys[t]},removeKey:function(t){delete this._hotkeys[t]},createCursorKeys:function(){return{up:this.addKey(n.Keyboard.UP),down:this.addKey(n.Keyboard.DOWN),left:this.addKey(n.Keyboard.LEFT),right:this.addKey(n.Keyboard.RIGHT)}},start:function(){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e)},this._onKeyUp=function(e){return t.processKeyUp(e)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1)},stop:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp)},addKeyCapture:function(t){if("object"==typeof t)for(var e in t)this._capture[t[e]]=!0;else this._capture[t]=!0},removeKeyCapture:function(t){delete this._capture[t]},clearCaptures:function(){this._capture={}},processKeyDown:function(t){this.game.input.disabled||this.disabled||(this._capture[t.keyCode]&&t.preventDefault(),this.onDownCallback&&this.onDownCallback.call(this.callbackContext,t),this._keys[t.keyCode]&&this._keys[t.keyCode].isDown?this._keys[t.keyCode].duration=this.game.time.now-this._keys[t.keyCode].timeDown:this._keys[t.keyCode]?(this._keys[t.keyCode].isDown=!0,this._keys[t.keyCode].timeDown=this.game.time.now,this._keys[t.keyCode].duration=0):this._keys[t.keyCode]={isDown:!0,timeDown:this.game.time.now,timeUp:0,duration:0},this._hotkeys[t.keyCode]&&this._hotkeys[t.keyCode].processKeyDown(t))},processKeyUp:function(t){this.game.input.disabled||this.disabled||(this._capture[t.keyCode]&&t.preventDefault(),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,t),this._hotkeys[t.keyCode]&&this._hotkeys[t.keyCode].processKeyUp(t),this._keys[t.keyCode]?(this._keys[t.keyCode].isDown=!1,this._keys[t.keyCode].timeUp=this.game.time.now):this._keys[t.keyCode]={isDown:!1,timeDown:this.game.time.now,timeUp:this.game.time.now,duration:0})},reset:function(){for(var t in this._keys)this._keys[t].isDown=!1},justPressed:function(t,e){return"undefined"==typeof e&&(e=250),this._keys[t]&&this._keys[t].isDown&&this._keys[t].duration<e?!0:!1},justReleased:function(t,e){return"undefined"==typeof e&&(e=250),this._keys[t]&&this._keys[t].isDown===!1&&this.game.time.now-this._keys[t].timeUp<e?!0:!1},isDown:function(t){return this._keys[t]?this._keys[t].isDown:!1}},n.Keyboard.A="A".charCodeAt(0),n.Keyboard.B="B".charCodeAt(0),n.Keyboard.C="C".charCodeAt(0),n.Keyboard.D="D".charCodeAt(0),n.Keyboard.E="E".charCodeAt(0),n.Keyboard.F="F".charCodeAt(0),n.Keyboard.G="G".charCodeAt(0),n.Keyboard.H="H".charCodeAt(0),n.Keyboard.I="I".charCodeAt(0),n.Keyboard.J="J".charCodeAt(0),n.Keyboard.K="K".charCodeAt(0),n.Keyboard.L="L".charCodeAt(0),n.Keyboard.M="M".charCodeAt(0),n.Keyboard.N="N".charCodeAt(0),n.Keyboard.O="O".charCodeAt(0),n.Keyboard.P="P".charCodeAt(0),n.Keyboard.Q="Q".charCodeAt(0),n.Keyboard.R="R".charCodeAt(0),n.Keyboard.S="S".charCodeAt(0),n.Keyboard.T="T".charCodeAt(0),n.Keyboard.U="U".charCodeAt(0),n.Keyboard.V="V".charCodeAt(0),n.Keyboard.W="W".charCodeAt(0),n.Keyboard.X="X".charCodeAt(0),n.Keyboard.Y="Y".charCodeAt(0),n.Keyboard.Z="Z".charCodeAt(0),n.Keyboard.ZERO="0".charCodeAt(0),n.Keyboard.ONE="1".charCodeAt(0),n.Keyboard.TWO="2".charCodeAt(0),n.Keyboard.THREE="3".charCodeAt(0),n.Keyboard.FOUR="4".charCodeAt(0),n.Keyboard.FIVE="5".charCodeAt(0),n.Keyboard.SIX="6".charCodeAt(0),n.Keyboard.SEVEN="7".charCodeAt(0),n.Keyboard.EIGHT="8".charCodeAt(0),n.Keyboard.NINE="9".charCodeAt(0),n.Keyboard.NUMPAD_0=96,n.Keyboard.NUMPAD_1=97,n.Keyboard.NUMPAD_2=98,n.Keyboard.NUMPAD_3=99,n.Keyboard.NUMPAD_4=100,n.Keyboard.NUMPAD_5=101,n.Keyboard.NUMPAD_6=102,n.Keyboard.NUMPAD_7=103,n.Keyboard.NUMPAD_8=104,n.Keyboard.NUMPAD_9=105,n.Keyboard.NUMPAD_MULTIPLY=106,n.Keyboard.NUMPAD_ADD=107,n.Keyboard.NUMPAD_ENTER=108,n.Keyboard.NUMPAD_SUBTRACT=109,n.Keyboard.NUMPAD_DECIMAL=110,n.Keyboard.NUMPAD_DIVIDE=111,n.Keyboard.F1=112,n.Keyboard.F2=113,n.Keyboard.F3=114,n.Keyboard.F4=115,n.Keyboard.F5=116,n.Keyboard.F6=117,n.Keyboard.F7=118,n.Keyboard.F8=119,n.Keyboard.F9=120,n.Keyboard.F10=121,n.Keyboard.F11=122,n.Keyboard.F12=123,n.Keyboard.F13=124,n.Keyboard.F14=125,n.Keyboard.F15=126,n.Keyboard.COLON=186,n.Keyboard.EQUALS=187,n.Keyboard.UNDERSCORE=189,n.Keyboard.QUESTION_MARK=191,n.Keyboard.TILDE=192,n.Keyboard.OPEN_BRACKET=219,n.Keyboard.BACKWARD_SLASH=220,n.Keyboard.CLOSED_BRACKET=221,n.Keyboard.QUOTES=222,n.Keyboard.BACKSPACE=8,n.Keyboard.TAB=9,n.Keyboard.CLEAR=12,n.Keyboard.ENTER=13,n.Keyboard.SHIFT=16,n.Keyboard.CONTROL=17,n.Keyboard.ALT=18,n.Keyboard.CAPS_LOCK=20,n.Keyboard.ESC=27,n.Keyboard.SPACEBAR=32,n.Keyboard.PAGE_UP=33,n.Keyboard.PAGE_DOWN=34,n.Keyboard.END=35,n.Keyboard.HOME=36,n.Keyboard.LEFT=37,n.Keyboard.UP=38,n.Keyboard.RIGHT=39,n.Keyboard.DOWN=40,n.Keyboard.INSERT=45,n.Keyboard.DELETE=46,n.Keyboard.HELP=47,n.Keyboard.NUM_LOCK=144,n.Mouse=function(t){this.game=t,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseMoveCallback=null,this.mouseUpCallback=null,this.capture=!1,this.button=-1,this.disabled=!1,this.locked=!1,this.pointerLock=new n.Signal,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null
},n.Mouse.NO_BUTTON=-1,n.Mouse.LEFT_BUTTON=0,n.Mouse.MIDDLE_BUTTON=1,n.Mouse.RIGHT_BUTTON=2,n.Mouse.prototype={start:function(){var t=this;this.game.device.android&&this.game.device.chrome===!1||(this._onMouseDown=function(e){return t.onMouseDown(e)},this._onMouseMove=function(e){return t.onMouseMove(e)},this._onMouseUp=function(e){return t.onMouseUp(e)},document.addEventListener("mousedown",this._onMouseDown,!0),document.addEventListener("mousemove",this._onMouseMove,!0),document.addEventListener("mouseup",this._onMouseUp,!0))},onMouseDown:function(t){this.event=t,this.capture&&t.preventDefault(),this.button=t.which,this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.start(t))},onMouseMove:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.move(t))},onMouseUp:function(t){this.event=t,this.capture&&t.preventDefault(),this.button=n.Mouse.NO_BUTTON,this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.stop(t))},requestPointerLock:function(){if(this.game.device.pointerLock){var t=this.game.stage.canvas;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock();var e=this;this._pointerLockChange=function(t){return e.pointerLockChange(t)},document.addEventListener("pointerlockchange",this._pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},pointerLockChange:function(t){var e=this.game.stage.canvas;document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e?(this.locked=!0,this.pointerLock.dispatch(!0,t)):(this.locked=!1,this.pointerLock.dispatch(!1,t))},releasePointerLock:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)},stop:function(){document.removeEventListener("mousedown",this._onMouseDown,!0),document.removeEventListener("mousemove",this._onMouseMove,!0),document.removeEventListener("mouseup",this._onMouseUp,!0)}},n.MSPointer=function(t){this.game=t,this.callbackContext=this.game,this.disabled=!1,this._onMSPointerDown=null,this._onMSPointerMove=null,this._onMSPointerUp=null},n.MSPointer.prototype={start:function(){var t=this;this.game.device.mspointer===!0&&(this._onMSPointerDown=function(e){return t.onPointerDown(e)},this._onMSPointerMove=function(e){return t.onPointerMove(e)},this._onMSPointerUp=function(e){return t.onPointerUp(e)},this.game.renderer.view.addEventListener("MSPointerDown",this._onMSPointerDown,!1),this.game.renderer.view.addEventListener("MSPointerMove",this._onMSPointerMove,!1),this.game.renderer.view.addEventListener("MSPointerUp",this._onMSPointerUp,!1),this.game.renderer.view.addEventListener("pointerDown",this._onMSPointerDown,!1),this.game.renderer.view.addEventListener("pointerMove",this._onMSPointerMove,!1),this.game.renderer.view.addEventListener("pointerUp",this._onMSPointerUp,!1),this.game.renderer.view.style["-ms-content-zooming"]="none",this.game.renderer.view.style["-ms-touch-action"]="none")},onPointerDown:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.startPointer(t))},onPointerMove:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.updatePointer(t))},onPointerUp:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.stopPointer(t))},stop:function(){this.game.stage.canvas.removeEventListener("MSPointerDown",this._onMSPointerDown),this.game.stage.canvas.removeEventListener("MSPointerMove",this._onMSPointerMove),this.game.stage.canvas.removeEventListener("MSPointerUp",this._onMSPointerUp),this.game.stage.canvas.removeEventListener("pointerDown",this._onMSPointerDown),this.game.stage.canvas.removeEventListener("pointerMove",this._onMSPointerMove),this.game.stage.canvas.removeEventListener("pointerUp",this._onMSPointerUp)}},n.Pointer=function(t,e){this.game=t,this.id=e,this._holdSent=!1,this._history=[],this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.x=-1,this.y=-1,this.isMouse=!1,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=Number.MAX_VALUE,this.targetObject=null,this.active=!1,this.position=new n.Point,this.positionDown=new n.Point,this.circle=new n.Circle(0,0,44),0===e&&(this.isMouse=!0)},n.Pointer.prototype={start:function(t){return this.identifier=t.identifier,this.target=t.target,"undefined"!=typeof t.button&&(this.button=t.button),this.game.paused===!0&&this.game.stage.scale.incorrectOrientation===!1?(this.game.paused=!1,this):(this._history.length=0,this.active=!0,this.withinGame=!0,this.isDown=!0,this.isUp=!1,this.msSinceLastClick=this.game.time.now-this.timeDown,this.timeDown=this.game.time.now,this._holdSent=!1,this.move(t),this.positionDown.setTo(this.x,this.y),(this.game.input.multiInputOverride==n.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride==n.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride==n.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.x=this.x,this.game.input.y=this.y,this.game.input.position.setTo(this.x,this.y),this.game.input.onDown.dispatch(this,t),this.game.input.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,this.isMouse===!1&&this.game.input.currentPointers++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this)},update:function(){this.active&&(this._holdSent===!1&&this.duration>=this.game.input.holdRate&&((this.game.input.multiInputOverride==n.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride==n.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride==n.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&this.game.input.onHold.dispatch(this),this._holdSent=!0),this.game.input.recordPointerHistory&&this.game.time.now>=this._nextDrop&&(this._nextDrop=this.game.time.now+this.game.input.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>this.game.input.recordLimit&&this._history.shift()))},move:function(t){if(!this.game.input.pollLocked){if("undefined"!=typeof t.button&&(this.button=t.button),this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY,this.screenX=t.screenX,this.screenY=t.screenY,this.x=(this.pageX-this.game.stage.offset.x)*this.game.input.scale.x,this.y=(this.pageY-this.game.stage.offset.y)*this.game.input.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(this.game.input.multiInputOverride==n.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride==n.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride==n.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.activePointer=this,this.game.input.x=this.x,this.game.input.y=this.y,this.game.input.position.setTo(this.game.input.x,this.game.input.y),this.game.input.circle.x=this.game.input.x,this.game.input.circle.y=this.game.input.y),this.game.paused)return this;if(null!==this.targetObject&&this.targetObject.isDragged===!0)return this.targetObject.update(this)===!1&&(this.targetObject=null),this;if(this._highestRenderOrderID=-1,this._highestRenderObject=null,this._highestInputPriorityID=-1,this.game.input.interactiveItems.total>0){var e=this.game.input.interactiveItems.next;do(e.pixelPerfect||e.priorityID>this._highestInputPriorityID||e.priorityID==this._highestInputPriorityID&&e.sprite.renderOrderID>this._highestRenderOrderID)&&e.checkPointerOver(this)&&(this._highestRenderOrderID=e.sprite.renderOrderID,this._highestInputPriorityID=e.priorityID,this._highestRenderObject=e),e=e.next;while(null!=e)}return null==this._highestRenderObject?this.targetObject&&(this.targetObject._pointerOutHandler(this),this.targetObject=null):null==this.targetObject?(this.targetObject=this._highestRenderObject,this._highestRenderObject._pointerOverHandler(this)):this.targetObject==this._highestRenderObject?this._highestRenderObject.update(this)===!1&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this),this.targetObject=this._highestRenderObject,this.targetObject._pointerOverHandler(this)),this}},leave:function(t){this.withinGame=!1,this.move(t)},stop:function(t){if(this._stateReset)return t.preventDefault(),void 0;if(this.timeUp=this.game.time.now,(this.game.input.multiInputOverride==n.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride==n.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride==n.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.onUp.dispatch(this,t),this.duration>=0&&this.duration<=this.game.input.tapRate&&(this.timeUp-this.previousTapTime<this.game.input.doubleTapRate?this.game.input.onTap.dispatch(this,!0):this.game.input.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.id>0&&(this.active=!1),this.withinGame=!1,this.isDown=!1,this.isUp=!0,this.isMouse===!1&&this.game.input.currentPointers--,this.game.input.interactiveItems.total>0){var e=this.game.input.interactiveItems.next;do e&&e._releasedHandler(this),e=e.next;while(null!=e)}return this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null,this},justPressed:function(t){return t=t||this.game.input.justPressedRate,this.isDown===!0&&this.timeDown+t>this.game.time.now},justReleased:function(t){return t=t||this.game.input.justReleasedRate,this.isUp===!0&&this.timeUp+t>this.game.time.now},reset:function(){this.isMouse===!1&&(this.active=!1),this.identifier=null,this.isDown=!1,this.isUp=!0,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null}},Object.defineProperty(n.Pointer.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.now-this.timeDown}}),Object.defineProperty(n.Pointer.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(n.Pointer.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),n.Touch=function(t){this.game=t,this.disabled=!1,this.callbackContext=this.game,this.touchStartCallback=null,this.touchMoveCallback=null,this.touchEndCallback=null,this.touchEnterCallback=null,this.touchLeaveCallback=null,this.touchCancelCallback=null,this.preventDefault=!0,this.event=null,this._onTouchStart=null,this._onTouchMove=null,this._onTouchEnd=null,this._onTouchEnter=null,this._onTouchLeave=null,this._onTouchCancel=null,this._onTouchMove=null},n.Touch.prototype={start:function(){var t=this;this.game.device.touch&&(this._onTouchStart=function(e){return t.onTouchStart(e)},this._onTouchMove=function(e){return t.onTouchMove(e)},this._onTouchEnd=function(e){return t.onTouchEnd(e)},this._onTouchEnter=function(e){return t.onTouchEnter(e)},this._onTouchLeave=function(e){return t.onTouchLeave(e)},this._onTouchCancel=function(e){return t.onTouchCancel(e)},this.game.renderer.view.addEventListener("touchstart",this._onTouchStart,!1),this.game.renderer.view.addEventListener("touchmove",this._onTouchMove,!1),this.game.renderer.view.addEventListener("touchend",this._onTouchEnd,!1),this.game.renderer.view.addEventListener("touchenter",this._onTouchEnter,!1),this.game.renderer.view.addEventListener("touchleave",this._onTouchLeave,!1),this.game.renderer.view.addEventListener("touchcancel",this._onTouchCancel,!1))},consumeDocumentTouches:function(){this._documentTouchMove=function(t){t.preventDefault()},document.addEventListener("touchmove",this._documentTouchMove,!1)},onTouchStart:function(t){if(this.event=t,this.touchStartCallback&&this.touchStartCallback.call(this.callbackContext,t),!this.game.input.disabled&&!this.disabled){this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.startPointer(t.changedTouches[e])}},onTouchCancel:function(t){if(this.event=t,this.touchCancelCallback&&this.touchCancelCallback.call(this.callbackContext,t),!this.game.input.disabled&&!this.disabled){this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.stopPointer(t.changedTouches[e])}},onTouchEnter:function(t){this.event=t,this.touchEnterCallback&&this.touchEnterCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||this.preventDefault&&t.preventDefault()},onTouchLeave:function(t){this.event=t,this.touchLeaveCallback&&this.touchLeaveCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault()},onTouchMove:function(t){this.event=t,this.touchMoveCallback&&this.touchMoveCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.updatePointer(t.changedTouches[e])},onTouchEnd:function(t){this.event=t,this.touchEndCallback&&this.touchEndCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.stopPointer(t.changedTouches[e])},stop:function(){this.game.device.touch&&(this.game.stage.canvas.removeEventListener("touchstart",this._onTouchStart),this.game.stage.canvas.removeEventListener("touchmove",this._onTouchMove),this.game.stage.canvas.removeEventListener("touchend",this._onTouchEnd),this.game.stage.canvas.removeEventListener("touchenter",this._onTouchEnter),this.game.stage.canvas.removeEventListener("touchleave",this._onTouchLeave),this.game.stage.canvas.removeEventListener("touchcancel",this._onTouchCancel))}},n.InputHandler=function(t){this.sprite=t,this.game=t.game,this.enabled=!1,this.priorityID=0,this.useHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.pixelPerfect=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.consumePointerEvent=!1,this._tempPoint=new n.Point,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})},n.InputHandler.prototype={start:function(t,e){if(console.log("InputHandler start"),t=t||0,"undefined"==typeof e&&(e=!1),this.enabled===!1){this.game.input.interactiveItems.add(this),this.useHandCursor=e,this.priorityID=t;for(var i=0;10>i;i++)this._pointerData[i]={id:i,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new n.Point,this.enabled=!0,this.sprite.events&&null==this.sprite.events.onInputOver&&(this.sprite.events.onInputOver=new n.Signal,this.sprite.events.onInputOut=new n.Signal,this.sprite.events.onInputDown=new n.Signal,this.sprite.events.onInputUp=new n.Signal,this.sprite.events.onDragStart=new n.Signal,this.sprite.events.onDragStop=new n.Signal)}return this.sprite},reset:function(){this.enabled=!1;for(var t=0;10>t;t++)this._pointerData[t]={id:t,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){this.enabled!==!1&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.enabled&&(this.enabled=!1,this.game.input.interactiveItems.remove(this),this.stop(),this.sprite=null)},pointerX:function(t){return t=t||0,this._pointerData[t].x},pointerY:function(t){return t=t||0,this._pointerData[t].y},pointerDown:function(t){return t=t||0,this._pointerData[t].isDown},pointerUp:function(t){return t=t||0,this._pointerData[t].isUp},pointerTimeDown:function(t){return t=t||0,this._pointerData[t].timeDown},pointerTimeUp:function(t){return t=t||0,this._pointerData[t].timeUp},pointerOver:function(t){if(this.enabled){if("undefined"!=typeof t)return this._pointerData[t].isOver;for(var e=0;10>e;e++)if(this._pointerData[e].isOver)return!0}return!1},pointerOut:function(t){if(this.enabled){if("undefined"!=typeof t)return this._pointerData[t].isOut;for(var e=0;10>e;e++)if(this._pointerData[e].isOut)return!0}return!1},pointerTimeOver:function(t){return t=t||0,this._pointerData[t].timeOver},pointerTimeOut:function(t){return t=t||0,this._pointerData[t].timeOut},pointerDragged:function(t){return t=t||0,this._pointerData[t].isDragged},checkPointerOver:function(t){return this.enabled===!1||this.sprite.visible===!1||this.sprite.group&&this.sprite.group.visible===!1?!1:(this.sprite.getLocalUnmodifiedPosition(this._tempPoint,t.x,t.y),this._tempPoint.x>=0&&this._tempPoint.x<=this.sprite.currentFrame.width&&this._tempPoint.y>=0&&this._tempPoint.y<=this.sprite.currentFrame.height?this.pixelPerfect?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0:void 0)},checkPixel:function(t,e){if(this.sprite.texture.baseTexture.source){this.game.input.hitContext.clearRect(0,0,1,1),t+=this.sprite.texture.frame.x,e+=this.sprite.texture.frame.y,this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,t,e,1,1,0,0,1,1);var i=this.game.input.hitContext.getImageData(0,0,1,1);if(i.data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(t){return this.enabled===!1||this.sprite.visible===!1||this.sprite.group&&this.sprite.group.visible===!1?(this._pointerOutHandler(t),!1):this.draggable&&this._draggedPointerID==t.id?this.updateDrag(t):this._pointerData[t.id].isOver===!0?this.checkPointerOver(t)?(this._pointerData[t.id].x=t.x-this.sprite.x,this._pointerData[t.id].y=t.y-this.sprite.y,!0):(this._pointerOutHandler(t),!1):void 0},_pointerOverHandler:function(t){this._pointerData[t.id].isOver===!1&&(this._pointerData[t.id].isOver=!0,this._pointerData[t.id].isOut=!1,this._pointerData[t.id].timeOver=this.game.time.now,this._pointerData[t.id].x=t.x-this.sprite.x,this._pointerData[t.id].y=t.y-this.sprite.y,this.useHandCursor&&this._pointerData[t.id].isDragged===!1&&(this.game.stage.canvas.style.cursor="pointer"),this.sprite.events.onInputOver.dispatch(this.sprite,t))},_pointerOutHandler:function(t){this._pointerData[t.id].isOver=!1,this._pointerData[t.id].isOut=!0,this._pointerData[t.id].timeOut=this.game.time.now,this.useHandCursor&&this._pointerData[t.id].isDragged===!1&&(this.game.stage.canvas.style.cursor="default"),this.sprite&&this.sprite.events&&this.sprite.events.onInputOut.dispatch(this.sprite,t)},_touchedHandler:function(t){return this._pointerData[t.id].isDown===!1&&this._pointerData[t.id].isOver===!0&&(this._pointerData[t.id].isDown=!0,this._pointerData[t.id].isUp=!1,this._pointerData[t.id].timeDown=this.game.time.now,this.sprite.events.onInputDown.dispatch(this.sprite,t),this.draggable&&this.isDragged===!1&&this.startDrag(t),this.bringToTop&&this.sprite.bringToTop()),this.consumePointerEvent},_releasedHandler:function(t){this._pointerData[t.id].isDown&&t.isUp&&(this._pointerData[t.id].isDown=!1,this._pointerData[t.id].isUp=!0,this._pointerData[t.id].timeUp=this.game.time.now,this._pointerData[t.id].downDuration=this._pointerData[t.id].timeUp-this._pointerData[t.id].timeDown,this.checkPointerOver(t)?this.sprite.events.onInputUp.dispatch(this.sprite,t):this.useHandCursor&&(this.game.stage.canvas.style.cursor="default"),this.draggable&&this.isDragged&&this._draggedPointerID==t.id&&this.stopDrag(t))},updateDrag:function(t){return t.isUp?(this.stopDrag(t),!1):(this.allowHorizontalDrag&&(this.sprite.x=t.x+this._dragPoint.x+this.dragOffset.x),this.allowVerticalDrag&&(this.sprite.y=t.y+this._dragPoint.y+this.dragOffset.y),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round(this.sprite.x/this.snapX)*this.snapX,this.sprite.y=Math.round(this.sprite.y/this.snapY)*this.snapY),!0)},justOver:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isOver&&this.overDuration(t)<e},justOut:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isOut&&this.game.time.now-this._pointerData[t].timeOut<e},justPressed:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isDown&&this.downDuration(t)<e},justReleased:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isUp&&this.game.time.now-this._pointerData[t].timeUp<e},overDuration:function(t){return t=t||0,this._pointerData[t].isOver?this.game.time.now-this._pointerData[t].timeOver:-1},downDuration:function(t){return t=t||0,this._pointerData[t].isDown?this.game.time.now-this._pointerData[t].timeDown:-1},enableDrag:function(t,e,i,r,s,o){"undefined"==typeof t&&(t=!1),"undefined"==typeof e&&(e=!1),"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=255),"undefined"==typeof s&&(s=null),"undefined"==typeof o&&(o=null),this._dragPoint=new n.Point,this.draggable=!0,this.bringToTop=e,this.dragOffset=new n.Point,this.dragFromCenter=t,this.pixelPerfect=i,this.pixelPerfectAlpha=r,s&&(this.boundsRect=s),o&&(this.boundsSprite=o)},disableDrag:function(){if(this._pointerData)for(var t=0;10>t;t++)this._pointerData[t].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1},startDrag:function(t){this.isDragged=!0,this._draggedPointerID=t.id,this._pointerData[t.id].isDragged=!0,this.dragFromCenter?(this.sprite.centerOn(t.x,t.y),this._dragPoint.setTo(this.sprite.x-t.x,this.sprite.y-t.y)):this._dragPoint.setTo(this.sprite.x-t.x,this.sprite.y-t.y),this.updateDrag(t),this.bringToTop&&this.sprite.bringToTop(),this.sprite.events.onDragStart.dispatch(this.sprite,t)},stopDrag:function(t){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[t.id].isDragged=!1,this.snapOnRelease&&(this.sprite.x=Math.round(this.sprite.x/this.snapX)*this.snapX,this.sprite.y=Math.round(this.sprite.y/this.snapY)*this.snapY),this.sprite.events.onDragStop.dispatch(this.sprite,t),this.sprite.events.onInputUp.dispatch(this.sprite,t),this.checkPointerOver(t)===!1&&this._pointerOutHandler(t)},setDragLock:function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0),this.allowHorizontalDrag=t,this.allowVerticalDrag=e},enableSnap:function(t,e,i,n){"undefined"==typeof i&&(i=!0),"undefined"==typeof n&&(n=!1),this.snapX=t,this.snapY=e,this.snapOnDrag=i,this.snapOnRelease=n},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.x<this.boundsRect.left?this.sprite.x=this.boundsRect.x:this.sprite.x+this.sprite.width>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-this.sprite.width),this.sprite.y<this.boundsRect.top?this.sprite.y=this.boundsRect.top:this.sprite.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-this.sprite.height)},checkBoundsSprite:function(){this.sprite.x<this.boundsSprite.x?this.sprite.x=this.boundsSprite.x:this.sprite.x+this.sprite.width>this.boundsSprite.x+this.boundsSprite.width&&(this.sprite.x=this.boundsSprite.x+this.boundsSprite.width-this.sprite.width),this.sprite.y<this.boundsSprite.y?this.sprite.y=this.boundsSprite.y:this.sprite.y+this.sprite.height>this.boundsSprite.y+this.boundsSprite.height&&(this.sprite.y=this.boundsSprite.y+this.boundsSprite.height-this.sprite.height)}},n.Events=function(t){this.parent=t,this.onAddedToGroup=new n.Signal,this.onRemovedFromGroup=new n.Signal,this.onKilled=new n.Signal,this.onRevived=new n.Signal,this.onOutOfBounds=new n.Signal,this.onInputOver=null,this.onInputOut=null,this.onInputDown=null,this.onInputUp=null,this.onDragStart=null,this.onDragStop=null,this.onAnimationStart=null,this.onAnimationComplete=null,this.onAnimationLoop=null},n.Events.prototype={destroy:function(){this.parent=null,this.onAddedToGroup.dispose(),this.onRemovedFromGroup.dispose(),this.onKilled.dispose(),this.onRevived.dispose(),this.onOutOfBounds.dispose(),this.onInputOver&&(this.onInputOver.dispose(),this.onInputOut.dispose(),this.onInputDown.dispose(),this.onInputUp.dispose(),this.onDragStart.dispose(),this.onDragStop.dispose()),this.onAnimationStart&&(this.onAnimationStart.dispose(),this.onAnimationComplete.dispose(),this.onAnimationLoop.dispose())}},n.GameObjectFactory=function(t){this.game=t,this.world=this.game.world},n.GameObjectFactory.prototype={existing:function(t){return this.world.add(t)},sprite:function(t,e,i,n){return this.world.create(t,e,i,n)},child:function(t,e,i,n,r){return t.create(e,i,n,r)},tween:function(t){return this.game.tweens.create(t)},group:function(t,e){return new n.Group(this.game,t,e)},audio:function(t,e,i,n){return this.game.sound.add(t,e,i,n)},tileSprite:function(t,e,i,r,s,o){return this.world.add(new n.TileSprite(this.game,t,e,i,r,s,o))},text:function(t,e,i,r){return this.world.add(new n.Text(this.game,t,e,i,r))},button:function(t,e,i,r,s,o,a,h){return this.world.add(new n.Button(this.game,t,e,i,r,s,o,a,h))},graphics:function(t,e){return this.world.add(new n.Graphics(this.game,t,e))},emitter:function(t,e,i){return this.game.particles.add(new n.Particles.Arcade.Emitter(this.game,t,e,i))},bitmapText:function(t,e,i,r){return this.world.add(new n.BitmapText(this.game,t,e,i,r))},tilemap:function(t){return new n.Tilemap(this.game,t)},tileset:function(t){return this.game.cache.getTileset(t)},tilemapLayer:function(t,e,i,r,s,o,a){return this.world.add(new n.TilemapLayer(this.game,t,e,i,r,s,o,a))},renderTexture:function(t,e,i){var r=new n.RenderTexture(this.game,t,e,i);return this.game.cache.addRenderTexture(t,r),r},bitmapData:function(t,e){return new n.BitmapData(this.game,t,e)},filter:function(t){var e=Array.prototype.splice.call(arguments,1),t=new n.Filter[t](this.game);return t.init.apply(t,e),t}},n.BitmapData=function(t,e,r){"undefined"==typeof e&&(e=256),"undefined"==typeof r&&(r=256),this.game=t,this.name="",this.width=e,this.height=r,this.canvas=n.Canvas.create(e,r),this.context=this.canvas.getContext("2d"),this.imageData=this.context.getImageData(0,0,e,r),this.pixels=this.imageData.data.buffer?this.imageData.data.buffer:this.imageData.data,this.baseTexture=new i.BaseTexture(this.canvas),this.texture=new i.Texture(this.baseTexture),this.textureFrame=new n.Frame(0,0,0,e,r,"bitmapData",t.rnd.uuid()),this.type=n.BITMAPDATA,this._dirty=!1},n.BitmapData.prototype={add:function(t){t.loadTexture(this)},addTo:function(t){for(var e=0;e<t.length;e++)t[e].texture&&t[e].loadTexture(this)},clear:function(){this.context.clearRect(0,0,this.width,this.height),this._dirty=!0},refreshBuffer:function(){this.imageData=this.context.getImageData(0,0,this.width,this.height),this.pixels=new Int32Array(this.imageData.data.buffer)},setPixel32:function(t,e,i,n,r,s){t>=0&&t<=this.width&&e>=0&&e<=this.height&&(this.pixels[e*this.width+t]=s<<24|r<<16|n<<8|i,this.context.putImageData(this.imageData,0,0),this._dirty=!0)},setPixel:function(t,e,i,n,r){this.setPixel32(t,e,i,n,r,255)},getPixel:function(t,e){return t>=0&&t<=this.width&&e>=0&&e<=this.height?this.data32[e*this.width+t]:void 0},getPixel32:function(t,e){return t>=0&&t<=this.width&&e>=0&&e<=this.height?this.data32[e*this.width+t]:void 0},getPixels:function(t){return this.context.getImageData(t.x,t.y,t.width,t.height)},arc:function(t,e,i,n,r,s){return"undefined"==typeof s&&(s=!1),this._dirty=!0,this.context.arc(t,e,i,n,r,s),this},arcTo:function(t,e,i,n,r){return this._dirty=!0,this.context.arcTo(t,e,i,n,r),this},beginFill:function(t){return this.fillStyle(t),this},beginLinearGradientFill:function(t,e,i,n,r,s){for(var o=this.createLinearGradient(i,n,r,s),a=0,h=t.length;h>a;a++)o.addColorStop(e[a],t[a]);return this.fillStyle(o),this},beginLinearGradientStroke:function(t,e,i,n,r,s){for(var o=this.createLinearGradient(i,n,r,s),a=0,h=t.length;h>a;a++)o.addColorStop(e[a],t[a]);return this.strokeStyle(o),this},beginRadialGradientStroke:function(t,e,i,n,r,s,o,a){for(var h=this.createRadialGradient(i,n,r,s,o,a),l=0,u=t.length;u>l;l++)h.addColorStop(e[l],t[l]);return this.strokeStyle(h),this},beginPath:function(){return this.context.beginPath(),this},beginStroke:function(t){return this.strokeStyle(t),this},bezierCurveTo:function(t,e,i,n,r,s){return this._dirty=!0,this.context.bezierCurveTo(t,e,i,n,r,s),this},circle:function(t,e,i){return this.arc(t,e,i,0,2*Math.PI),this},clearRect:function(t,e,i,n){return this._dirty=!0,this.context.clearRect(t,e,i,n),this},clip:function(){return this._dirty=!0,this.context.clip(),this},closePath:function(){return this._dirty=!0,this.context.closePath(),this},createLinearGradient:function(t,e,i,n){return this.context.createLinearGradient(t,e,i,n)},createRadialGradient:function(t,e,i,n,r,s){return this.context.createRadialGradient(t,e,i,n,r,s)},ellipse:function(t,e,i,n){var r=.5522848,s=i/2*r,o=n/2*r,a=t+i,h=e+n,l=t+i/2,u=e+n/2;return this.moveTo(t,u),this.bezierCurveTo(t,u-o,l-s,e,l,e),this.bezierCurveTo(l+s,e,a,u-o,a,u),this.bezierCurveTo(a,u+o,l+s,h,l,h),this.bezierCurveTo(l-s,h,t,u+o,t,u),this},fill:function(){return this._dirty=!0,this.context.fill(),this},fillRect:function(t,e,i,n){return this._dirty=!0,this.context.fillRect(t,e,i,n),this},fillStyle:function(t){return this.context.fillStyle=t,this},font:function(t){return this.context.font=t,this},globalAlpha:function(t){return this.context.globalAlpha=t,this},globalCompositeOperation:function(t){return this.context.globalCompositeOperation=t,this},lineCap:function(t){return this.context.lineCap=t,this},lineDashOffset:function(t){return this.context.lineDashOffset=t,this},lineJoin:function(t){return this.context.lineJoin=t,this},lineWidth:function(t){return this.context.lineWidth=t,this},miterLimit:function(t){return this.context.miterLimit=t,this},lineTo:function(t,e){return this._dirty=!0,this.context.lineTo(t,e),this},moveTo:function(t,e){return this.context.moveTo(t,e),this},quadraticCurveTo:function(t,e,i,n){return this._dirty=!0,this.context.quadraticCurveTo(t,e,i,n),this},rect:function(t,e,i,n){return this._dirty=!0,this.context.rect(t,e,i,n),this},restore:function(){return this._dirty=!0,this.context.restore(),this},rotate:function(t){return this._dirty=!0,this.context.rotate(t),this},setStrokeStyle:function(t,e,i,n,r){return"undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e="butt"),"undefined"==typeof i&&(i="miter"),"undefined"==typeof n&&(n=10),r=!1,this.lineWidth(t),this.lineCap(e),this.lineJoin(i),this.miterLimit(n),this},save:function(){return this._dirty=!0,this.context.save(),this},scale:function(t,e){return this._dirty=!0,this.context.scale(t,e),this},scrollPathIntoView:function(){return this._dirty=!0,this.context.scrollPathIntoView(),this},stroke:function(){return this._dirty=!0,this.context.stroke(),this},strokeRect:function(t,e,i,n){return this._dirty=!0,this.context.strokeRect(t,e,i,n),this},strokeStyle:function(t){return this.context.strokeStyle=t,this},render:function(){this._dirty&&(this.game.renderType==n.WEBGL&&i.texturesToUpdate.push(this.baseTexture),this._dirty=!1)}},n.BitmapData.prototype.mt=n.BitmapData.prototype.moveTo,n.BitmapData.prototype.lt=n.BitmapData.prototype.lineTo,n.BitmapData.prototype.at=n.BitmapData.prototype.arcTo,n.BitmapData.prototype.bt=n.BitmapData.prototype.bezierCurveTo,n.BitmapData.prototype.qt=n.BitmapData.prototype.quadraticCurveTo,n.BitmapData.prototype.a=n.BitmapData.prototype.arc,n.BitmapData.prototype.r=n.BitmapData.prototype.rect,n.BitmapData.prototype.cp=n.BitmapData.prototype.closePath,n.BitmapData.prototype.c=n.BitmapData.prototype.clear,n.BitmapData.prototype.f=n.BitmapData.prototype.beginFill,n.BitmapData.prototype.lf=n.BitmapData.prototype.beginLinearGradientFill,n.BitmapData.prototype.rf=n.BitmapData.prototype.beginRadialGradientFill,n.BitmapData.prototype.ef=n.BitmapData.prototype.endFill,n.BitmapData.prototype.ss=n.BitmapData.prototype.setStrokeStyle,n.BitmapData.prototype.s=n.BitmapData.prototype.beginStroke,n.BitmapData.prototype.ls=n.BitmapData.prototype.beginLinearGradientStroke,n.BitmapData.prototype.rs=n.BitmapData.prototype.beginRadialGradientStroke,n.BitmapData.prototype.dr=n.BitmapData.prototype.rect,n.BitmapData.prototype.dc=n.BitmapData.prototype.circle,n.BitmapData.prototype.de=n.BitmapData.prototype.ellipse,n.Sprite=function(t,e,r,s,o){e=e||0,r=r||0,s=s||null,o=o||null,this.game=t,this.exists=!0,this.alive=!0,this.group=null,this.name="",this.type=n.SPRITE,this.renderOrderID=-1,this.lifespan=0,this.events=new n.Events(this),this.animations=new n.AnimationManager(this),this.input=new n.InputHandler(this),this.key=s,this.currentFrame=null,s instanceof n.RenderTexture?(i.Sprite.call(this,s),this.currentFrame=this.game.cache.getTextureFrame(s.name)):s instanceof n.BitmapData?(i.Sprite.call(this,s.texture,s.textureFrame),this.currentFrame=s.textureFrame):s instanceof i.Texture?(i.Sprite.call(this,s),this.currentFrame=o):(null===s||"undefined"==typeof s?(s="__default",this.key=s):"string"==typeof s&&this.game.cache.checkImageKey(s)===!1&&(s="__missing",this.key=s),i.Sprite.call(this,i.TextureCache[s]),this.game.cache.isSpriteSheet(s)?(this.animations.loadFrameData(this.game.cache.getFrameData(s)),null!==o&&("string"==typeof o?this.frameName=o:this.frame=o)):this.currentFrame=this.game.cache.getFrame(s)),this.textureRegion=new n.Rectangle(this.texture.frame.x,this.texture.frame.y,this.texture.frame.width,this.texture.frame.height),this.anchor=new n.Point,this.x=e,this.y=r,this.position.x=e,this.position.y=r,this.world=new n.Point(e,r),this.autoCull=!1,this.scale=new n.Point(1,1),this._cache={dirty:!1,a00:-1,a01:-1,a02:-1,a10:-1,a11:-1,a12:-1,id:-1,i01:-1,i10:-1,idi:-1,left:null,right:null,top:null,bottom:null,prevX:e,prevY:r,x:-1,y:-1,scaleX:1,scaleY:1,width:this.currentFrame.sourceSizeW,height:this.currentFrame.sourceSizeH,halfWidth:Math.floor(this.currentFrame.sourceSizeW/2),halfHeight:Math.floor(this.currentFrame.sourceSizeH/2),calcWidth:-1,calcHeight:-1,frameID:-1,frameWidth:this.currentFrame.width,frameHeight:this.currentFrame.height,cameraVisible:!0,cropX:0,cropY:0,cropWidth:this.currentFrame.sourceSizeW,cropHeight:this.currentFrame.sourceSizeH},this.offset=new n.Point,this.center=new n.Point(e+Math.floor(this._cache.width/2),r+Math.floor(this._cache.height/2)),this.topLeft=new n.Point(e,r),this.topRight=new n.Point(e+this._cache.width,r),this.bottomRight=new n.Point(e+this._cache.width,r+this._cache.height),this.bottomLeft=new n.Point(e,r+this._cache.height),this.bounds=new n.Rectangle(e,r,this._cache.width,this._cache.height),this.body=new n.Physics.Arcade.Body(this),this.health=1,this.inWorld=n.Rectangle.intersects(this.bounds,this.game.world.bounds),this.inWorldThreshold=0,this.outOfBoundsKill=!1,this._outOfBoundsFired=!1,this.fixedToCamera=!1,this.cameraOffset=new n.Point,this.crop=new n.Rectangle(0,0,this._cache.width,this._cache.height),this.cropEnabled=!1,this.updateCache(),this.updateBounds()
},n.Sprite.prototype=Object.create(i.Sprite.prototype),n.Sprite.prototype.constructor=n.Sprite,n.Sprite.prototype.preUpdate=function(){return!this.exists||this.group&&!this.group.exists?(this.renderOrderID=-1,!1):this.lifespan>0&&(this.lifespan-=this.game.time.elapsed,this.lifespan<=0)?(this.kill(),!1):(this._cache.dirty=!1,this.visible&&(this.renderOrderID=this.game.world.currentRenderOrderID++),this.updateCache(),this.updateAnimation(),this.updateCrop(),(this._cache.dirty||this.world.x!==this._cache.prevX||this.world.y!==this._cache.prevY)&&this.updateBounds(),this.body&&this.body.preUpdate(),!0)},n.Sprite.prototype.updateCache=function(){this._cache.prevX=this.world.x,this._cache.prevY=this.world.y,this.fixedToCamera&&(this.x=this.game.camera.view.x+this.cameraOffset.x,this.y=this.game.camera.view.y+this.cameraOffset.y),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),(this.worldTransform[1]!=this._cache.i01||this.worldTransform[3]!=this._cache.i10||this.worldTransform[0]!=this._cache.a00||this.worldTransform[41]!=this._cache.a11)&&(this._cache.a00=this.worldTransform[0],this._cache.a01=this.worldTransform[1],this._cache.a10=this.worldTransform[3],this._cache.a11=this.worldTransform[4],this._cache.i01=this.worldTransform[1],this._cache.i10=this.worldTransform[3],this._cache.scaleX=Math.sqrt(this._cache.a00*this._cache.a00+this._cache.a01*this._cache.a01),this._cache.scaleY=Math.sqrt(this._cache.a10*this._cache.a10+this._cache.a11*this._cache.a11),this._cache.a01*=-1,this._cache.a10*=-1,this._cache.id=1/(this._cache.a00*this._cache.a11+this._cache.a01*-this._cache.a10),this._cache.idi=1/(this._cache.a00*this._cache.a11+this._cache.i01*-this._cache.i10),this._cache.dirty=!0),this._cache.a02=this.worldTransform[2],this._cache.a12=this.worldTransform[5]},n.Sprite.prototype.updateAnimation=function(){(this.animations.update()||this.currentFrame&&this.currentFrame.uuid!=this._cache.frameID)&&(this._cache.frameID=this.currentFrame.uuid,this._cache.frameWidth=this.texture.frame.width,this._cache.frameHeight=this.texture.frame.height,this._cache.width=this.currentFrame.width,this._cache.height=this.currentFrame.height,this._cache.halfWidth=Math.floor(this._cache.width/2),this._cache.halfHeight=Math.floor(this._cache.height/2),this._cache.dirty=!0)},n.Sprite.prototype.updateCrop=function(){!this.cropEnabled||this.crop.width==this._cache.cropWidth&&this.crop.height==this._cache.cropHeight&&this.crop.x==this._cache.cropX&&this.crop.y==this._cache.cropY||(this.crop.floorAll(),this._cache.cropX=this.crop.x,this._cache.cropY=this.crop.y,this._cache.cropWidth=this.crop.width,this._cache.cropHeight=this.crop.height,this.texture.frame=this.crop,this.texture.width=this.crop.width,this.texture.height=this.crop.height,this.texture.updateFrame=!0,i.Texture.frameUpdates.push(this.texture))},n.Sprite.prototype.updateBounds=function(){this.offset.setTo(this._cache.a02-this.anchor.x*this.width,this._cache.a12-this.anchor.y*this.height),this.getLocalPosition(this.center,this.offset.x+this.width/2,this.offset.y+this.height/2),this.getLocalPosition(this.topLeft,this.offset.x,this.offset.y),this.getLocalPosition(this.topRight,this.offset.x+this.width,this.offset.y),this.getLocalPosition(this.bottomLeft,this.offset.x,this.offset.y+this.height),this.getLocalPosition(this.bottomRight,this.offset.x+this.width,this.offset.y+this.height),this._cache.left=n.Math.min(this.topLeft.x,this.topRight.x,this.bottomLeft.x,this.bottomRight.x),this._cache.right=n.Math.max(this.topLeft.x,this.topRight.x,this.bottomLeft.x,this.bottomRight.x),this._cache.top=n.Math.min(this.topLeft.y,this.topRight.y,this.bottomLeft.y,this.bottomRight.y),this._cache.bottom=n.Math.max(this.topLeft.y,this.topRight.y,this.bottomLeft.y,this.bottomRight.y),this.bounds.setTo(this._cache.left,this._cache.top,this._cache.right-this._cache.left,this._cache.bottom-this._cache.top),this.updateFrame=!0,this.inWorld===!1?(this.inWorld=n.Rectangle.intersects(this.bounds,this.game.world.bounds,this.inWorldThreshold),this.inWorld&&(this._outOfBoundsFired=!1)):(this.inWorld=n.Rectangle.intersects(this.bounds,this.game.world.bounds,this.inWorldThreshold),this.inWorld===!1&&(this.events.onOutOfBounds.dispatch(this),this._outOfBoundsFired=!0,this.outOfBoundsKill&&this.kill())),this._cache.cameraVisible=n.Rectangle.intersects(this.game.world.camera.screenView,this.bounds,0),this.autoCull&&(this.renderable=this._cache.cameraVisible),this.body&&this.body.updateBounds(this.center.x,this.center.y,this._cache.scaleX,this._cache.scaleY)},n.Sprite.prototype.getLocalPosition=function(t,e,i){return t.x=(this._cache.a11*this._cache.id*e+-this._cache.a01*this._cache.id*i+(this._cache.a12*this._cache.a01-this._cache.a02*this._cache.a11)*this._cache.id)*this.scale.x+this._cache.a02,t.y=(this._cache.a00*this._cache.id*i+-this._cache.a10*this._cache.id*e+(-this._cache.a12*this._cache.a00+this._cache.a02*this._cache.a10)*this._cache.id)*this.scale.y+this._cache.a12,t},n.Sprite.prototype.getLocalUnmodifiedPosition=function(t,e,i){return t.x=this._cache.a11*this._cache.idi*e+-this._cache.i01*this._cache.idi*i+(this._cache.a12*this._cache.i01-this._cache.a02*this._cache.a11)*this._cache.idi+this.anchor.x*this._cache.width,t.y=this._cache.a00*this._cache.idi*i+-this._cache.i10*this._cache.idi*e+(-this._cache.a12*this._cache.a00+this._cache.a02*this._cache.i10)*this._cache.idi+this.anchor.y*this._cache.height,t},n.Sprite.prototype.resetCrop=function(){this.crop=new n.Rectangle(0,0,this._cache.width,this._cache.height),this.texture.setFrame(this.crop),this.cropEnabled=!1},n.Sprite.prototype.postUpdate=function(){this.key instanceof n.BitmapData&&this.key._dirty&&this.key.render(),this.exists&&(this.body&&this.body.postUpdate(),this.fixedToCamera?(this._cache.x=this.game.camera.view.x+this.cameraOffset.x,this._cache.y=this.game.camera.view.y+this.cameraOffset.y):(this._cache.x=this.x,this._cache.y=this.y),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.position.x=this._cache.x,this.position.y=this._cache.y)},n.Sprite.prototype.loadTexture=function(t,e){this.key=t,t instanceof n.RenderTexture?this.currentFrame=this.game.cache.getTextureFrame(t.name):t instanceof n.BitmapData?(this.setTexture(t.texture),this.currentFrame=t.textureFrame):t instanceof i.Texture?this.currentFrame=e:(("undefined"==typeof t||this.game.cache.checkImageKey(t)===!1)&&(t="__default",this.key=t),this.game.cache.isSpriteSheet(t)?(this.animations.loadFrameData(this.game.cache.getFrameData(t)),"undefined"!=typeof e&&("string"==typeof e?this.frameName=e:this.frame=e)):(this.currentFrame=this.game.cache.getFrame(t),this.setTexture(i.TextureCache[t])))},n.Sprite.prototype.centerOn=function(t,e){return this.x=t+(this.x-this.center.x),this.y=e+(this.y-this.center.y),this},n.Sprite.prototype.revive=function(t){return"undefined"==typeof t&&(t=1),this.alive=!0,this.exists=!0,this.visible=!0,this.health=t,this.events&&this.events.onRevived.dispatch(this),this},n.Sprite.prototype.kill=function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled.dispatch(this),this},n.Sprite.prototype.destroy=function(){this.group&&this.group.remove(this),this.input&&this.input.destroy(),this.events&&this.events.destroy(),this.animations&&this.animations.destroy(),this.alive=!1,this.exists=!1,this.visible=!1,this.game=null},n.Sprite.prototype.damage=function(t){return this.alive&&(this.health-=t,this.health<0&&this.kill()),this},n.Sprite.prototype.reset=function(t,e,i){return"undefined"==typeof i&&(i=1),this.x=t,this.y=e,this.position.x=this.x,this.position.y=this.y,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this._outOfBoundsFired=!1,this.health=i,this.body&&this.body.reset(),this},n.Sprite.prototype.bringToTop=function(){return this.group?this.group.bringToTop(this):this.game.world.bringToTop(this),this},n.Sprite.prototype.play=function(t,e,i,n){return this.animations?this.animations.play(t,e,i,n):void 0},Object.defineProperty(n.Sprite.prototype,"angle",{get:function(){return n.Math.wrapAngle(n.Math.radToDeg(this.rotation))},set:function(t){this.rotation=n.Math.degToRad(n.Math.wrapAngle(t))}}),Object.defineProperty(n.Sprite.prototype,"frame",{get:function(){return this.animations.frame},set:function(t){this.animations.frame=t}}),Object.defineProperty(n.Sprite.prototype,"frameName",{get:function(){return this.animations.frameName},set:function(t){this.animations.frameName=t}}),Object.defineProperty(n.Sprite.prototype,"inCamera",{get:function(){return this._cache.cameraVisible}}),Object.defineProperty(n.Sprite.prototype,"width",{get:function(){return this.scale.x*this.currentFrame.width},set:function(t){this.scale.x=t/this.currentFrame.width,this._cache.scaleX=t/this.currentFrame.width,this._width=t}}),Object.defineProperty(n.Sprite.prototype,"height",{get:function(){return this.scale.y*this.currentFrame.height},set:function(t){this.scale.y=t/this.currentFrame.height,this._cache.scaleY=t/this.currentFrame.height,this._height=t}}),Object.defineProperty(n.Sprite.prototype,"inputEnabled",{get:function(){return this.input.enabled},set:function(t){console.log("inputEnabled",t,this.input),t?this.input.enabled===!1&&this.input.start():this.input.enabled&&this.input.stop()}}),n.TileSprite=function(t,e,r,s,o,a,h){e=e||0,r=r||0,s=s||256,o=o||256,a=a||null,h=h||null,n.Sprite.call(this,t,e,r,a,h),this.texture=i.TextureCache[a],i.TilingSprite.call(this,this.texture,s,o),this.type=n.TILESPRITE,this.tileScale=new n.Point(1,1),this.tilePosition=new n.Point(0,0)},n.TileSprite.prototype=n.Utils.extend(!0,i.TilingSprite.prototype,n.Sprite.prototype),n.TileSprite.prototype.constructor=n.TileSprite,n.Text=function(t,e,r,s,o){e=e||0,r=r||0,s=s||"",o=o||"",this.game=t,this.exists=!0,this.alive=!0,this.group=null,this.name="",this.type=n.TEXT,this._text=s,this._style=o,i.Text.call(this,s,o),this.position.x=this.x=e,this.position.y=this.y=r,this.anchor=new n.Point,this.scale=new n.Point(1,1),this._cache={dirty:!1,a00:1,a01:0,a02:e,a10:0,a11:1,a12:r,id:1,x:-1,y:-1,scaleX:1,scaleY:1},this._cache.x=this.x,this._cache.y=this.y,this.renderable=!0},n.Text.prototype=Object.create(i.Text.prototype),n.Text.prototype.constructor=n.Text,n.Text.prototype.update=function(){this.exists&&(this._cache.dirty=!1,this._cache.x=this.x,this._cache.y=this.y,(this.position.x!=this._cache.x||this.position.y!=this._cache.y)&&(this.position.x=this._cache.x,this.position.y=this._cache.y,this._cache.dirty=!0))},n.Text.prototype.destroy=function(){this.group&&this.group.remove(this),this.canvas.parentNode?this.canvas.parentNode.removeChild(this.canvas):(this.canvas=null,this.context=null),this.exists=!1,this.group=null},Object.defineProperty(n.Text.prototype,"angle",{get:function(){return n.Math.radToDeg(this.rotation)},set:function(t){this.rotation=n.Math.degToRad(t)}}),Object.defineProperty(n.Text.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(n.Text.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),Object.defineProperty(n.Text.prototype,"content",{get:function(){return this._text},set:function(t){t!==this._text&&(this._text=t,this.setText(t))}}),Object.defineProperty(n.Text.prototype,"font",{get:function(){return this._style},set:function(t){t!==this._style&&(this._style=t,this.setStyle(t))}}),n.BitmapText=function(t,e,r,s,o){e=e||0,r=r||0,s=s||"",o=o||"",this.game=t,this.exists=!0,this.alive=!0,this.group=null,this.name="",this.type=n.BITMAPTEXT,i.BitmapText.call(this,s,o),this.position.x=e,this.position.y=r,this.anchor=new n.Point,this.scale=new n.Point(1,1),this._cache={dirty:!1,a00:1,a01:0,a02:e,a10:0,a11:1,a12:r,id:1,x:-1,y:-1,scaleX:1,scaleY:1},this._cache.x=this.x,this._cache.y=this.y,this.renderable=!0},n.BitmapText.prototype=Object.create(i.BitmapText.prototype),n.BitmapText.prototype.constructor=n.BitmapText,n.BitmapText.prototype.update=function(){this.exists&&(this._cache.dirty=!1,this._cache.x=this.x,this._cache.y=this.y,(this.position.x!=this._cache.x||this.position.y!=this._cache.y)&&(this.position.x=this._cache.x,this.position.y=this._cache.y,this._cache.dirty=!0),this.pivot.x=this.anchor.x*this.width,this.pivot.y=this.anchor.y*this.height)},n.BitmapText.prototype.destroy=function(){this.group&&this.group.remove(this),this.canvas&&this.canvas.parentNode?this.canvas.parentNode.removeChild(this.canvas):(this.canvas=null,this.context=null),this.exists=!1,this.group=null},Object.defineProperty(n.BitmapText.prototype,"angle",{get:function(){return n.Math.radToDeg(this.rotation)},set:function(t){this.rotation=n.Math.degToRad(t)}}),Object.defineProperty(n.BitmapText.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(n.BitmapText.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),n.Button=function(t,e,i,r,s,o,a,h,l){e=e||0,i=i||0,r=r||null,s=s||null,o=o||this,n.Sprite.call(this,t,e,i,r,h),this.type=n.BUTTON,this._onOverFrameName=null,this._onOutFrameName=null,this._onDownFrameName=null,this._onUpFrameName=null,this._onOverFrameID=null,this._onOutFrameID=null,this._onDownFrameID=null,this._onUpFrameID=null,this.onOverSound=null,this.onOutSound=null,this.onDownSound=null,this.onUpSound=null,this.onOverSoundMarker="",this.onOutSoundMarker="",this.onDownSoundMarker="",this.onUpSoundMarker="",this.onInputOver=new n.Signal,this.onInputOut=new n.Signal,this.onInputDown=new n.Signal,this.onInputUp=new n.Signal,this.freezeFrames=!1,this.forceOut=!0,this.setFrames(a,h,l),null!==s&&this.onInputUp.add(s,o),this.input.start(0,!0),this.events.onInputOver.add(this.onInputOverHandler,this),this.events.onInputOut.add(this.onInputOutHandler,this),this.events.onInputDown.add(this.onInputDownHandler,this),this.events.onInputUp.add(this.onInputUpHandler,this)},n.Button.prototype=Object.create(n.Sprite.prototype),n.Button.prototype=n.Utils.extend(!0,n.Button.prototype,n.Sprite.prototype,i.Sprite.prototype),n.Button.prototype.constructor=n.Button,n.Button.prototype.setFrames=function(t,e,i){null!==t&&("string"==typeof t?(this._onOverFrameName=t,this.input.pointerOver()&&(this.frameName=t)):(this._onOverFrameID=t,this.input.pointerOver()&&(this.frame=t))),null!==e&&("string"==typeof e?(this._onOutFrameName=e,this._onUpFrameName=e,this.input.pointerOver()===!1&&(this.frameName=e)):(this._onOutFrameID=e,this._onUpFrameID=e,this.input.pointerOver()===!1&&(this.frame=e))),null!==i&&("string"==typeof i?(this._onDownFrameName=i,this.input.pointerDown()&&(this.frameName=i)):(this._onDownFrameID=i,this.input.pointerDown()&&(this.frame=i)))},n.Button.prototype.setSounds=function(t,e,i,n,r,s,o,a){this.setOverSound(t,e),this.setOutSound(r,s),this.setUpSound(o,a),this.setDownSound(i,n)},n.Button.prototype.setOverSound=function(t,e){this.onOverSound=null,this.onOverSoundMarker="",t instanceof n.Sound&&(this.onOverSound=t),"string"==typeof e&&(this.onOverSoundMarker=e)},n.Button.prototype.setOutSound=function(t,e){this.onOutSound=null,this.onOutSoundMarker="",t instanceof n.Sound&&(this.onOutSound=t),"string"==typeof e&&(this.onOutSoundMarker=e)},n.Button.prototype.setUpSound=function(t,e){this.onUpSound=null,this.onUpSoundMarker="",t instanceof n.Sound&&(this.onUpSound=t),"string"==typeof e&&(this.onUpSoundMarker=e)},n.Button.prototype.setDownSound=function(t,e){this.onDownSound=null,this.onDownSoundMarker="",t instanceof n.Sound&&(this.onDownSound=t),"string"==typeof e&&(this.onDownSoundMarker=e)},n.Button.prototype.onInputOverHandler=function(t){this.freezeFrames===!1&&(null!=this._onOverFrameName?this.frameName=this._onOverFrameName:null!=this._onOverFrameID&&(this.frame=this._onOverFrameID)),this.onOverSound&&this.onOverSound.play(this.onOverSoundMarker),this.onInputOver&&this.onInputOver.dispatch(this,t)},n.Button.prototype.onInputOutHandler=function(t){this.freezeFrames===!1&&(null!=this._onOutFrameName?this.frameName=this._onOutFrameName:null!=this._onOutFrameID&&(this.frame=this._onOutFrameID)),this.onOutSound&&this.onOutSound.play(this.onOutSoundMarker),this.onInputOut&&this.onInputOut.dispatch(this,t)},n.Button.prototype.onInputDownHandler=function(t){this.freezeFrames===!1&&(null!=this._onDownFrameName?this.frameName=this._onDownFrameName:null!=this._onDownFrameID&&(this.frame=this._onDownFrameID)),this.onDownSound&&this.onDownSound.play(this.onDownSoundMarker),this.onInputDown&&this.onInputDown.dispatch(this,t)},n.Button.prototype.onInputUpHandler=function(t){this.freezeFrames===!1&&(null!=this._onUpFrameName?this.frameName=this._onUpFrameName:null!=this._onUpFrameID&&(this.frame=this._onUpFrameID)),this.onUpSound&&this.onUpSound.play(this.onUpSoundMarker),this.forceOut&&this.freezeFrames===!1&&(null!=this._onOutFrameName?this.frameName=this._onOutFrameName:null!=this._onOutFrameID&&(this.frame=this._onOutFrameID)),this.onInputUp&&this.onInputUp.dispatch(this,t)},n.Graphics=function(t,e,r){this.game=t,i.Graphics.call(this),this.type=n.GRAPHICS,this.position.x=e,this.position.y=r},n.Graphics.prototype=Object.create(i.Graphics.prototype),n.Graphics.prototype.constructor=n.Graphics,n.Graphics.prototype.destroy=function(){this.clear(),this.group&&this.group.remove(this),this.game=null},n.Graphics.prototype.drawPolygon=function(t){this.moveTo(t.points[0].x,t.points[0].y);for(var e=1;e<t.points.length;e+=1)this.lineTo(t.points[e].x,t.points[e].y);this.lineTo(t.points[0].x,t.points[0].y)},Object.defineProperty(n.Graphics.prototype,"angle",{get:function(){return n.Math.wrapAngle(n.Math.radToDeg(this.rotation))},set:function(t){this.rotation=n.Math.degToRad(n.Math.wrapAngle(t))}}),Object.defineProperty(n.Graphics.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(n.Graphics.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),n.RenderTexture=function(t,e,r,s){this.game=t,this.name=e,i.EventTarget.call(this),this.width=r||100,this.height=s||100,this.indetityMatrix=i.mat3.create(),this.frame=new i.Rectangle(0,0,this.width,this.height),this.type=n.RENDERTEXTURE,this._tempPoint={x:0,y:0},i.gl?this.initWebGL():this.initCanvas()},n.RenderTexture.prototype=Object.create(i.Texture.prototype),n.RenderTexture.prototype.constructor=i.RenderTexture,n.RenderTexture.prototype.render=function(t,e,r){"undefined"==typeof e&&(e=!1),"undefined"==typeof r&&(r=!1),t instanceof n.Group&&(t=t._container),i.gl?this.renderWebGL(t,e,r):this.renderCanvas(t,e,r)},n.RenderTexture.prototype.renderXY=function(t,e,i,n){this._tempPoint.x=e,this._tempPoint.y=i,this.render(t,this._tempPoint,n)},n.RenderTexture.prototype.initWebGL=function(){var t=i.gl;this.glFramebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.glFramebuffer),this.glFramebuffer.width=this.width,this.glFramebuffer.height=this.height,this.baseTexture=new i.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.baseTexture._glTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.baseTexture.isRender=!0,t.bindFramebuffer(t.FRAMEBUFFER,this.glFramebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.baseTexture._glTexture,0),this.projection=new i.Point(this.width/2,-this.height/2)},n.RenderTexture.prototype.resize=function(t,e){if(this.width=t,this.height=e,i.gl){this.projection.x=this.width/2,this.projection.y=-this.height/2;var n=i.gl;n.bindTexture(n.TEXTURE_2D,this.baseTexture._glTexture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null)}else this.frame.width=this.width,this.frame.height=this.height,this.renderer.resize(this.width,this.height)},n.RenderTexture.prototype.initCanvas=function(){this.renderer=new i.CanvasRenderer(this.width,this.height,null,0),this.baseTexture=new i.BaseTexture(this.renderer.view),this.frame=new i.Rectangle(0,0,this.width,this.height)},n.RenderTexture.prototype.renderWebGL=function(t,e,n){var r=i.gl;r.colorMask(!0,!0,!0,!0),r.viewport(0,0,this.width,this.height),r.bindFramebuffer(r.FRAMEBUFFER,this.glFramebuffer),n&&(r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT));var s=t.children,o=t.worldTransform;t.worldTransform=i.mat3.create(),t.worldTransform[4]=-1,t.worldTransform[5]=-2*this.projection.y,e&&(t.worldTransform[2]=e.x,t.worldTransform[5]-=e.y),i.visibleCount++,t.vcount=i.visibleCount;for(var a=0,h=s.length;h>a;a++)s[a].updateTransform();var l=t.__renderGroup;l?t==l.root?l.render(this.projection,this.glFramebuffer):l.renderSpecific(t,this.projection,this.glFramebuffer):(this.renderGroup||(this.renderGroup=new i.WebGLRenderGroup(r)),this.renderGroup.setRenderable(t),this.renderGroup.render(this.projection,this.glFramebuffer)),t.worldTransform=o},n.RenderTexture.prototype.renderCanvas=function(t,e,n){var r=t.children;t.worldTransform=i.mat3.create(),e&&(t.worldTransform[2]=e.x,t.worldTransform[5]=e.y);for(var s=0,o=r.length;o>s;s++)r[s].updateTransform();n&&this.renderer.context.clearRect(0,0,this.width,this.height),this.renderer.renderDisplayObject(t),this.renderer.context.setTransform(1,0,0,1,0,0)},n.Canvas={create:function(t,e){t=t||256,e=e||256;var i=document.createElement("canvas");return i.width=t,i.height=e,i.style.display="block",i},getOffset:function(t,e){e=e||new n.Point;var i=t.getBoundingClientRect(),r=t.clientTop||document.body.clientTop||0,s=t.clientLeft||document.body.clientLeft||0,o=window.pageYOffset||t.scrollTop||document.body.scrollTop,a=window.pageXOffset||t.scrollLeft||document.body.scrollLeft;return e.x=i.left+a-s,e.y=i.top+o-r,e},getAspectRatio:function(t){return t.width/t.height},setBackgroundColor:function(t,e){return e=e||"rgb(0,0,0)",t.style.backgroundColor=e,t},setTouchAction:function(t,e){return e=e||"none",t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t},setUserSelect:function(t,e){return e=e||"none",t.style["-webkit-touch-callout"]=e,t.style["-webkit-user-select"]=e,t.style["-khtml-user-select"]=e,t.style["-moz-user-select"]=e,t.style["-ms-user-select"]=e,t.style["user-select"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t},addToDOM:function(t,e,i){var n;return"undefined"==typeof i&&(i=!0),e&&("string"==typeof e?n=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(n=e),i&&(n.style.overflow="hidden")),n||(n=document.body),n.appendChild(t),t},setTransform:function(t,e,i,n,r,s,o){return t.setTransform(n,s,o,r,e,i),t},setSmoothingEnabled:function(t,e){return t.imageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.oImageSmoothingEnabled=e,t.webkitImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e,t},setImageRenderingCrisp:function(t){return t.style["image-rendering"]="crisp-edges",t.style["image-rendering"]="-moz-crisp-edges",t.style["image-rendering"]="-webkit-optimize-contrast",t.style.msInterpolationMode="nearest-neighbor",t},setImageRenderingBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}},n.StageScaleMode=function(t,e,i){this.game=t,this.width=e,this.height=i,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this._startHeight=0,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this.pageAlignHorizontally=!1,this.pageAlignVertically=!1,this._width=0,this._height=0,this.maxIterations=5,this.orientationSprite=null,this.enterLandscape=new n.Signal,this.enterPortrait=new n.Signal,this.enterIncorrectOrientation=new n.Signal,this.leaveIncorrectOrientation=new n.Signal,this.hasResized=new n.Signal,this.orientation=window.orientation?window.orientation:window.outerWidth>window.outerHeight?90:0,this.scaleFactor=new n.Point(1,1),this.scaleFactorInversed=new n.Point(1,1),this.margin=new n.Point(0,0),this.aspectRatio=0,this.event=null;var r=this;window.addEventListener("orientationchange",function(t){return r.checkOrientation(t)},!1),window.addEventListener("resize",function(t){return r.checkResize(t)},!1),document.addEventListener("webkitfullscreenchange",function(t){return r.fullScreenChange(t)},!1),document.addEventListener("mozfullscreenchange",function(t){return r.fullScreenChange(t)},!1),document.addEventListener("fullscreenchange",function(t){return r.fullScreenChange(t)},!1)},n.StageScaleMode.EXACT_FIT=0,n.StageScaleMode.NO_SCALE=1,n.StageScaleMode.SHOW_ALL=2,n.StageScaleMode.prototype={startFullScreen:function(t){if(!this.isFullScreen){"undefined"!=typeof t&&n.Canvas.setSmoothingEnabled(this.game.context,t);var e=this.game.canvas;this._width=this.width,this._height=this.height,console.log("startFullScreen",this._width,this._height),e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}},stopFullScreen:function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},fullScreenChange:function(t){this.event=t,this.isFullScreen?(this.game.stage.canvas.style.width="100%",this.game.stage.canvas.style.height="100%",this.setMaximum(),this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height):(this.game.stage.canvas.style.width=this.game.width+"px",this.game.stage.canvas.style.height=this.game.height+"px",this.width=this._width,this.height=this._height,this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height)},forceOrientation:function(t,e,n){"undefined"==typeof e&&(e=!1),this.forceLandscape=t,this.forcePortrait=e,"undefined"!=typeof n&&((null==n||this.game.cache.checkImageKey(n)===!1)&&(n="__default"),this.orientationSprite=new i.Sprite(i.TextureCache[n]),this.orientationSprite.anchor.x=.5,this.orientationSprite.anchor.y=.5,this.orientationSprite.position.x=this.game.width/2,this.orientationSprite.position.y=this.game.height/2,this.checkOrientationState(),this.incorrectOrientation?(this.orientationSprite.visible=!0,this.game.world.visible=!1):(this.orientationSprite.visible=!1,this.game.world.visible=!0),this.game.stage._stage.addChild(this.orientationSprite))},checkOrientationState:function(){this.incorrectOrientation?(this.forceLandscape&&window.innerWidth>window.innerHeight||this.forcePortrait&&window.innerHeight>window.innerWidth)&&(this.game.paused=!1,this.incorrectOrientation=!1,this.leaveIncorrectOrientation.dispatch(),this.orientationSprite&&(this.orientationSprite.visible=!1,this.game.world.visible=!0),this.refresh()):(this.forceLandscape&&window.innerWidth<window.innerHeight||this.forcePortrait&&window.innerHeight<window.innerWidth)&&(this.game.paused=!0,this.incorrectOrientation=!0,this.enterIncorrectOrientation.dispatch(),this.orientationSprite&&this.orientationSprite.visible===!1&&(this.orientationSprite.visible=!0,this.game.world.visible=!1),this.refresh())},checkOrientation:function(t){this.event=t,this.orientation=window.orientation,this.isLandscape?this.enterLandscape.dispatch(this.orientation,!0,!1):this.enterPortrait.dispatch(this.orientation,!1,!0),this.game.stage.scaleMode!==n.StageScaleMode.NO_SCALE&&this.refresh()},checkResize:function(t){this.event=t,this.orientation=window.outerWidth>window.outerHeight?90:0,this.isLandscape?this.enterLandscape.dispatch(this.orientation,!0,!1):this.enterPortrait.dispatch(this.orientation,!1,!0),this.game.stage.scaleMode!==n.StageScaleMode.NO_SCALE&&this.refresh(),this.checkOrientationState()},refresh:function(){if(this.game.device.iPad===!1&&this.game.device.webApp===!1&&this.game.device.desktop===!1&&(this.game.device.android&&this.game.device.chrome===!1?window.scrollTo(0,1):window.scrollTo(0,0)),null==this._check&&this.maxIterations>0){this._iterations=this.maxIterations;var t=this;this._check=window.setInterval(function(){return t.setScreenSize()},10),this.setScreenSize()}},setScreenSize:function(t){"undefined"==typeof t&&(t=!1),this.game.device.iPad===!1&&this.game.device.webApp===!1&&this.game.device.desktop===!1&&(this.game.device.android&&this.game.device.chrome===!1?window.scrollTo(0,1):window.scrollTo(0,0)),this._iterations--,(t||window.innerHeight>this._startHeight||this._iterations<0)&&(document.documentElement.style.minHeight=window.innerHeight+"px",this.incorrectOrientation===!0?this.setMaximum():this.game.stage.scaleMode==n.StageScaleMode.EXACT_FIT?this.setExactFit():this.game.stage.scaleMode==n.StageScaleMode.SHOW_ALL&&this.setShowAll(),this.setSize(),clearInterval(this._check),this._check=null)},setSize:function(){this.incorrectOrientation===!1&&(this.maxWidth&&this.width>this.maxWidth&&(this.width=this.maxWidth),this.maxHeight&&this.height>this.maxHeight&&(this.height=this.maxHeight),this.minWidth&&this.width<this.minWidth&&(this.width=this.minWidth),this.minHeight&&this.height<this.minHeight&&(this.height=this.minHeight)),this.game.canvas.style.width=this.width+"px",this.game.canvas.style.height=this.height+"px",this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.pageAlignHorizontally&&(this.width<window.innerWidth&&this.incorrectOrientation===!1?(this.margin.x=Math.round((window.innerWidth-this.width)/2),this.game.canvas.style.marginLeft=this.margin.x+"px"):(this.margin.x=0,this.game.canvas.style.marginLeft="0px")),this.pageAlignVertically&&(this.height<window.innerHeight&&this.incorrectOrientation===!1?(this.margin.y=Math.round((window.innerHeight-this.height)/2),this.game.canvas.style.marginTop=this.margin.y+"px"):(this.margin.y=0,this.game.canvas.style.marginTop="0px")),n.Canvas.getOffset(this.game.canvas,this.game.stage.offset),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.hasResized.dispatch(this.width,this.height),this.checkOrientationState()},setMaximum:function(){this.width=window.innerWidth,this.height=window.innerHeight},setShowAll:function(){var t=Math.min(window.innerHeight/this.game.height,window.innerWidth/this.game.width);this.width=Math.round(this.game.width*t),this.height=Math.round(this.game.height*t)},setExactFit:function(){var t=window.innerWidth,e=window.innerHeight;this.width=this.maxWidth&&t>this.maxWidth?this.maxWidth:t,this.height=this.maxHeight&&e>this.maxHeight?this.maxHeight:e}},Object.defineProperty(n.StageScaleMode.prototype,"isFullScreen",{get:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(n.StageScaleMode.prototype,"isPortrait",{get:function(){return 0===this.orientation||180==this.orientation}}),Object.defineProperty(n.StageScaleMode.prototype,"isLandscape",{get:function(){return 90===this.orientation||-90===this.orientation}}),n.Device=function(){this.patchAndroidClearRectBug=!1,this.desktop=!1,this.iOS=!1,this.cocoonJS=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.canvas=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.webGL=!1,this.worker=!1,this.touch=!1,this.mspointer=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.arora=!1,this.chrome=!1,this.epiphany=!1,this.firefox=!1,this.ie=!1,this.ieVersion=0,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.webApp=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this._checkAudio(),this._checkBrowser(),this._checkCSS3D(),this._checkDevice(),this._checkFeatures(),this._checkOS()},n.Device.prototype={_checkOS:function(){var t=navigator.userAgent;/Android/.test(t)?this.android=!0:/CrOS/.test(t)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?this.iOS=!0:/Linux/.test(t)?this.linux=!0:/Mac OS/.test(t)?this.macOS=!0:/Windows/.test(t)&&(this.windows=!0),(this.windows||this.macOS||this.linux)&&(this.desktop=!0)},_checkFeatures:function(){this.canvas=!!window.CanvasRenderingContext2D;
try{this.localStorage=!!localStorage.getItem}catch(t){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),this.webGL=null===this.webGL||this.webGL===!1?!1:!0,this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>1)&&(this.touch=!0),(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(this.mspointer=!0),this.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document},_checkBrowser:function(){var t=navigator.userAgent;/Arora/.test(t)?this.arora=!0:/Chrome/.test(t)?this.chrome=!0:/Epiphany/.test(t)?this.epiphany=!0:/Firefox/.test(t)?this.firefox=!0:/Mobile Safari/.test(t)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?this.midori=!0:/Opera/.test(t)?this.opera=!0:/Safari/.test(t)&&(this.safari=!0),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0)},_checkAudio:function(){this.audioData=!!window.Audio,this.webAudio=!(!window.webkitAudioContext&&!window.AudioContext);var t=document.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")&&(this.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(this.webm=!0))}catch(i){}},_checkDevice:function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPhone4=2==this.pixelRatio&&this.iPhone,this.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),"undefined"!=typeof Int8Array?(this.littleEndian=new Int8Array(new Int16Array([1]).buffer)[0]>0,this.typedArray=!0):(this.littleEndian=!1,this.typedArray=!1)},_checkCSS3D:function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var n in i)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[n]));document.body.removeChild(e),this.css3D=void 0!==t&&t.length>0&&"none"!==t},canPlayAudio:function(t){return"mp3"==t&&this.mp3?!0:"ogg"==t&&(this.ogg||this.opus)?!0:"m4a"==t&&this.m4a?!0:"wav"==t&&this.wav?!0:"webm"==t&&this.webm?!0:!1},isConsoleOpen:function(){return window.console&&window.console.firebug?!0:window.console?(console.profile(),console.profileEnd(),console.clear&&console.clear(),console.profiles.length>0):!1}},n.RequestAnimationFrame=function(t){this.game=t,this.isRunning=!1;for(var e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;i++)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null},n.RequestAnimationFrame.prototype={start:function(){this.isRunning=!0;var t=this;window.requestAnimationFrame?(this._isSetTimeOut=!1,this._onLoop=function(e){return t.updateRAF(e)},this._timeOutID=window.requestAnimationFrame(this._onLoop)):(this._isSetTimeOut=!0,this._onLoop=function(){return t.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0))},updateRAF:function(t){this.game.update(t),this._timeOutID=window.requestAnimationFrame(this._onLoop)},updateSetTimeout:function(){this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall)},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return this._isSetTimeOut===!1}},n.RandomDataGenerator=function(t){"undefined"==typeof t&&(t=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.sow(t)},n.RandomDataGenerator.prototype={rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},sow:function(t){"undefined"==typeof t&&(t=[]),this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1;for(var e,i=0;e=t[i++];)this.s0-=this.hash(e),this.s0+=~~(this.s0<0),this.s1-=this.hash(e),this.s1+=~~(this.s1<0),this.s2-=this.hash(e),this.s2+=~~(this.s2<0)},hash:function(t){var e,i,n;for(n=4022871197,t=t.toString(),i=0;i<t.length;i++)n+=t.charCodeAt(i),e=.02519603282416938*n,n=e>>>0,e-=n,e*=n,n=e>>>0,e-=n,n+=4294967296*e;return 2.3283064365386963e-10*(n>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+1.1102230246251565e-16*(0|2097152*this.rnd.apply(this))},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(t,e))},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|4&3*t?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length)]},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*t.length)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)}},n.Math={PI2:2*Math.PI,fuzzyEqual:function(t,e,i){return"undefined"==typeof i&&(i=1e-4),Math.abs(t-e)<i},fuzzyLessThan:function(t,e,i){return"undefined"==typeof i&&(i=1e-4),e+i>t},fuzzyGreaterThan:function(t,e,i){return"undefined"==typeof i&&(i=1e-4),t>e-i},fuzzyCeil:function(t,e){return"undefined"==typeof e&&(e=1e-4),Math.ceil(t-e)},fuzzyFloor:function(t,e){return"undefined"==typeof e&&(e=1e-4),Math.floor(t+e)},average:function(){for(var t=[],e=0;e<arguments.length-0;e++)t[e]=arguments[e+0];for(var i=0,n=0;n<t.length;n++)i+=t[n];return i/t.length},truncate:function(t){return t>0?Math.floor(t):Math.ceil(t)},shear:function(t){return t%1},snapTo:function(t,e,i){return"undefined"==typeof i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),i+t)},snapToFloor:function(t,e,i){return"undefined"==typeof i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),i+t)},snapToCeil:function(t,e,i){return"undefined"==typeof i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),i+t)},snapToInArray:function(t,e,i){if("undefined"==typeof i&&(i=!0),i&&e.sort(),t<e[0])return e[0];for(var n=1;e[n]<t;)n++;var r=e[n-1],s=n<e.length?e[n]:Number.POSITIVE_INFINITY;return t-r>=s-t?s:r},roundTo:function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.round(t*n)/n},floorTo:function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.floor(t*n)/n},ceilTo:function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.ceil(t*n)/n},interpolateFloat:function(t,e,i){return(e-t)*i+t},angleBetween:function(t,e,i,n){return Math.atan2(n-e,i-t)},normalizeAngle:function(t,e){"undefined"==typeof e&&(e=!0);var i=e?Math.PI:180;return this.wrap(t,-i,i)},nearestAngleBetween:function(t,e,i){"undefined"==typeof i&&(i=!0);var n=i?Math.PI:180;return t=this.normalizeAngle(t,i),e=this.normalizeAngle(e,i),-n/2>t&&e>n/2&&(t+=2*n),-n/2>e&&t>n/2&&(e+=2*n),e-t},interpolateAngles:function(t,e,i,n,r){return"undefined"==typeof n&&(n=!0),"undefined"==typeof r&&(r=null),t=this.normalizeAngle(t,n),e=this.normalizeAngleToAnother(e,t,n),"function"==typeof r?r(i,t,e-t,1):this.interpolateFloat(t,e,i)},chanceRoll:function(t){return"undefined"==typeof t&&(t=50),0>=t?!1:t>=100?!0:100*Math.random()>=t?!1:!0},numberArray:function(t,e){for(var i=[],n=t;e>=n;n++)i.push(n);return i},maxAdd:function(t,e,i){return t+=e,t>i&&(t=i),t},minSub:function(t,e,i){return t-=e,i>t&&(t=i),t},wrap:function(t,e,i){var n=i-e;if(0>=n)return 0;var r=(t-e)%n;return 0>r&&(r+=n),r+e},wrapValue:function(t,e,i){var n;return t=Math.abs(t),e=Math.abs(e),i=Math.abs(i),n=(t+e)%i},randomSign:function(){return Math.random()>.5?1:-1},isOdd:function(t){return 1&t},isEven:function(t){return 1&t?!1:!0},max:function(){for(var t=1,e=0,i=arguments.length;i>t;t++)arguments[e]<arguments[t]&&(e=t);return arguments[e]},min:function(){for(var t=1,e=0,i=arguments.length;i>t;t++)arguments[t]<arguments[e]&&(e=t);return arguments[e]},wrapAngle:function(t){return this.wrap(t,-180,180)},angleLimit:function(t,e,i){var n=t;return t>i?n=i:e>t&&(n=e),n},linearInterpolation:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n);return 0>e?this.linear(t[0],t[1],n):e>1?this.linear(t[i],t[i-1],i-n):this.linear(t[r],t[r+1>i?i:r+1],n-r)},bezierInterpolation:function(t,e){for(var i=0,n=t.length-1,r=0;n>=r;r++)i+=Math.pow(1-e,n-r)*Math.pow(e,r)*t[r]*this.bernstein(n,r);return i},catmullRomInterpolation:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n);return t[0]===t[i]?(0>e&&(r=Math.floor(n=i*(1+e))),this.catmullRom(t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],n-r)):0>e?t[0]-(this.catmullRom(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(this.catmullRom(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):this.catmullRom(t[r?r-1:0],t[r],t[r+1>i?i:r+1],t[r+2>i?i:r+2],n-r)},linear:function(t,e,i){return(e-t)*i+t},bernstein:function(t,e){return this.factorial(t)/this.factorial(e)/this.factorial(t-e)},catmullRom:function(t,e,i,n,r){var s=.5*(i-t),o=.5*(n-e),a=r*r,h=r*a;return(2*e-2*i+s+o)*h+(-3*e+3*i-2*s-o)*a+s*r+e},difference:function(t,e){return Math.abs(t-e)},getRandom:function(t,e,i){if("undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),null!=t){var n=i;if((0===n||n>t.length-e)&&(n=t.length-e),n>0)return t[e+Math.floor(Math.random()*n)]}return null},floor:function(t){var e=0|t;return t>0?e:e!=t?e-1:e},ceil:function(t){var e=0|t;return t>0?e!=t?e+1:e:e},sinCosGenerator:function(t,e,i,n){"undefined"==typeof e&&(e=1),"undefined"==typeof i&&(i=1),"undefined"==typeof n&&(n=1);for(var r=e,s=i,o=n*Math.PI/t,a=[],h=[],l=0;t>l;l++)s-=r*o,r+=s*o,a[l]=s,h[l]=r;return{sin:h,cos:a,length:t}},shift:function(t){var e=t.shift();return t.push(e),e},shuffleArray:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},distance:function(t,e,i,n){var r=t-i,s=e-n;return Math.sqrt(r*r+s*s)},distanceRounded:function(t,e,i,r){return Math.round(n.Math.distance(t,e,i,r))},clamp:function(t,e,i){return e>t?e:t>i?i:t},clampBottom:function(t,e){return e>t?e:t},within:function(t,e,i){return Math.abs(t-e)<=i},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},smoothstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},sign:function(t){return 0>t?-1:t>0?1:0},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}()},n.QuadTree=function(t,e,i,n,r,s,o,a){this.physicsManager=t,this.ID=t.quadTreeID,t.quadTreeID++,this.maxObjects=s||10,this.maxLevels=o||4,this.level=a||0,this.bounds={x:Math.round(e),y:Math.round(i),width:n,height:r,subWidth:Math.floor(n/2),subHeight:Math.floor(r/2),right:Math.round(e)+Math.floor(n/2),bottom:Math.round(i)+Math.floor(r/2)},this.objects=[],this.nodes=[]},n.QuadTree.prototype={split:function(){this.level++,this.nodes[0]=new n.QuadTree(this.physicsManager,this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[1]=new n.QuadTree(this.physicsManager,this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[2]=new n.QuadTree(this.physicsManager,this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[3]=new n.QuadTree(this.physicsManager,this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level)},insert:function(t){var e,i=0;if(null!=this.nodes[0]&&(e=this.getIndex(t),-1!==e))return this.nodes[e].insert(t),void 0;if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels)for(null==this.nodes[0]&&this.split();i<this.objects.length;)e=this.getIndex(this.objects[i]),-1!==e?this.nodes[e].insert(this.objects.splice(i,1)[0]):i++},getIndex:function(t){var e=-1;return t.x<this.bounds.right&&t.right<this.bounds.right?t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom?e=1:t.y>this.bounds.bottom&&(e=2):t.x>this.bounds.right&&(t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom?e=0:t.y>this.bounds.bottom&&(e=3)),e},retrieve:function(t){var e=this.objects;return t.body.quadTreeIndex=this.getIndex(t.body),t.body.quadTreeIDs.push(this.ID),this.nodes[0]&&(-1!==t.body.quadTreeIndex?e=e.concat(this.nodes[t.body.quadTreeIndex].retrieve(t)):(e=e.concat(this.nodes[0].retrieve(t)),e=e.concat(this.nodes[1].retrieve(t)),e=e.concat(this.nodes[2].retrieve(t)),e=e.concat(this.nodes[3].retrieve(t)))),e},clear:function(){this.objects=[];for(var t=0,e=this.nodes.length;e>t;t++)this.nodes[t]&&(this.nodes[t].clear(),delete this.nodes[t])}},n.Circle=function(t,e,i){t=t||0,e=e||0,i=i||0,this.x=t,this.y=e,this._diameter=i,this._radius=i>0?.5*i:0},n.Circle.prototype={circumference:function(){return 2*Math.PI*this._radius},setTo:function(t,e,i){return this.x=t,this.y=e,this._diameter=i,this._radius=.5*i,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.diameter)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.diameter=this._diameter,t},distance:function(t,e){return"undefined"==typeof e&&(e=!1),e?n.Math.distanceRound(this.x,this.y,t.x,t.y):n.Math.distance(this.x,this.y,t.x,t.y)},clone:function(t){return"undefined"==typeof t&&(t=new n.Circle),t.setTo(this.x,this.y,this.diameter)},contains:function(t,e){return n.Circle.contains(this,t,e)},circumferencePoint:function(t,e,i){return n.Circle.circumferencePoint(this,t,e,i)},offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},toString:function(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},Object.defineProperty(n.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(t){t>0&&(this._diameter=t,this._radius=.5*t)}}),Object.defineProperty(n.Circle.prototype,"radius",{get:function(){return this._radius},set:function(t){t>0&&(this._radius=t,this._diameter=2*t)}}),Object.defineProperty(n.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){t>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-t}}),Object.defineProperty(n.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){t<this.x?(this._radius=0,this._diameter=0):this.radius=t-this.x}}),Object.defineProperty(n.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t}}),Object.defineProperty(n.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y}}),Object.defineProperty(n.Circle.prototype,"area",{get:function(){return this._radius>0?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(n.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(t){t===!0&&this.setTo(0,0,0)}}),n.Circle.contains=function(t,e,i){if(e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom){var n=(t.x-e)*(t.x-e),r=(t.y-i)*(t.y-i);return n+r<=t.radius*t.radius}return!1},n.Circle.equals=function(t,e){return t.x==e.x&&t.y==e.y&&t.diameter==e.diameter},n.Circle.intersects=function(t,e){return n.Math.distance(t.x,t.y,e.x,e.y)<=t.radius+e.radius},n.Circle.circumferencePoint=function(t,e,i,r){return"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=new n.Point),i===!0&&(e=n.Math.radToDeg(e)),r.x=t.x+t.radius*Math.cos(e),r.y=t.y+t.radius*Math.sin(e),r},n.Circle.intersectsRectangle=function(t,e){var i=Math.abs(t.x-e.x-e.halfWidth),n=e.halfWidth+t.radius;if(i>n)return!1;var r=Math.abs(t.y-e.y-e.halfHeight),s=e.halfHeight+t.radius;if(r>s)return!1;if(i<=e.halfWidth||r<=e.halfHeight)return!0;var o=i-e.halfWidth,a=r-e.halfHeight,h=o*o,l=a*a,u=t.radius*t.radius;return u>=h+l},n.Point=function(t,e){t=t||0,e=e||0,this.x=t,this.y=e},n.Point.prototype={copyFrom:function(t){return this.setTo(t.x,t.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(t,e){return this.x=t,this.y=e,this},add:function(t,e){return this.x+=t,this.y+=e,this},subtract:function(t,e){return this.x-=t,this.y-=e,this},multiply:function(t,e){return this.x*=t,this.y*=e,this},divide:function(t,e){return this.x/=t,this.y/=e,this},clampX:function(t,e){return this.x=n.Math.clamp(this.x,t,e),this},clampY:function(t,e){return this.y=n.Math.clamp(this.y,t,e),this},clamp:function(t,e){return this.x=n.Math.clamp(this.x,t,e),this.y=n.Math.clamp(this.y,t,e),this},clone:function(t){return"undefined"==typeof t&&(t=new n.Point),t.setTo(this.x,this.y)},copyTo:function(t){return t.x=this.x,t.y=this.y,t},distance:function(t,e){return n.Point.distance(this,t,e)},equals:function(t){return t.x==this.x&&t.y==this.y},rotate:function(t,e,i,r,s){return n.Point.rotate(this,t,e,i,r,s)},getMagnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setMagnitude:function(t){return this.normalize().multiply(t,t)},normalize:function(){if(!this.isZero()){var t=this.getMagnitude();this.x/=t,this.y/=t}return this},isZero:function(){return 0===this.x&&0===this.y},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},n.Point.add=function(t,e,i){return"undefined"==typeof i&&(i=new n.Point),i.x=t.x+e.x,i.y=t.y+e.y,i},n.Point.subtract=function(t,e,i){return"undefined"==typeof i&&(i=new n.Point),i.x=t.x-e.x,i.y=t.y-e.y,i},n.Point.multiply=function(t,e,i){return"undefined"==typeof i&&(i=new n.Point),i.x=t.x*e.x,i.y=t.y*e.y,i},n.Point.divide=function(t,e,i){return"undefined"==typeof i&&(i=new n.Point),i.x=t.x/e.x,i.y=t.y/e.y,i},n.Point.equals=function(t,e){return t.x==e.x&&t.y==e.y},n.Point.distance=function(t,e,i){return"undefined"==typeof i&&(i=!1),i?n.Math.distanceRound(t.x,t.y,e.x,e.y):n.Math.distance(t.x,t.y,e.x,e.y)},n.Point.rotate=function(t,e,i,r,s,o){return s=s||!1,o=o||null,s&&(r=n.Math.degToRad(r)),null===o&&(o=Math.sqrt((e-t.x)*(e-t.x)+(i-t.y)*(i-t.y))),t.setTo(e+o*Math.cos(r),i+o*Math.sin(r))},n.Rectangle=function(t,e,i,n){t=t||0,e=e||0,i=i||0,n=n||0,this.x=t,this.y=e,this.width=i,this.height=n},n.Rectangle.prototype={offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},inflate:function(t,e){return n.Rectangle.inflate(this,t,e)},size:function(t){return n.Rectangle.size(this,t)},clone:function(t){return n.Rectangle.clone(this,t)},contains:function(t,e){return n.Rectangle.contains(this,t,e)},containsRect:function(t){return n.Rectangle.containsRect(this,t)},equals:function(t){return n.Rectangle.equals(this,t)},intersection:function(t,e){return n.Rectangle.intersection(this,t,e)},intersects:function(t,e){return n.Rectangle.intersects(this,t,e)},intersectsRaw:function(t,e,i,r,s){return n.Rectangle.intersectsRaw(this,t,e,i,r,s)},union:function(t,e){return n.Rectangle.union(this,t,e)},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(n.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(n.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(n.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t<=this.y?0:this.y-t}}),Object.defineProperty(n.Rectangle.prototype,"bottomRight",{get:function(){return new n.Point(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y}}),Object.defineProperty(n.Rectangle.prototype,"left",{get:function(){return this.x},set:function(t){this.width=t>=this.right?0:this.right-t,this.x=t}}),Object.defineProperty(n.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t<=this.x?0:this.x+t}}),Object.defineProperty(n.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(n.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(n.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(t){this.x=t-this.halfWidth}}),Object.defineProperty(n.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(t){this.y=t-this.halfHeight}}),Object.defineProperty(n.Rectangle.prototype,"top",{get:function(){return this.y},set:function(t){t>=this.bottom?(this.height=0,this.y=t):this.height=this.bottom-t}}),Object.defineProperty(n.Rectangle.prototype,"topLeft",{get:function(){return new n.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}}),Object.defineProperty(n.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(t){t===!0&&this.setTo(0,0,0,0)}}),n.Rectangle.inflate=function(t,e,i){return t.x-=e,t.width+=2*e,t.y-=i,t.height+=2*i,t},n.Rectangle.inflatePoint=function(t,e){return n.Rectangle.inflate(t,e.x,e.y)},n.Rectangle.size=function(t,e){return"undefined"==typeof e&&(e=new n.Point),e.setTo(t.width,t.height)},n.Rectangle.clone=function(t,e){return"undefined"==typeof e&&(e=new n.Rectangle),e.setTo(t.x,t.y,t.width,t.height)},n.Rectangle.contains=function(t,e,i){return e>=t.x&&e<=t.right&&i>=t.y&&i<=t.bottom},n.Rectangle.containsRaw=function(t,e,i,n,r,s){return r>=t&&t+i>=r&&s>=e&&e+n>=s},n.Rectangle.containsPoint=function(t,e){return n.Rectangle.contains(t,e.x,e.y)},n.Rectangle.containsRect=function(t,e){return t.volume>e.volume?!1:t.x>=e.x&&t.y>=e.y&&t.right<=e.right&&t.bottom<=e.bottom},n.Rectangle.equals=function(t,e){return t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height},n.Rectangle.intersection=function(t,e,i){return i=i||new n.Rectangle,n.Rectangle.intersects(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i},n.Rectangle.intersects=function(t,e){return t.x<e.right&&e.x<t.right&&t.y<e.bottom&&e.y<t.bottom},n.Rectangle.intersectsRaw=function(t,e,i,n,r,s){return"undefined"==typeof s&&(s=0),!(e>t.right+s||i<t.left-s||n>t.bottom+s||r<t.top-s)},n.Rectangle.union=function(t,e,i){return"undefined"==typeof i&&(i=new n.Rectangle),i.setTo(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.right,e.right)-Math.min(t.left,e.left),Math.max(t.bottom,e.bottom)-Math.min(t.top,e.top))},n.Polygon=function(t){i.Polygon.call(this,t),this.type=n.POLYGON},n.Polygon.prototype=Object.create(i.Polygon.prototype),n.Polygon.prototype.constructor=n.Polygon,n.Net=function(t){this.game=t},n.Net.prototype={getHostName:function(){return window.location&&window.location.hostname?window.location.hostname:null},checkDomainName:function(t){return-1!==window.location.hostname.indexOf(t)},updateQueryString:function(t,e,i,n){"undefined"==typeof i&&(i=!1),("undefined"==typeof n||""===n)&&(n=window.location.href);var r="",s=new RegExp("([?|&])"+t+"=.*?(&|#|$)(.*)","gi");if(s.test(n))r="undefined"!=typeof e&&null!==e?n.replace(s,"$1"+t+"="+e+"$2$3"):n.replace(s,"$1$3").replace(/(&|\?)$/,"");else if("undefined"!=typeof e&&null!==e){var o=-1!==n.indexOf("?")?"&":"?",a=n.split("#");n=a[0]+o+t+"="+e,a[1]&&(n+="#"+a[1]),r=n}else r=n;return i?(window.location.href=r,void 0):r},getQueryString:function(t){"undefined"==typeof t&&(t="");var e={},i=location.search.substring(1).split("&");for(var n in i){var r=i[n].split("=");if(r.length>1){if(t&&t==this.decodeURI(r[0]))return this.decodeURI(r[1]);e[this.decodeURI(r[0])]=this.decodeURI(r[1])}}return e},decodeURI:function(t){return decodeURIComponent(t.replace(/\+/g," "))}},n.TweenManager=function(t){this.game=t,this._tweens=[],this._add=[],this.game.onPause.add(this.pauseAll,this),this.game.onResume.add(this.resumeAll,this)},n.TweenManager.prototype={REVISION:"11dev",getAll:function(){return this._tweens},removeAll:function(){this._tweens=[]},add:function(t){this._add.push(t)},create:function(t){return new n.Tween(t,this.game)},remove:function(t){var e=this._tweens.indexOf(t);-1!==e&&(this._tweens[e].pendingDelete=!0)},update:function(){if(0===this._tweens.length&&0===this._add.length)return!1;for(var t=0,e=this._tweens.length;e>t;)this._tweens[t].update(this.game.time.now)?t++:(this._tweens.splice(t,1),e--);return this._add.length>0&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(t){return this._tweens.some(function(e){return e._object===t})},pauseAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t].pause()},resumeAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t].resume()}},n.Tween=function(t,e){this._object=t,this.game=e,this._manager=this.game.tweens,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._yoyo=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=n.Easing.Linear.None,this._interpolationFunction=n.Math.linearInterpolation,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._pausedTime=0,this.pendingDelete=!1;for(var i in t)this._valuesStart[i]=parseFloat(t[i],10);this.onStart=new n.Signal,this.onComplete=new n.Signal,this.isRunning=!1},n.Tween.prototype={to:function(t,e,i,n,r,s,o){e=e||1e3,i=i||null,n=n||!1,r=r||0,s=s||0,o=o||!1;var a;return this._parent?(a=this._manager.create(this._object),this._lastChild.chain(a),this._lastChild=a):(a=this,this._parent=this,this._lastChild=this),a._repeat=s,a._duration=e,a._valuesEnd=t,null!==i&&(a._easingFunction=i),r>0&&(a._delayTime=r),a._yoyo=o,n?this.start():this},start:function(){if(null!==this.game&&null!==this._object){this._manager.add(this),this.onStart.dispatch(this._object),this.isRunning=!0,this._onStartCallbackFired=!1,this._startTime=this.game.time.now+this._delayTime;for(var t in this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==0&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0}return this}},stop:function(){return this.isRunning=!1,this._manager.remove(this),this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},loop:function(){return this._lastChild.chain(this),this},onStartCallback:function(t){return this._onStartCallback=t,this},onUpdateCallback:function(t){return this._onUpdateCallback=t,this},onCompleteCallback:function(t){return this._onCompleteCallback=t,this},pause:function(){this._paused=!0,this._pausedTime=this.game.time.now},resume:function(){this._paused=!1,this._startTime+=this.game.time.now-this._pausedTime},update:function(t){if(this.pendingDelete)return!1;if(this._paused||t<this._startTime)return!0;var e;if(t<this._startTime)return!0;this._onStartCallbackFired===!1&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object),this._onStartCallbackFired=!0);var i=(t-this._startTime)/this._duration;i=i>1?1:i;var n=this._easingFunction(i);for(e in this._valuesEnd){var r=this._valuesStart[e]||0,s=this._valuesEnd[e];s instanceof Array?this._object[e]=this._interpolationFunction(s,n):("string"==typeof s&&(s=r+parseFloat(s,10)),"number"==typeof s&&(this._object[e]=r+(s-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,n),1==i){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(e in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e],10)),this._yoyo){var o=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=o,this._reversed=!this._reversed}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._startTime=t+this._delayTime,this.onComplete.dispatch(this._object),null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object),!0}this.isRunning=!1,this.onComplete.dispatch(this._object),null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object);for(var a=0,h=this._chainedTweens.length;h>a;a++)this._chainedTweens[a].start(t);return!1}return!0}},n.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)))},Out:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/n)+1)},InOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n):.5*i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-n.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*n.Easing.Bounce.In(2*t):.5*n.Easing.Bounce.Out(2*t-1)+.5}}},n.Time=function(t){this.game=t,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this.physicsElapsed=0,this.time=0,this.pausedTime=0,this.now=0,this.elapsed=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.frames=0,this.pauseDuration=0,this.timeToCall=0,this.lastTime=0,this.game.onPause.add(this.gamePaused,this),this.game.onResume.add(this.gameResumed,this),this._justResumed=!1},n.Time.prototype={update:function(t){this.now=t,this._justResumed&&(this.time=this.now,this._justResumed=!1),this.timeToCall=this.game.math.max(0,16-(t-this.lastTime)),this.elapsed=this.now-this.time,this.msMin=this.game.math.min(this.msMin,this.elapsed),this.msMax=this.game.math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=this.game.math.min(this.fpsMin,this.fps),this.fpsMax=this.game.math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0),this.time=this.now,this.lastTime=t+this.timeToCall,this.physicsElapsed=1*(this.elapsed/1e3),this.physicsElapsed>1&&(this.physicsElapsed=1),this.game.paused&&(this.pausedTime=this.now-this._pauseStarted)
},gamePaused:function(){this._pauseStarted=this.now},gameResumed:function(){this.time=Date.now(),this.pauseDuration=this.pausedTime,this._justResumed=!0},totalElapsedSeconds:function(){return.001*(this.now-this._started)},elapsedSince:function(t){return this.now-t},elapsedSecondsSince:function(t){return.001*(this.now-t)},reset:function(){this._started=this.now}},n.Timer=function(t){this.game=t,this._started=0,this._timeLastSecond=0,this.running=!1,this.events=[],this.onEvent=new n.Signal},n.Timer.prototype={add:function(t){this.events.push({delay:t,dispatched:!1,args:Array.prototype.splice.call(arguments,1)})},start:function(){this._started=this.game.time.now,this.running=!0},stop:function(){this.running=!1,this.events.length=0},update:function(){if(this.running)for(var t=this.seconds(),e=0,i=this.events.length;i>e;e++)this.events[e].dispatched===!1&&t>=this.events[e].delay&&(this.events[e].dispatched=!0,this.onEvent.dispatch.apply(this,this.events[e].args))},seconds:function(){return.001*(this.game.time.now-this._started)}},n.AnimationManager=function(t){this.sprite=t,this.game=t.game,this.currentFrame=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]},n.AnimationManager.prototype={loadFrameData:function(t){this._frameData=t,this.frame=0,this.isLoaded=!0},add:function(t,e,r,s,o){return null==this._frameData?(console.warn("No FrameData available for Phaser.Animation "+t),void 0):(r=r||60,"undefined"==typeof s&&(s=!1),"undefined"==typeof o&&(o=e&&"number"==typeof e[0]?!0:!1),null==this.sprite.events.onAnimationStart&&(this.sprite.events.onAnimationStart=new n.Signal,this.sprite.events.onAnimationComplete=new n.Signal,this.sprite.events.onAnimationLoop=new n.Signal),this._outputFrames.length=0,this._frameData.getFrameIndexes(e,o,this._outputFrames),this._anims[t]=new n.Animation(this.game,this.sprite,t,this._frameData,this._outputFrames,r,s),this.currentAnim=this._anims[t],this.currentFrame=this.currentAnim.currentFrame,this.sprite.setTexture(i.TextureCache[this.currentFrame.uuid]),this._anims[t])},validateFrames:function(t,e){"undefined"==typeof e&&(e=!0);for(var i=0;i<t.length;i++)if(e===!0){if(t[i]>this._frameData.total)return!1}else if(this._frameData.checkFrameName(t[i])===!1)return!1;return!0},play:function(t,e,i,n){if(this._anims[t]){if(this.currentAnim!=this._anims[t])return this.currentAnim=this._anims[t],this.currentAnim.paused=!1,this.currentAnim.play(e,i,n);if(this.currentAnim.isPlaying===!1)return this.currentAnim.paused=!1,this.currentAnim.play(e,i,n)}},stop:function(t,e){"undefined"==typeof e&&(e=!1),"string"==typeof t?this._anims[t]&&(this.currentAnim=this._anims[t],this.currentAnim.stop(e)):this.currentAnim&&this.currentAnim.stop(e)},update:function(){return this.updateIfVisible&&this.sprite.visible===!1?!1:this.currentAnim&&this.currentAnim.update()===!0?(this.currentFrame=this.currentAnim.currentFrame,this.sprite.currentFrame=this.currentFrame,!0):!1},getAnimation:function(t){return"string"==typeof t&&this._anims[t]?this._anims[t]:!1},refreshFrame:function(){this.sprite.currentFrame=this.currentFrame,this.sprite.setTexture(i.TextureCache[this.currentFrame.uuid])},destroy:function(){this._anims={},this._frameData=null,this._frameIndex=0,this.currentAnim=null,this.currentFrame=null}},Object.defineProperty(n.AnimationManager.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(n.AnimationManager.prototype,"frameTotal",{get:function(){return this._frameData?this._frameData.total:-1}}),Object.defineProperty(n.AnimationManager.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(t){this.currentAnim.paused=t}}),Object.defineProperty(n.AnimationManager.prototype,"frame",{get:function(){return this.currentFrame?this._frameIndex:void 0},set:function(t){"number"==typeof t&&this._frameData&&null!==this._frameData.getFrame(t)&&(this.currentFrame=this._frameData.getFrame(t),this._frameIndex=t,this.sprite.currentFrame=this.currentFrame,this.sprite.setTexture(i.TextureCache[this.currentFrame.uuid]))}}),Object.defineProperty(n.AnimationManager.prototype,"frameName",{get:function(){return this.currentFrame?this.currentFrame.name:void 0},set:function(t){"string"==typeof t&&this._frameData&&null!==this._frameData.getFrameByName(t)?(this.currentFrame=this._frameData.getFrameByName(t),this._frameIndex=this.currentFrame.index,this.sprite.currentFrame=this.currentFrame,this.sprite.setTexture(i.TextureCache[this.currentFrame.uuid])):console.warn("Cannot set frameName: "+t)}}),n.Animation=function(t,e,i,n,r,s,o){this.game=t,this._parent=e,this._frameData=n,this.name=i,this._frames=[],this._frames=this._frames.concat(r),this.delay=1e3/s,this.looped=o,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex])},n.Animation.prototype={play:function(t,e,n){return"number"==typeof t&&(this.delay=1e3/t),"boolean"==typeof e&&(this.looped=e),"undefined"!=typeof n&&(this.killOnComplete=n),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this._timeLastFrame=this.game.time.now,this._timeNextFrame=this.game.time.now+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._parent.setTexture(i.TextureCache[this.currentFrame.uuid]),this._parent.events&&this._parent.events.onAnimationStart.dispatch(this._parent,this),this},restart:function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this._timeLastFrame=this.game.time.now,this._timeNextFrame=this.game.time.now+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex])},stop:function(t){"undefined"==typeof t&&(t=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,t&&(this.currentFrame=this._frameData.getFrame(this._frames[0]))},update:function(){return this.isPaused?!1:this.isPlaying===!0&&this.game.time.now>=this._timeNextFrame?(this._frameSkip=1,this._frameDiff=this.game.time.now-this._timeNextFrame,this._timeLastFrame=this.game.time.now,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.time.now+(this.delay-this._frameDiff),this._frameIndex+=this._frameSkip,this._frameIndex>=this._frames.length?this.looped?(this._frameIndex%=this._frames.length,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this._parent.setTexture(i.TextureCache[this.currentFrame.uuid]),this._parent.events.onAnimationLoop.dispatch(this._parent,this)):this.onComplete():(this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this._parent.setTexture(i.TextureCache[this.currentFrame.uuid])),!0):!1},destroy:function(){this.game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1},onComplete:function(){this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this._parent.events&&this._parent.events.onAnimationComplete.dispatch(this._parent,this),this.killOnComplete&&this._parent.kill()}},Object.defineProperty(n.Animation.prototype,"paused",{get:function(){return this.isPaused},set:function(t){this.isPaused=t,t?this._pauseStartTime=this.game.time.now:this.isPlaying&&(this._timeNextFrame=this.game.time.now+this.delay)}}),Object.defineProperty(n.Animation.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(n.Animation.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(t){this.currentFrame=this._frameData.getFrame(t),null!==this.currentFrame&&(this._frameIndex=t,this._parent.setTexture(i.TextureCache[this.currentFrame.uuid]))}}),n.Animation.generateFrameNames=function(t,e,i,r,s){"undefined"==typeof r&&(r="");var o=[],a="";if(i>e)for(var h=e;i>=h;h++)a="number"==typeof s?n.Utils.pad(h.toString(),s,"0",1):h.toString(),a=t+a+r,o.push(a);else for(var h=e;h>=i;h--)a="number"==typeof s?n.Utils.pad(h.toString(),s,"0",1):h.toString(),a=t+a+r,o.push(a);return o},n.Frame=function(t,e,i,r,s,o,a){this.index=t,this.x=e,this.y=i,this.width=r,this.height=s,this.name=o,this.uuid=a,this.centerX=Math.floor(r/2),this.centerY=Math.floor(s/2),this.distance=n.Math.distance(0,0,r,s),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=r,this.sourceSizeH=s,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0},n.Frame.prototype={setTrim:function(t,e,i,n,r,s,o){this.trimmed=t,t&&(this.width=e,this.height=i,this.sourceSizeW=e,this.sourceSizeH=i,this.centerX=Math.floor(e/2),this.centerY=Math.floor(i/2),this.spriteSourceSizeX=n,this.spriteSourceSizeY=r,this.spriteSourceSizeW=s,this.spriteSourceSizeH=o)}},n.FrameData=function(){this._frames=[],this._frameNames=[]},n.FrameData.prototype={addFrame:function(t){return t.index=this._frames.length,this._frames.push(t),""!==t.name&&(this._frameNames[t.name]=t.index),t},getFrame:function(t){return this._frames.length>t?this._frames[t]:null},getFrameByName:function(t){return"number"==typeof this._frameNames[t]?this._frames[this._frameNames[t]]:null},checkFrameName:function(t){return null==this._frameNames[t]?!1:!0},getFrameRange:function(t,e,i){"undefined"==typeof i&&(i=[]);for(var n=t;e>=n;n++)i.push(this._frames[n]);return i},getFrames:function(t,e,i){if("undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=[]),"undefined"==typeof t||0===t.length)for(var n=0;n<this._frames.length;n++)i.push(this._frames[n]);else for(var n=0,r=t.length;r>n;n++)e?i.push(this.getFrame(t[n])):i.push(this.getFrameByName(t[n]));return i},getFrameIndexes:function(t,e,i){if("undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=[]),"undefined"==typeof t||0===t.length)for(var n=0,r=this._frames.length;r>n;n++)i.push(this._frames[n].index);else for(var n=0,r=t.length;r>n;n++)e?i.push(t[n]):this.getFrameByName(t[n])&&i.push(this.getFrameByName(t[n]).index);return i}},Object.defineProperty(n.FrameData.prototype,"total",{get:function(){return this._frames.length}}),n.AnimationParser={spriteSheet:function(t,e,r,s,o){var a=t.cache.getImage(e);if(null==a)return null;var h=a.width,l=a.height;0>=r&&(r=Math.floor(-h/Math.min(-1,r))),0>=s&&(s=Math.floor(-l/Math.min(-1,s)));var u=Math.round(h/r),c=Math.round(l/s),d=u*c;if(-1!==o&&(d=o),0===h||0===l||r>h||s>l||0===d)return console.warn("Phaser.AnimationParser.spriteSheet: width/height zero or width/height < given frameWidth/frameHeight"),null;for(var p=new n.FrameData,f=0,m=0,g=0;d>g;g++){var y=t.rnd.uuid();p.addFrame(new n.Frame(g,f,m,r,s,"",y)),i.TextureCache[y]=new i.Texture(i.BaseTextureCache[e],{x:f,y:m,width:r,height:s}),f+=r,f===h&&(f=0,m+=s)}return p},JSONData:function(t,e,r){if(!e.frames)return console.warn("Phaser.AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"),console.log(e),void 0;for(var s,o=new n.FrameData,a=e.frames,h=0;h<a.length;h++){var l=t.rnd.uuid();s=o.addFrame(new n.Frame(h,a[h].frame.x,a[h].frame.y,a[h].frame.w,a[h].frame.h,a[h].filename,l)),i.TextureCache[l]=new i.Texture(i.BaseTextureCache[r],{x:a[h].frame.x,y:a[h].frame.y,width:a[h].frame.w,height:a[h].frame.h}),a[h].trimmed&&(s.setTrim(a[h].trimmed,a[h].sourceSize.w,a[h].sourceSize.h,a[h].spriteSourceSize.x,a[h].spriteSourceSize.y,a[h].spriteSourceSize.w,a[h].spriteSourceSize.h),i.TextureCache[l].trimmed=!0,i.TextureCache[l].trim.x=a[h].spriteSourceSize.x,i.TextureCache[l].trim.y=a[h].spriteSourceSize.y)}return o},JSONDataHash:function(t,e,r){if(!e.frames)return console.warn("Phaser.AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"),console.log(e),void 0;var s,o=new n.FrameData,a=e.frames,h=0;for(var l in a){var u=t.rnd.uuid();s=o.addFrame(new n.Frame(h,a[l].frame.x,a[l].frame.y,a[l].frame.w,a[l].frame.h,l,u)),i.TextureCache[u]=new i.Texture(i.BaseTextureCache[r],{x:a[l].frame.x,y:a[l].frame.y,width:a[l].frame.w,height:a[l].frame.h}),a[l].trimmed&&(s.setTrim(a[l].trimmed,a[l].sourceSize.w,a[l].sourceSize.h,a[l].spriteSourceSize.x,a[l].spriteSourceSize.y,a[l].spriteSourceSize.w,a[l].spriteSourceSize.h),i.TextureCache[u].trimmed=!0,i.TextureCache[u].trim.x=a[l].spriteSourceSize.x,i.TextureCache[u].trim.y=a[l].spriteSourceSize.y),h++}return o},XMLData:function(t,e,r){if(!e.getElementsByTagName("TextureAtlas"))return console.warn("Phaser.AnimationParser.XMLData: Invalid Texture Atlas XML given, missing <TextureAtlas> tag"),void 0;for(var s,o,a,h,l,u,c,d,p,f,m,g,y=new n.FrameData,v=e.getElementsByTagName("SubTexture"),x=0;x<v.length;x++)o=t.rnd.uuid(),h=v[x].attributes,a=h.name.nodeValue,l=parseInt(h.x.nodeValue,10),u=parseInt(h.y.nodeValue,10),c=parseInt(h.width.nodeValue,10),d=parseInt(h.height.nodeValue,10),p=null,f=null,h.frameX&&(p=Math.abs(parseInt(h.frameX.nodeValue,10)),f=Math.abs(parseInt(h.frameY.nodeValue,10)),m=parseInt(h.frameWidth.nodeValue,10),g=parseInt(h.frameHeight.nodeValue,10)),s=y.addFrame(new n.Frame(x,l,u,c,d,a,o)),i.TextureCache[o]=new i.Texture(i.BaseTextureCache[r],{x:l,y:u,width:c,height:d}),(null!==p||null!==f)&&(s.setTrim(!0,c,d,p,f,m,g),i.TextureCache[o].realSize={x:p,y:f,w:m,h:g},i.TextureCache[o].trimmed=!0,i.TextureCache[o].trim.x=p,i.TextureCache[o].trim.y=f);return y}},n.Cache=function(t){this.game=t,this._canvases={},this._images={},this._textures={},this._sounds={},this._text={},this._tilemaps={},this._tilesets={},this._bitmapDatas={},this.addDefaultImage(),this.addMissingImage(),this.onSoundUnlock=new n.Signal},n.Cache.prototype={addCanvas:function(t,e,i){this._canvases[t]={canvas:e,context:i}},addBitmapData:function(t,e){return this._bitmapDatas[t]=e,e},addRenderTexture:function(t,e){var i=new n.Frame(0,0,0,e.width,e.height,"","");this._textures[t]={texture:e,frame:i}},addSpriteSheet:function(t,e,r,s,o,a){this._images[t]={url:e,data:r,spriteSheet:!0,frameWidth:s,frameHeight:o},i.BaseTextureCache[t]=new i.BaseTexture(r),i.TextureCache[t]=new i.Texture(i.BaseTextureCache[t]),this._images[t].frameData=n.AnimationParser.spriteSheet(this.game,t,s,o,a)},addTileset:function(t,e,r,s,o,a,h,l){this._tilesets[t]={url:e,data:r,tileWidth:s,tileHeight:o,tileMargin:h,tileSpacing:l},i.BaseTextureCache[t]=new i.BaseTexture(r),i.TextureCache[t]=new i.Texture(i.BaseTextureCache[t]),this._tilesets[t].tileData=n.TilemapParser.tileset(this.game,t,s,o,a,h,l)},addTilemap:function(t,e,i,r){this._tilemaps[t]={url:e,data:i,format:r},this._tilemaps[t].layers=n.TilemapParser.parse(this.game,i,r)},addTextureAtlas:function(t,e,r,s,o){this._images[t]={url:e,data:r,spriteSheet:!0},i.BaseTextureCache[t]=new i.BaseTexture(r),i.TextureCache[t]=new i.Texture(i.BaseTextureCache[t]),o==n.Loader.TEXTURE_ATLAS_JSON_ARRAY?this._images[t].frameData=n.AnimationParser.JSONData(this.game,s,t):o==n.Loader.TEXTURE_ATLAS_JSON_HASH?this._images[t].frameData=n.AnimationParser.JSONDataHash(this.game,s,t):o==n.Loader.TEXTURE_ATLAS_XML_STARLING&&(this._images[t].frameData=n.AnimationParser.XMLData(this.game,s,t))},addBitmapFont:function(t,e,r,s){this._images[t]={url:e,data:r,spriteSheet:!0},i.BaseTextureCache[t]=new i.BaseTexture(r),i.TextureCache[t]=new i.Texture(i.BaseTextureCache[t]),n.LoaderParser.bitmapFont(this.game,s,t)},addDefaultImage:function(){var t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",this._images.__default={url:null,data:t,spriteSheet:!1},this._images.__default.frame=new n.Frame(0,0,0,32,32,"",""),i.BaseTextureCache.__default=new i.BaseTexture(t),i.TextureCache.__default=new i.Texture(i.BaseTextureCache.__default)},addMissingImage:function(){var t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",this._images.__missing={url:null,data:t,spriteSheet:!1},this._images.__missing.frame=new n.Frame(0,0,0,32,32,"",""),i.BaseTextureCache.__missing=new i.BaseTexture(t),i.TextureCache.__missing=new i.Texture(i.BaseTextureCache.__missing)},addText:function(t,e,i){this._text[t]={url:e,data:i}},addImage:function(t,e,r){this._images[t]={url:e,data:r,spriteSheet:!1},this._images[t].frame=new n.Frame(0,0,0,r.width,r.height,t,this.game.rnd.uuid()),i.BaseTextureCache[t]=new i.BaseTexture(r),i.TextureCache[t]=new i.Texture(i.BaseTextureCache[t])},addSound:function(t,e,i,n,r){n=n||!0,r=r||!1;var s=!1;r&&(s=!0),this._sounds[t]={url:e,data:i,isDecoding:!1,decoded:s,webAudio:n,audioTag:r}},reloadSound:function(t){var e=this;this._sounds[t]&&(this._sounds[t].data.src=this._sounds[t].url,this._sounds[t].data.addEventListener("canplaythrough",function(){return e.reloadSoundComplete(t)},!1),this._sounds[t].data.load())},reloadSoundComplete:function(t){this._sounds[t]&&(this._sounds[t].locked=!1,this.onSoundUnlock.dispatch(t))},updateSound:function(t,e,i){this._sounds[t]&&(this._sounds[t][e]=i)},decodedSound:function(t,e){this._sounds[t].data=e,this._sounds[t].decoded=!0,this._sounds[t].isDecoding=!1},getCanvas:function(t){return this._canvases[t]?this._canvases[t].canvas:null},getBitmapData:function(t){return this._bitmapDatas[t]?this._bitmapDatas[t]:null},checkImageKey:function(t){return this._images[t]?!0:!1},getImage:function(t){return this._images[t]?this._images[t].data:null},getTilesetImage:function(t){return this._tilesets[t]?this._tilesets[t].data:null},getTileset:function(t){return this._tilesets[t]?this._tilesets[t].tileData:null},getTilemapData:function(t){return this._tilemaps[t]?this._tilemaps[t]:null},getFrameData:function(t){return this._images[t]&&this._images[t].frameData?this._images[t].frameData:null},getFrameByIndex:function(t,e){return this._images[t]&&this._images[t].frameData?this._images[t].frameData.getFrame(e):null},getFrameByName:function(t,e){return this._images[t]&&this._images[t].frameData?this._images[t].frameData.getFrameByName(e):null},getFrame:function(t){return this._images[t]&&this._images[t].spriteSheet===!1?this._images[t].frame:null},getTextureFrame:function(t){return this._textures[t]?this._textures[t].frame:null},getTexture:function(t){return this._textures[t]?this._textures[t]:null},getSound:function(t){return this._sounds[t]?this._sounds[t]:null},getSoundData:function(t){return this._sounds[t]?this._sounds[t].data:null},isSoundDecoded:function(t){return this._sounds[t]?this._sounds[t].decoded:void 0},isSoundReady:function(t){return this._sounds[t]&&this._sounds[t].decoded&&this.game.sound.touchLocked===!1},isSpriteSheet:function(t){return this._images[t]?this._images[t].spriteSheet:!1},getText:function(t){return this._text[t]?this._text[t].data:null},getKeys:function(t){var e=[];for(var i in t)"__default"!==i&&e.push(i);return e},getImageKeys:function(){return this.getKeys(this._images)},getSoundKeys:function(){return this.getKeys(this._sounds)},getTextKeys:function(){return this.getKeys(this._text)},removeCanvas:function(t){delete this._canvases[t]},removeImage:function(t){delete this._images[t]},removeSound:function(t){delete this._sounds[t]},removeText:function(t){delete this._text[t]},destroy:function(){for(var t in this._canvases)delete this._canvases[t.key];for(var t in this._images)delete this._images[t.key];for(var t in this._sounds)delete this._sounds[t.key];for(var t in this._text)delete this._text[t.key]}},n.Loader=function(t){this.game=t,this._fileList=[],this._fileIndex=0,this._progressChunk=0,this._xhr=new XMLHttpRequest,this.isLoading=!1,this.hasLoaded=!1,this.progress=0,this.preloadSprite=null,this.crossOrigin="",this.baseURL="",this.onFileComplete=new n.Signal,this.onFileError=new n.Signal,this.onLoadStart=new n.Signal,this.onLoadComplete=new n.Signal},n.Loader.TEXTURE_ATLAS_JSON_ARRAY=0,n.Loader.TEXTURE_ATLAS_JSON_HASH=1,n.Loader.TEXTURE_ATLAS_XML_STARLING=2,n.Loader.prototype={setPreloadSprite:function(t,e){e=e||0,this.preloadSprite={sprite:t,direction:e,width:t.width,height:t.height,crop:null},this.preloadSprite.crop=0===e?new n.Rectangle(0,0,1,t.height):new n.Rectangle(0,0,t.width,1),t.crop=this.preloadSprite.crop,t.cropEnabled=!0},checkKeyExists:function(t,e){if(this._fileList.length>0)for(var i=0;i<this._fileList.length;i++)if(this._fileList[i].type===t&&this._fileList[i].key===e)return!0;return!1},getAsset:function(t,e){if(this._fileList.length>0)for(var i=0;i<this._fileList.length;i++)if(this._fileList[i].type===t&&this._fileList[i].key===e)return{index:i,file:this._fileList[i]};return!1},reset:function(){this.preloadSprite=null,this.isLoading=!1,this._fileList.length=0,this._fileIndex=0},addToFileList:function(t,e,i,n){var r={type:t,key:e,url:i,data:null,error:!1,loaded:!1};if("undefined"!=typeof n)for(var s in n)r[s]=n[s];this.checkKeyExists(t,e)===!1&&this._fileList.push(r)},replaceInFileList:function(t,e,i,n){var r={type:t,key:e,url:i,data:null,error:!1,loaded:!1};if("undefined"!=typeof n)for(var s in n)r[s]=n[s];this.checkKeyExists(t,e)===!1&&this._fileList.push(r)},image:function(t,e,i){return"undefined"==typeof i&&(i=!1),i?this.replaceInFileList("image",t,e):this.addToFileList("image",t,e),this},text:function(t,e,i){return"undefined"==typeof i&&(i=!1),i?this.replaceInFileList("text",t,e):this.addToFileList("text",t,e),this},script:function(t,e){return this.addToFileList("script",t,e),this},spritesheet:function(t,e,i,n,r){return"undefined"==typeof r&&(r=-1),this.addToFileList("spritesheet",t,e,{frameWidth:i,frameHeight:n,frameMax:r}),this},tileset:function(t,e,i,n,r,s,o){return"undefined"==typeof r&&(r=-1),"undefined"==typeof s&&(s=0),"undefined"==typeof o&&(o=0),this.addToFileList("tileset",t,e,{tileWidth:i,tileHeight:n,tileMax:r,tileMargin:s,tileSpacing:o}),this},audio:function(t,e,i){return"undefined"==typeof i&&(i=!0),this.addToFileList("audio",t,e,{buffer:null,autoDecode:i}),this},tilemap:function(t,e,i,r){if("undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),"undefined"==typeof r&&(r=n.Tilemap.CSV),null==e&&null==i)return console.warn("Phaser.Loader.tilemap - Both mapDataURL and mapData are null. One must be set."),this;if(i){switch(r){case n.Tilemap.CSV:break;case n.Tilemap.TILED_JSON:"string"==typeof i&&(i=JSON.parse(i))}this.game.cache.addTilemap(t,null,i,r)}else this.addToFileList("tilemap",t,e,{format:r});return this},bitmapFont:function(t,e,i,n){if("undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=null),i)this.addToFileList("bitmapfont",t,e,{xmlURL:i});else if("string"==typeof n){var r;try{if(window.DOMParser){var s=new DOMParser;r=s.parseFromString(n,"text/xml")}else r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n)}catch(o){r=void 0}if(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid Bitmap Font XML given");this.addToFileList("bitmapfont",t,e,{xmlURL:null,xmlData:r})}return this},atlasJSONArray:function(t,e,i,r){return this.atlas(t,e,i,r,n.Loader.TEXTURE_ATLAS_JSON_ARRAY)},atlasJSONHash:function(t,e,i,r){return this.atlas(t,e,i,r,n.Loader.TEXTURE_ATLAS_JSON_HASH)},atlasXML:function(t,e,i,r){return this.atlas(t,e,i,r,n.Loader.TEXTURE_ATLAS_XML_STARLING)},atlas:function(t,e,i,r,s){if("undefined"==typeof i&&(i=null),"undefined"==typeof r&&(r=null),"undefined"==typeof s&&(s=n.Loader.TEXTURE_ATLAS_JSON_ARRAY),i)this.addToFileList("textureatlas",t,e,{atlasURL:i,format:s});else{switch(s){case n.Loader.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof r&&(r=JSON.parse(r));break;case n.Loader.TEXTURE_ATLAS_XML_STARLING:if("string"==typeof r){var o;try{if(window.DOMParser){var a=new DOMParser;o=a.parseFromString(r,"text/xml")}else o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(r)}catch(h){o=void 0}if(!o||!o.documentElement||o.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");r=o}}this.addToFileList("textureatlas",t,e,{atlasURL:null,atlasData:r,format:s})}return this},removeFile:function(t,e){var i=this.getAsset(t,e);i!==!1&&this._fileList.splice(i.index,1)},removeAll:function(){this._fileList.length=0},start:function(){this.isLoading||(this.progress=0,this.hasLoaded=!1,this.isLoading=!0,this.onLoadStart.dispatch(this._fileList.length),this._fileList.length>0?(this._fileIndex=0,this._progressChunk=100/this._fileList.length,this.loadFile()):(this.progress=100,this.hasLoaded=!0,this.onLoadComplete.dispatch()))},loadFile:function(){if(!this._fileList[this._fileIndex])return console.warn("Phaser.Loader loadFile invalid index "+this._fileIndex),void 0;var t=this._fileList[this._fileIndex],e=this;switch(t.type){case"image":case"spritesheet":case"textureatlas":case"bitmapfont":case"tileset":t.data=new Image,t.data.name=t.key,t.data.onload=function(){return e.fileComplete(e._fileIndex)},t.data.onerror=function(){return e.fileError(e._fileIndex)},t.data.crossOrigin=this.crossOrigin,t.data.src=this.baseURL+t.url;break;case"audio":t.url=this.getAudioURL(t.url),null!==t.url?this.game.sound.usingWebAudio?(this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="arraybuffer",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send()):this.game.sound.usingAudioTag&&(this.game.sound.touchLocked?(t.data=new Audio,t.data.name=t.key,t.data.preload="auto",t.data.src=this.baseURL+t.url,this.fileComplete(this._fileIndex)):(t.data=new Audio,t.data.name=t.key,t.data.onerror=function(){return e.fileError(e._fileIndex)},t.data.preload="auto",t.data.src=this.baseURL+t.url,t.data.addEventListener("canplaythrough",n.GAMES[this.game.id].load.fileComplete(this._fileIndex),!1),t.data.load())):this.fileError(this._fileIndex);break;case"tilemap":if(this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",t.format===n.Tilemap.TILED_JSON)this._xhr.onload=function(){return e.jsonLoadComplete(e._fileIndex)};else{if(t.format!==n.Tilemap.CSV)throw new Error("Phaser.Loader. Invalid Tilemap format: "+t.format);this._xhr.onload=function(){return e.csvLoadComplete(e._fileIndex)}}this._xhr.onerror=function(){return e.dataLoadError(e._fileIndex)},this._xhr.send();break;case"text":this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send();break;case"script":this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send()}},getAudioURL:function(t){var e;"string"==typeof t&&(t=[t]);for(var i=0;i<t.length;i++)if(e=t[i].toLowerCase(),e=e.substr((Math.max(0,e.lastIndexOf("."))||1/0)+1),this.game.device.canPlayAudio(e))return t[i];return null},fileError:function(t){this._fileList[t].loaded=!0,this._fileList[t].error=!0,this.onFileError.dispatch(this._fileList[t].key,this._fileList[t]),console.warn("Phaser.Loader error loading file: "+this._fileList[t].key+" from URL "+this._fileList[t].url),this.nextFile(t,!1)},fileComplete:function(t){if(!this._fileList[t])return console.warn("Phaser.Loader fileComplete invalid index "+t),void 0;var e=this._fileList[t];e.loaded=!0;var i=!0,r=this;switch(e.type){case"image":this.game.cache.addImage(e.key,e.url,e.data);break;case"spritesheet":this.game.cache.addSpriteSheet(e.key,e.url,e.data,e.frameWidth,e.frameHeight,e.frameMax);break;case"tileset":this.game.cache.addTileset(e.key,e.url,e.data,e.tileWidth,e.tileHeight,e.tileMax,e.tileMargin,e.tileSpacing);break;case"textureatlas":if(null==e.atlasURL)this.game.cache.addTextureAtlas(e.key,e.url,e.data,e.atlasData,e.format);else{if(i=!1,this._xhr.open("GET",this.baseURL+e.atlasURL,!0),this._xhr.responseType="text",e.format==n.Loader.TEXTURE_ATLAS_JSON_ARRAY||e.format==n.Loader.TEXTURE_ATLAS_JSON_HASH)this._xhr.onload=function(){return r.jsonLoadComplete(t)};else{if(e.format!=n.Loader.TEXTURE_ATLAS_XML_STARLING)throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+e.format);this._xhr.onload=function(){return r.xmlLoadComplete(t)}}this._xhr.onerror=function(){return r.dataLoadError(t)},this._xhr.send()}break;case"bitmapfont":null==e.xmlURL?this.game.cache.addBitmapFont(e.key,e.url,e.data,e.xmlData):(i=!1,this._xhr.open("GET",this.baseURL+e.xmlURL,!0),this._xhr.responseType="text",this._xhr.onload=function(){return r.xmlLoadComplete(t)},this._xhr.onerror=function(){return r.dataLoadError(t)},this._xhr.send());break;case"audio":if(this.game.sound.usingWebAudio){if(e.data=this._xhr.response,this.game.cache.addSound(e.key,e.url,e.data,!0,!1),e.autoDecode){this.game.cache.updateSound(o,"isDecoding",!0);var s=this,o=e.key;this.game.sound.context.decodeAudioData(e.data,function(t){t&&s.game.cache.decodedSound(o,t)})}}else e.data.removeEventListener("canplaythrough",n.GAMES[this.game.id].load.fileComplete),this.game.cache.addSound(e.key,e.url,e.data,!1,!0);break;case"text":e.data=this._xhr.responseText,this.game.cache.addText(e.key,e.url,e.data);break;case"script":e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=this._xhr.responseText,document.head.appendChild(e.data)}i&&this.nextFile(t,!0)},jsonLoadComplete:function(t){if(!this._fileList[t])return console.warn("Phaser.Loader jsonLoadComplete invalid index "+t),void 0;var e=this._fileList[t],i=JSON.parse(this._xhr.responseText);e.loaded=!0,"tilemap"===e.type?this.game.cache.addTilemap(e.key,e.url,i,e.format):this.game.cache.addTextureAtlas(e.key,e.url,e.data,i,e.format),this.nextFile(t,!0)},csvLoadComplete:function(t){if(!this._fileList[t])return console.warn("Phaser.Loader csvLoadComplete invalid index "+t),void 0;var e=this._fileList[t],i=this._xhr.responseText;e.loaded=!0,this.game.cache.addTilemap(e.key,e.url,i,e.format),this.nextFile(t,!0)},dataLoadError:function(t){var e=this._fileList[t];e.loaded=!0,e.error=!0,console.warn("Phaser.Loader dataLoadError: "+e.key),this.nextFile(t,!0)},xmlLoadComplete:function(t){var e,i=this._xhr.responseText;try{if(window.DOMParser){var n=new DOMParser;e=n.parseFromString(i,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(i)}catch(r){e=void 0}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid XML given");var s=this._fileList[t];s.loaded=!0,"bitmapfont"==s.type?this.game.cache.addBitmapFont(s.key,s.url,s.data,e):"textureatlas"==s.type&&this.game.cache.addTextureAtlas(s.key,s.url,s.data,e,s.format),this.nextFile(t,!0)},nextFile:function(t,e){this.progress=Math.round(this.progress+this._progressChunk),this.progress>100&&(this.progress=100),null!==this.preloadSprite&&(0===this.preloadSprite.direction?this.preloadSprite.crop.width=Math.floor(this.preloadSprite.width/100*this.progress):this.preloadSprite.crop.height=Math.floor(this.preloadSprite.height/100*this.progress),this.preloadSprite.sprite.crop=this.preloadSprite.crop),this.onFileComplete.dispatch(this.progress,this._fileList[t].key,e,this.totalLoadedFiles(),this._fileList.length),this.totalQueuedFiles()>0?(this._fileIndex++,this.loadFile()):(this.hasLoaded=!0,this.isLoading=!1,this.removeAll(),this.onLoadComplete.dispatch())},totalLoadedFiles:function(){for(var t=0,e=0;e<this._fileList.length;e++)this._fileList[e].loaded&&t++;return t},totalQueuedFiles:function(){for(var t=0,e=0;e<this._fileList.length;e++)this._fileList[e].loaded===!1&&t++;return t}},n.LoaderParser={bitmapFont:function(t,e,n){if(!e.getElementsByTagName("font"))return console.warn("Phaser.LoaderParser.bitmapFont: Invalid XML given, missing <font> tag"),void 0;var r=i.TextureCache[n],s={},o=e.getElementsByTagName("info")[0],a=e.getElementsByTagName("common")[0];s.font=o.attributes.getNamedItem("face").nodeValue,s.size=parseInt(o.attributes.getNamedItem("size").nodeValue,10),s.lineHeight=parseInt(a.attributes.getNamedItem("lineHeight").nodeValue,10),s.chars={};for(var h=e.getElementsByTagName("char"),l=0;l<h.length;l++){var u=parseInt(h[l].attributes.getNamedItem("id").nodeValue,10),c={x:parseInt(h[l].attributes.getNamedItem("x").nodeValue,10),y:parseInt(h[l].attributes.getNamedItem("y").nodeValue,10),width:parseInt(h[l].attributes.getNamedItem("width").nodeValue,10),height:parseInt(h[l].attributes.getNamedItem("height").nodeValue,10)};i.TextureCache[u]=new i.Texture(r,c),s.chars[u]={xOffset:parseInt(h[l].attributes.getNamedItem("xoffset").nodeValue,10),yOffset:parseInt(h[l].attributes.getNamedItem("yoffset").nodeValue,10),xAdvance:parseInt(h[l].attributes.getNamedItem("xadvance").nodeValue,10),kerning:{},texture:new i.Texture(r,c)}
}var d=e.getElementsByTagName("kerning");for(l=0;l<d.length;l++){var p=parseInt(d[l].attributes.getNamedItem("first").nodeValue,10),f=parseInt(d[l].attributes.getNamedItem("second").nodeValue,10),m=parseInt(d[l].attributes.getNamedItem("amount").nodeValue,10);s.chars[f].kerning[p]=m}i.BitmapText.fonts[s.font]=s}},n.Sound=function(t,e,i,r,s){"undefined"==typeof i&&(i=1),"undefined"==typeof r&&(r=!1),"undefined"==typeof s&&(s=t.sound.connectToMaster),this.game=t,this.name=e,this.key=e,this.loop=r,this._volume=i,this.markers={},this.context=null,this._buffer=null,this._muted=!1,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.pendingPlayback=!1,this.override=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,this.gainNode="undefined"==typeof this.context.createGain?this.context.createGainNode():this.context.createGain(),this.gainNode.gain.value=i*this.game.sound.volume,s&&this.gainNode.connect(this.masterGainNode)):this.game.cache.getSound(e)&&this.game.cache.isSoundReady(e)?(this._sound=this.game.cache.getSoundData(e),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this),this.onDecoded=new n.Signal,this.onPlay=new n.Signal,this.onPause=new n.Signal,this.onResume=new n.Signal,this.onLoop=new n.Signal,this.onStop=new n.Signal,this.onMute=new n.Signal,this.onMarkerComplete=new n.Signal},n.Sound.prototype={soundHasUnlocked:function(t){t==this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},addMarker:function(t,e,i,n,r){n=n||1,"undefined"==typeof r&&(r=!1),this.markers[t]={name:t,start:e,stop:e+i,volume:n,duration:i,durationMS:1e3*i,loop:r}},removeMarker:function(t){delete this.markers[t]},update:function(){this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),this.isPlaying&&(this.currentTime=this.game.time.now-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.onLoop.dispatch(this),""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.time.now):this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop():this.loop?(this.onLoop.dispatch(this),this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop()))},play:function(t,e,i,n,r){if(t=t||"",e=e||0,"undefined"==typeof i&&(i=this._volume),"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=!0),this.isPlaying!==!0||r!==!1||this.override!==!1){if(this.isPlaying&&this.override&&(this.usingWebAudio?"undefined"==typeof this._sound.stop?this._sound.noteOff(0):this._sound.stop(0):this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0)),this.currentMarker=t,""!==t){if(!this.markers[t])return console.warn("Phaser.Sound.play: audio marker "+t+" doesn't exist"),void 0;this.position=this.markers[t].start,this.volume=this.markers[t].volume,this.loop=this.markers[t].loop,this.duration=this.markers[t].duration,this.durationMS=this.markers[t].durationMS,this._tempMarker=t,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else this.position=e,this.volume=i,this.loop=n,this.duration=0,this.durationMS=0,this._tempMarker=t,this._tempPosition=e,this._tempVolume=i,this._tempLoop=n;this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(null==this._buffer&&(this._buffer=this.game.cache.getSoundData(this.key)),this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode.input):this._sound.connect(this.gainNode),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this.loop&&""===t&&(this._sound.loop=!0),"undefined"==typeof this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.time.now,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===!1&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&4==this._sound.readyState?(this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._sound.volume=this._muted?0:this._volume,this.isPlaying=!0,this.startTime=this.game.time.now,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):this.pendingPlayback=!0}},restart:function(t,e,i,n){t=t||"",e=e||0,i=i||1,"undefined"==typeof n&&(n=!1),this.play(t,e,i,n,!0)},pause:function(){this.isPlaying&&this._sound&&(this.stop(),this.isPlaying=!1,this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.time.now,this.onPause.dispatch(this))},resume:function(){if(this.paused&&this._sound){if(this.usingWebAudio){var t=this.position+this.pausedPosition/1e3;this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this._sound.connect(this.gainNode),"undefined"==typeof this._sound.start?this._sound.noteGrainOn(0,t,this.duration):this._sound.start(0,t,this.duration)}else this._sound.play();this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.time.now-this.pausedTime,this.onResume.dispatch(this)}},stop:function(){this.isPlaying&&this._sound&&(this.usingWebAudio?"undefined"==typeof this._sound.stop?this._sound.noteOff(0):this._sound.stop(0):this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0)),this.isPlaying=!1;var t=this.currentMarker;this.currentMarker="",this.onStop.dispatch(this,t)}},Object.defineProperty(n.Sound.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(n.Sound.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(n.Sound.prototype,"mute",{get:function(){return this._muted},set:function(t){t=t||null,t?(this._muted=!0,this.usingWebAudio?(this._muteVolume=this.gainNode.gain.value,this.gainNode.gain.value=0):this.usingAudioTag&&this._sound&&(this._muteVolume=this._sound.volume,this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.onMute.dispatch(this)}}),Object.defineProperty(n.Sound.prototype,"volume",{get:function(){return this._volume},set:function(t){this.usingWebAudio?(this._volume=t,this.gainNode.gain.value=t):this.usingAudioTag&&this._sound&&t>=0&&1>=t&&(this._volume=t,this._sound.volume=t)}}),n.SoundManager=function(t){this.game=t,this.onSoundDecode=new n.Signal,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this.context=null,this.usingWebAudio=!0,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32},n.SoundManager.prototype={boot:function(){if(this.game.device.iOS&&this.game.device.webAudio===!1&&(this.channels=1),this.game.device.iOS||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock?(this.game.input.touch.callbackContext=this,this.game.input.touch.touchStartCallback=this.unlock,this.game.input.mouse.callbackContext=this,this.game.input.mouse.mouseDownCallback=this.unlock,this.touchLocked=!0):this.touchLocked=!1,window.PhaserGlobal){if(window.PhaserGlobal.disableAudio===!0)return this.usingWebAudio=!1,this.noAudio=!0,void 0;if(window.PhaserGlobal.disableWebAudio===!0)return this.usingWebAudio=!1,this.usingAudioTag=!0,this.noAudio=!1,void 0}window.AudioContext?this.context=new window.AudioContext:window.webkitAudioContext?this.context=new window.webkitAudioContext:window.Audio?(this.usingWebAudio=!1,this.usingAudioTag=!0):(this.usingWebAudio=!1,this.noAudio=!0),null!==this.context&&(this.masterGain="undefined"==typeof this.context.createGain?this.context.createGainNode():this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination))},unlock:function(){if(this.touchLocked!==!1)if(this.game.device.webAudio===!1||window.PhaserGlobal&&window.PhaserGlobal.disableWebAudio===!0)this.touchLocked=!1,this._unlockSource=null,this.game.input.touch.callbackContext=null,this.game.input.touch.touchStartCallback=null,this.game.input.mouse.callbackContext=null,this.game.input.mouse.mouseDownCallback=null;else{var t=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=t,this._unlockSource.connect(this.context.destination),this._unlockSource.noteOn(0)}},stopAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].stop()},pauseAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].pause()},resumeAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].resume()},decode:function(t,e){e=e||null;var i=this.game.cache.getSoundData(t);if(i&&this.game.cache.isSoundDecoded(t)===!1){this.game.cache.updateSound(t,"isDecoding",!0);var n=this;this.context.decodeAudioData(i,function(i){n.game.cache.decodedSound(t,i),e&&n.onSoundDecode.dispatch(e)})}},update:function(){this.touchLocked&&this.game.device.webAudio&&null!==this._unlockSource&&(this._unlockSource.playbackState===this._unlockSource.PLAYING_STATE||this._unlockSource.playbackState===this._unlockSource.FINISHED_STATE)&&(this.touchLocked=!1,this._unlockSource=null,this.game.input.touch.callbackContext=null,this.game.input.touch.touchStartCallback=null);for(var t=0;t<this._sounds.length;t++)this._sounds[t].update()},add:function(t,e,i,r){"undefined"==typeof e&&(e=1),"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=this.connectToMaster);var s=new n.Sound(this.game,t,e,i,r);return this._sounds.push(s),s},play:function(t,e,i,n){"undefined"==typeof n&&(n=!1);var r=this.add(t,e,i);return r.play(),r}},Object.defineProperty(n.SoundManager.prototype,"mute",{get:function(){return this._muted},set:function(t){if(t=t||null){if(this._muted)return;this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].mute=!0)}else{if(this._muted===!1)return;this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].mute=!1)}}}),Object.defineProperty(n.SoundManager.prototype,"volume",{get:function(){return this.usingWebAudio?this.masterGain.gain.value:this._volume},set:function(t){t=this.game.math.clamp(t,1,0),this._volume=t,this.usingWebAudio&&(this.masterGain.gain.value=t);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].volume=this._sounds[e].volume*t)}}),n.Utils.Debug=function(t){this.game=t,this.context=t.context,this.font="14px Courier",this.lineHeight=16,this.renderShadow=!0,this.currentX=0,this.currentY=0,this.currentAlpha=1},n.Utils.Debug.prototype={start:function(t,e,i){null!=this.context&&("number"!=typeof t&&(t=0),"number"!=typeof e&&(e=0),i=i||"rgb(255,255,255)",this.currentX=t,this.currentY=e,this.currentColor=i,this.currentAlpha=this.context.globalAlpha,this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.fillStyle=i,this.context.font=this.font,this.context.globalAlpha=1)},stop:function(){this.context.restore(),this.context.globalAlpha=this.currentAlpha},line:function(t,e,i){null!=this.context&&(e=e||null,i=i||null,null!==e&&(this.currentX=e),null!==i&&(this.currentY=i),this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(t,this.currentX+1,this.currentY+1),this.context.fillStyle=this.currentColor),this.context.fillText(t,this.currentX,this.currentY),this.currentY+=this.lineHeight)},renderQuadTree:function(t,e){e=e||"rgba(255,0,0,0.3)",this.start();var i=t.bounds;if(0===t.nodes.length){this.context.strokeStyle=e,this.context.strokeRect(i.x,i.y,i.width,i.height),this.renderText(t.ID+" / "+t.objects.length,i.x+4,i.y+16,"rgb(0,200,0)","12px Courier"),this.context.strokeStyle="rgb(0,255,0)";for(var n=0;n<t.objects.length;n++)this.context.strokeRect(t.objects[n].x,t.objects[n].y,t.objects[n].width,t.objects[n].height)}else for(var n=0;n<t.nodes.length;n++)this.renderQuadTree(t.nodes[n]);this.stop()},renderSpriteCorners:function(t,e,i,n){null!=this.context&&(e=e||!1,i=i||!1,n=n||"rgb(255,255,255)",this.start(0,0,n),i&&(this.context.beginPath(),this.context.strokeStyle="rgba(0, 255, 0, 0.7)",this.context.strokeRect(t.bounds.x,t.bounds.y,t.bounds.width,t.bounds.height),this.context.closePath(),this.context.stroke()),this.context.beginPath(),this.context.moveTo(t.topLeft.x,t.topLeft.y),this.context.lineTo(t.topRight.x,t.topRight.y),this.context.lineTo(t.bottomRight.x,t.bottomRight.y),this.context.lineTo(t.bottomLeft.x,t.bottomLeft.y),this.context.closePath(),this.context.strokeStyle="rgba(255, 0, 255, 0.7)",this.context.stroke(),this.renderPoint(t.offset),this.renderPoint(t.center),this.renderPoint(t.topLeft),this.renderPoint(t.topRight),this.renderPoint(t.bottomLeft),this.renderPoint(t.bottomRight),e&&(this.currentColor=n,this.line("x: "+Math.floor(t.topLeft.x)+" y: "+Math.floor(t.topLeft.y),t.topLeft.x,t.topLeft.y),this.line("x: "+Math.floor(t.topRight.x)+" y: "+Math.floor(t.topRight.y),t.topRight.x,t.topRight.y),this.line("x: "+Math.floor(t.bottomLeft.x)+" y: "+Math.floor(t.bottomLeft.y),t.bottomLeft.x,t.bottomLeft.y),this.line("x: "+Math.floor(t.bottomRight.x)+" y: "+Math.floor(t.bottomRight.y),t.bottomRight.x,t.bottomRight.y)),this.stop())},renderSoundInfo:function(t,e,i,n){null!=this.context&&(n=n||"rgb(255,255,255)",this.start(e,i,n),this.line("Sound: "+t.key+" Locked: "+t.game.sound.touchLocked),this.line("Is Ready?: "+this.game.cache.isSoundReady(t.key)+" Pending Playback: "+t.pendingPlayback),this.line("Decoded: "+t.isDecoded+" Decoding: "+t.isDecoding),this.line("Total Duration: "+t.totalDuration+" Playing: "+t.isPlaying),this.line("Time: "+t.currentTime),this.line("Volume: "+t.volume+" Muted: "+t.mute),this.line("WebAudio: "+t.usingWebAudio+" Audio: "+t.usingAudioTag),""!==t.currentMarker&&(this.line("Marker: "+t.currentMarker+" Duration: "+t.duration),this.line("Start: "+t.markers[t.currentMarker].start+" Stop: "+t.markers[t.currentMarker].stop),this.line("Position: "+t.position)),this.stop())},renderCameraInfo:function(t,e,i,n){null!=this.context&&(n=n||"rgb(255,255,255)",this.start(e,i,n),this.line("Camera ("+t.width+" x "+t.height+")"),this.line("X: "+t.x+" Y: "+t.y),this.line("Bounds x: "+t.bounds.x+" Y: "+t.bounds.y+" w: "+t.bounds.width+" h: "+t.bounds.height),this.line("View x: "+t.view.x+" Y: "+t.view.y+" w: "+t.view.width+" h: "+t.view.height),this.stop())},renderPointer:function(t,e,i,n,r){null!=this.context&&null!=t&&("undefined"==typeof e&&(e=!1),i=i||"rgba(0,255,0,0.5)",n=n||"rgba(255,0,0,0.5)",r=r||"rgb(255,255,255)",(e!==!0||t.isUp!==!0)&&(this.start(t.x,t.y-100,r),this.context.beginPath(),this.context.arc(t.x,t.y,t.circle.radius,0,2*Math.PI),this.context.fillStyle=t.active?i:n,this.context.fill(),this.context.closePath(),this.context.beginPath(),this.context.moveTo(t.positionDown.x,t.positionDown.y),this.context.lineTo(t.position.x,t.position.y),this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.line("ID: "+t.id+" Active: "+t.active),this.line("World X: "+t.worldX+" World Y: "+t.worldY),this.line("Screen X: "+t.x+" Screen Y: "+t.y),this.line("Duration: "+t.duration+" ms"),this.stop()))},renderSpriteInputInfo:function(t,e,i,n){n=n||"rgb(255,255,255)",this.start(e,i,n),this.line("Sprite Input: ("+t.width+" x "+t.height+")"),this.line("x: "+t.input.pointerX().toFixed(1)+" y: "+t.input.pointerY().toFixed(1)),this.line("over: "+t.input.pointerOver()+" duration: "+t.input.overDuration().toFixed(0)),this.line("down: "+t.input.pointerDown()+" duration: "+t.input.downDuration().toFixed(0)),this.line("just over: "+t.input.justOver()+" just out: "+t.input.justOut()),this.stop()},renderSpriteCollision:function(t,e,i,n){n=n||"rgb(255,255,255)",this.start(e,i,n),this.line("Sprite Collision: ("+t.width+" x "+t.height+")"),this.line("left: "+t.body.touching.left),this.line("right: "+t.body.touching.right),this.line("up: "+t.body.touching.up),this.line("down: "+t.body.touching.down),this.line("velocity.x: "+t.body.velocity.x),this.line("velocity.y: "+t.body.velocity.y),this.stop()},renderInputInfo:function(t,e,i){null!=this.context&&(i=i||"rgb(255,255,0)",this.start(t,e,i),this.line("Input"),this.line("X: "+this.game.input.x+" Y: "+this.game.input.y),this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY),this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1)),this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY),this.stop())},renderSpriteInfo:function(t,e,i,n){null!=this.context&&(n=n||"rgb(255, 255, 255)",this.start(e,i,n),this.line("Sprite:  ("+t.width+" x "+t.height+") anchor: "+t.anchor.x+" x "+t.anchor.y),this.line("x: "+t.x.toFixed(1)+" y: "+t.y.toFixed(1)),this.line("angle: "+t.angle.toFixed(1)+" rotation: "+t.rotation.toFixed(1)),this.line("visible: "+t.visible+" in camera: "+t.inCamera),this.line("body x: "+t.body.x.toFixed(1)+" y: "+t.body.y.toFixed(1)),this.line("deltaX: "+t.body.deltaX()),this.line("deltaY: "+t.body.deltaY()),this.stop())},renderWorldTransformInfo:function(t,e,i,n){null!=this.context&&(n=n||"rgb(255, 255, 255)",this.start(e,i,n),this.line("World Transform"),this.line("skewX:  "+t.worldTransform[3]),this.line("skewY:  "+t.worldTransform[1]),this.line("scaleX: "+t.worldTransform[0]),this.line("scaleY: "+t.worldTransform[4]),this.line("transX: "+t.worldTransform[2]),this.line("transY: "+t.worldTransform[5]),this.stop())},renderLocalTransformInfo:function(t,e,i,n){null!=this.context&&(n=n||"rgb(255, 255, 255)",this.start(e,i,n),this.line("Local Transform"),this.line("skewX:  "+t.localTransform[3]),this.line("skewY:  "+t.localTransform[1]),this.line("scaleX: "+t.localTransform[0]),this.line("scaleY: "+t.localTransform[4]),this.line("transX: "+t.localTransform[2]),this.line("transY: "+t.localTransform[5]),this.stop())},renderSpriteCoords:function(t,e,i,n){null!=this.context&&(n=n||"rgb(255, 255, 255)",this.start(e,i,n),t.name&&this.line(t.name),this.line("x: "+t.x),this.line("y: "+t.y),this.line("pos x: "+t.position.x),this.line("pos y: "+t.position.y),this.line("local x: "+t.localTransform[2]),this.line("local y: "+t.localTransform[5]),this.line("t x: "+t.worldTransform[2]),this.line("t y: "+t.worldTransform[5]),this.line("world x: "+t.world.x),this.line("world y: "+t.world.y),this.stop())},renderGroupInfo:function(t,e,i,n){null!=this.context&&(n=n||"rgb(255, 255, 255)",this.start(e,i,n),this.line("Group (size: "+t.length+")"),this.line("x: "+t.x),this.line("y: "+t.y),this.stop())},renderPointInfo:function(t,e,i,n){null!=this.context&&(n=n||"rgb(255, 255, 255)",this.start(e,i,n),this.line("px: "+t.x.toFixed(1)+" py: "+t.y.toFixed(1)),this.stop())},renderSpriteBody:function(t,e){null!=this.context&&(e=e||"rgba(255,0,255, 0.3)",this.start(0,0,e),this.context.fillStyle=e,this.context.fillRect(t.body.screenX,t.body.screenY,t.body.width,t.body.height),this.stop())},renderSpriteBounds:function(t,e,i){null!=this.context&&(e=e||"rgb(255,0,255)","undefined"==typeof i&&(i=!1),this.start(0,0,e),i?(this.context.fillStyle=e,this.context.fillRect(t.bounds.x,t.bounds.y,t.bounds.width,t.bounds.height)):(this.context.strokeStyle=e,this.context.strokeRect(t.bounds.x,t.bounds.y,t.bounds.width,t.bounds.height),this.context.stroke()),this.stop())},renderPixel:function(t,e,i){null!=this.context&&(i=i||"rgba(0,255,0,1)",this.start(),this.context.fillStyle=i,this.context.fillRect(t,e,2,2),this.stop())},renderPoint:function(t,e){null!=this.context&&(e=e||"rgba(0,255,0,1)",this.start(),this.context.fillStyle=e,this.context.fillRect(t.x,t.y,4,4),this.stop())},renderRectangle:function(t,e){null!=this.context&&(e=e||"rgba(0,255,0,0.3)",this.start(),this.context.fillStyle=e,this.context.fillRect(t.x,t.y,t.width,t.height),this.stop())},renderCircle:function(t,e){null!=this.context&&(e=e||"rgba(0,255,0,0.3)",this.start(),this.context.beginPath(),this.context.fillStyle=e,this.context.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),this.context.fill(),this.context.closePath(),this.stop())},renderText:function(t,e,i,n,r){null!=this.context&&(n=n||"rgb(255,255,255)",r=r||"16px Courier",this.start(),this.context.font=r,this.context.fillStyle=n,this.context.fillText(t,e,i),this.stop())},dumpLinkedList:function(t){var e=20,i="\n"+n.Utils.pad("Node",e)+"|"+n.Utils.pad("Next",e)+"|"+n.Utils.pad("Previous",e)+"|"+n.Utils.pad("First",e)+"|"+n.Utils.pad("Last",e);console.log(i);var i=n.Utils.pad("----------",e)+"|"+n.Utils.pad("----------",e)+"|"+n.Utils.pad("----------",e)+"|"+n.Utils.pad("----------",e)+"|"+n.Utils.pad("----------",e);console.log(i);var r=t,s=r.last.next;r=r.first;do{var o=r.sprite.name||"*",a="-",h="-",l="-",u="-";r.next&&(a=r.next.sprite.name),r.prev&&(h=r.prev.sprite.name),r.first&&(l=r.first.sprite.name),r.last&&(u=r.last.sprite.name),"undefined"==typeof a&&(a="-"),"undefined"==typeof h&&(h="-"),"undefined"==typeof l&&(l="-"),"undefined"==typeof u&&(u="-");var i=n.Utils.pad(o,e)+"|"+n.Utils.pad(a,e)+"|"+n.Utils.pad(h,e)+"|"+n.Utils.pad(l,e)+"|"+n.Utils.pad(u,e);console.log(i),r=r.next}while(r!=s)}},n.Color={getColor32:function(t,e,i,n){return t<<24|e<<16|i<<8|n},getColor:function(t,e,i){return t<<16|e<<8|i},hexToRGB:function(t){var e="#"==t.charAt(0)?t.substring(1,7):t;3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var i=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);return i<<16|n<<8|r},getColorInfo:function(t){var e=n.Color.getRGB(t),i=n.Color.RGBtoHSV(t),r=n.Color.RGBtoHexstring(t)+"\n";return r=r.concat("Alpha: "+e.alpha+" Red: "+e.red+" Green: "+e.green+" Blue: "+e.blue)+"\n",r=r.concat("Hue: "+i.hue+" Saturation: "+i.saturation+" Lightnes: "+i.lightness)},RGBtoHexstring:function(t){var e=n.Color.getRGB(t);return"0x"+n.Color.colorToHexstring(e.alpha)+n.Color.colorToHexstring(e.red)+n.Color.colorToHexstring(e.green)+n.Color.colorToHexstring(e.blue)},RGBtoWebstring:function(t){var e=n.Color.getRGB(t);return"#"+n.Color.colorToHexstring(e.red)+n.Color.colorToHexstring(e.green)+n.Color.colorToHexstring(e.blue)},colorToHexstring:function(t){var e="0123456789ABCDEF",i=t%16,n=(t-i)/16,r=e.charAt(n)+e.charAt(i);return r},interpolateColor:function(t,e,i,r,s){"undefined"==typeof s&&(s=255);var o=n.Color.getRGB(t),a=n.Color.getRGB(e),h=(a.red-o.red)*r/i+o.red,l=(a.green-o.green)*r/i+o.green,u=(a.blue-o.blue)*r/i+o.blue;return n.Color.getColor32(s,h,l,u)},interpolateColorWithRGB:function(t,e,i,r,s,o){var a=n.Color.getRGB(t),h=(e-a.red)*o/s+a.red,l=(i-a.green)*o/s+a.green,u=(r-a.blue)*o/s+a.blue;return n.Color.getColor(h,l,u)},interpolateRGB:function(t,e,i,r,s,o,a,h){var l=(r-t)*h/a+t,u=(s-e)*h/a+e,c=(o-i)*h/a+i;return n.Color.getColor(l,u,c)},getRandomColor:function(t,e,i){if("undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=255),"undefined"==typeof i&&(i=255),e>255)return n.Color.getColor(255,255,255);if(t>e)return n.Color.getColor(255,255,255);var r=t+Math.round(Math.random()*(e-t)),s=t+Math.round(Math.random()*(e-t)),o=t+Math.round(Math.random()*(e-t));return n.Color.getColor32(i,r,s,o)},getRGB:function(t){return{alpha:t>>>24,red:255&t>>16,green:255&t>>8,blue:255&t}},getWebRGB:function(t){var e=(t>>>24)/255,i=255&t>>16,n=255&t>>8,r=255&t;return"rgba("+i.toString()+","+n.toString()+","+r.toString()+","+e.toString()+")"},getAlpha:function(t){return t>>>24},getAlphaFloat:function(t){return(t>>>24)/255},getRed:function(t){return 255&t>>16},getGreen:function(t){return 255&t>>8},getBlue:function(t){return 255&t}},n.Physics={},n.Physics.Arcade=function(t){this.game=t,this.gravity=new n.Point,this.bounds=new n.Rectangle(0,0,t.world.width,t.world.height),this.maxObjects=10,this.maxLevels=4,this.OVERLAP_BIAS=4,this.quadTree=new n.QuadTree(this,this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTreeID=0,this._bounds1=new n.Rectangle,this._bounds2=new n.Rectangle,this._overlap=0,this._maxOverlap=0,this._velocity1=0,this._velocity2=0,this._newVelocity1=0,this._newVelocity2=0,this._average=0,this._mapData=[],this._mapTiles=0,this._result=!1,this._total=0,this._angle=0,this._dx=0,this._dy=0},n.Physics.Arcade.prototype={updateMotion:function(t){this._velocityDelta=30*(this.computeVelocity(0,t,t.angularVelocity,t.angularAcceleration,t.angularDrag,t.maxAngular)-t.angularVelocity)*this.game.time.physicsElapsed,t.angularVelocity+=this._velocityDelta,t.rotation+=t.angularVelocity*this.game.time.physicsElapsed,t.angularVelocity+=this._velocityDelta,this._velocityDelta=30*(this.computeVelocity(1,t,t.velocity.x,t.acceleration.x,t.drag.x,t.maxVelocity.x)-t.velocity.x)*this.game.time.physicsElapsed,t.velocity.x+=this._velocityDelta,t.x+=t.velocity.x*this.game.time.physicsElapsed,t.velocity.x+=this._velocityDelta,this._velocityDelta=30*(this.computeVelocity(2,t,t.velocity.y,t.acceleration.y,t.drag.y,t.maxVelocity.y)-t.velocity.y)*this.game.time.physicsElapsed,t.velocity.y+=this._velocityDelta,t.y+=t.velocity.y*this.game.time.physicsElapsed,t.velocity.y+=this._velocityDelta},computeVelocity:function(t,e,i,n,r,s){return s=s||1e4,1==t&&e.allowGravity?i+=this.gravity.x+e.gravity.x:2==t&&e.allowGravity&&(i+=this.gravity.y+e.gravity.y),0!==n?i+=n*this.game.time.physicsElapsed:0!==r&&(this._drag=r*this.game.time.physicsElapsed,i-this._drag>0?i-=this._drag:i+this._drag<0?i+=this._drag:i=0),i>s?i=s:-s>i&&(i=-s),i},preUpdate:function(){this.quadTree.clear(),this.quadTreeID=0,this.quadTree=new n.QuadTree(this,this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels)},postUpdate:function(){this.quadTree.clear()},overlap:function(t,e,i,r,s){return i=i||null,r=r||null,s=s||i,this._result=!1,this._total=0,t&&e&&t.exists&&e.exists&&(t.type==n.SPRITE?e.type==n.SPRITE?this.overlapSpriteVsSprite(t,e,i,r,s):(e.type==n.GROUP||e.type==n.EMITTER)&&this.overlapSpriteVsGroup(t,e,i,r,s):t.type==n.GROUP?e.type==n.SPRITE?this.overlapSpriteVsGroup(e,t,i,r,s):(e.type==n.GROUP||e.type==n.EMITTER)&&this.overlapGroupVsGroup(t,e,i,r,s):t.type==n.EMITTER&&(e.type==n.SPRITE?this.overlapSpriteVsGroup(e,t,i,r,s):(e.type==n.GROUP||e.type==n.EMITTER)&&this.overlapGroupVsGroup(t,e,i,r,s))),this._total>0},overlapSpriteVsSprite:function(t,e,i,r,s){this._result=n.Rectangle.intersects(t.body,e.body),this._result&&(r?r.call(s,t,e)&&(this._total++,i&&i.call(s,t,e)):(this._total++,i&&i.call(s,t,e)))},overlapSpriteVsGroup:function(t,e,i,r,s){if(0!==e.length){this._potentials=this.quadTree.retrieve(t);for(var o=0,a=this._potentials.length;a>o;o++)this._potentials[o].sprite.group==e&&(this._result=n.Rectangle.intersects(t.body,this._potentials[o]),this._result&&r&&(this._result=r.call(s,t,this._potentials[o].sprite)),this._result&&(this._total++,i&&i.call(s,t,this._potentials[o].sprite)))}},overlapGroupVsGroup:function(t,e,i,n,r){if(0!==t.length&&0!==e.length&&t._container.first._iNext){var s=t._container.first._iNext;do s.exists&&this.overlapSpriteVsGroup(s,e,i,n,r),s=s._iNext;while(s!=t._container.last._iNext)}},collide:function(t,e,i,r,s){return i=i||null,r=r||null,s=s||i,this._result=!1,this._total=0,t&&e&&t.exists&&e.exists&&(t.type==n.SPRITE?e.type==n.SPRITE?this.collideSpriteVsSprite(t,e,i,r,s):e.type==n.GROUP||e.type==n.EMITTER?this.collideSpriteVsGroup(t,e,i,r,s):e.type==n.TILEMAPLAYER&&this.collideSpriteVsTilemapLayer(t,e,i,r,s):t.type==n.GROUP?e.type==n.SPRITE?this.collideSpriteVsGroup(e,t,i,r,s):e.type==n.GROUP||e.type==n.EMITTER?this.collideGroupVsGroup(t,e,i,r,s):e.type==n.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(t,e,i,r,s):t.type==n.TILEMAPLAYER?e.type==n.SPRITE?this.collideSpriteVsTilemapLayer(e,t,i,r,s):(e.type==n.GROUP||e.type==n.EMITTER)&&this.collideGroupVsTilemapLayer(e,t,i,r,s):t.type==n.EMITTER&&(e.type==n.SPRITE?this.collideSpriteVsGroup(e,t,i,r,s):e.type==n.GROUP||e.type==n.EMITTER?this.collideGroupVsGroup(t,e,i,r,s):e.type==n.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(t,e,i,r,s))),this._total>0},collideSpriteVsTilemapLayer:function(t,e,i,n,r){if(this._mapData=e.getTiles(t.body.x,t.body.y,t.body.width,t.body.height,!0),0!==this._mapData.length)for(var s=0;s<this._mapData.length;s++)this.separateTile(t.body,this._mapData[s])&&(n?n.call(r,t,this._mapData[s])&&(this._total++,i&&i.call(r,t,this._mapData[s])):(this._total++,i&&i.call(r,t,this._mapData[s])))},collideGroupVsTilemapLayer:function(t,e,i,n,r){if(0!==t.length&&0!==t.length&&t._container.first._iNext){var s=t._container.first._iNext;do s.exists&&this.collideSpriteVsTilemapLayer(s,e,i,n,r),s=s._iNext;while(s!=t._container.last._iNext)}},collideSpriteVsSprite:function(t,e,i,n,r){this.separate(t.body,e.body),this._result&&(n?n.call(r,t,e)&&(this._total++,i&&i.call(r,t,e)):(this._total++,i&&i.call(r,t,e)))},collideSpriteVsGroup:function(t,e,i,n,r){if(0!==e.length){this._potentials=this.quadTree.retrieve(t);for(var s=0,o=this._potentials.length;o>s;s++)this._potentials[s].sprite.group==e&&(this.separate(t.body,this._potentials[s]),this._result&&n&&(this._result=n.call(r,t,this._potentials[s].sprite)),this._result&&(this._total++,i&&i.call(r,t,this._potentials[s].sprite)))}},collideGroupVsGroup:function(t,e,i,n,r){if(0!==t.length&&0!==e.length&&t._container.first._iNext){var s=t._container.first._iNext;do s.exists&&this.collideSpriteVsGroup(s,e,i,n,r),s=s._iNext;while(s!=t._container.last._iNext)}},separate:function(t,e){this._result=this.separateX(t,e)||this.separateY(t,e)},separateX:function(t,e){return t.immovable&&e.immovable?!1:(this._overlap=0,n.Rectangle.intersects(t,e)&&(this._maxOverlap=t.deltaAbsX()+e.deltaAbsX()+this.OVERLAP_BIAS,0===t.deltaX()&&0===e.deltaX()?(t.embedded=!0,e.embedded=!0):t.deltaX()>e.deltaX()?(this._overlap=t.x+t.width-e.x,this._overlap>this._maxOverlap||t.allowCollision.right===!1||e.allowCollision.left===!1?this._overlap=0:(t.touching.right=!0,e.touching.left=!0)):t.deltaX()<e.deltaX()&&(this._overlap=t.x-e.width-e.x,-this._overlap>this._maxOverlap||t.allowCollision.left===!1||e.allowCollision.right===!1?this._overlap=0:(t.touching.left=!0,e.touching.right=!0)),0!==this._overlap)?(t.overlapX=this._overlap,e.overlapX=this._overlap,t.customSeparateX||e.customSeparateX?!0:(this._velocity1=t.velocity.x,this._velocity2=e.velocity.x,t.immovable||e.immovable?t.immovable?e.immovable||(e.x+=this._overlap,e.velocity.x=this._velocity1-this._velocity2*e.bounce.x):(t.x=t.x-this._overlap,t.velocity.x=this._velocity2-this._velocity1*t.bounce.x):(this._overlap*=.5,t.x=t.x-this._overlap,e.x+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*e.mass/t.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*t.mass/e.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,t.velocity.x=this._average+this._newVelocity1*t.bounce.x,e.velocity.x=this._average+this._newVelocity2*e.bounce.x),t.updateHulls(),e.updateHulls(),!0)):!1)},separateY:function(t,e){return t.immovable&&e.immovable?!1:(this._overlap=0,n.Rectangle.intersects(t,e)&&(this._maxOverlap=t.deltaAbsY()+e.deltaAbsY()+this.OVERLAP_BIAS,0===t.deltaY()&&0===e.deltaY()?(t.embedded=!0,e.embedded=!0):t.deltaY()>e.deltaY()?(this._overlap=t.y+t.height-e.y,this._overlap>this._maxOverlap||t.allowCollision.down===!1||e.allowCollision.up===!1?this._overlap=0:(t.touching.down=!0,e.touching.up=!0)):t.deltaY()<e.deltaY()&&(this._overlap=t.y-e.height-e.y,-this._overlap>this._maxOverlap||t.allowCollision.up===!1||e.allowCollision.down===!1?this._overlap=0:(t.touching.up=!0,e.touching.down=!0)),0!==this._overlap)?(t.overlapY=this._overlap,e.overlapY=this._overlap,t.customSeparateY||e.customSeparateY?!0:(this._velocity1=t.velocity.y,this._velocity2=e.velocity.y,t.immovable||e.immovable?t.immovable?e.immovable||(e.y+=this._overlap,e.velocity.y=this._velocity1-this._velocity2*e.bounce.y,t.sprite.active&&t.moves&&t.deltaY()<e.deltaY()&&(e.x+=t.x-t.lastX)):(t.y=t.y-this._overlap,t.velocity.y=this._velocity2-this._velocity1*t.bounce.y,e.active&&e.moves&&t.deltaY()>e.deltaY()&&(t.x+=e.x-e.lastX)):(this._overlap*=.5,t.y=t.y-this._overlap,e.y+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*e.mass/t.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*t.mass/e.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,t.velocity.y=this._average+this._newVelocity1*t.bounce.y,e.velocity.y=this._average+this._newVelocity2*e.bounce.y),t.updateHulls(),e.updateHulls(),!0)):!1)
},separateTile:function(t,e){return this._result=this.separateTileX(t,e,!0)||this.separateTileY(t,e,!0),this._result},separateTileX:function(t,e,i){return t.immovable||0===t.deltaX()||n.Rectangle.intersects(t.hullX,e)===!1?!1:(this._overlap=0,t.deltaX()<0?(this._overlap=e.right-t.hullX.x,t.allowCollision.left===!1||e.tile.collideRight===!1?this._overlap=0:t.touching.left=!0):(this._overlap=t.hullX.right-e.x,t.allowCollision.right===!1||e.tile.collideLeft===!1?this._overlap=0:t.touching.right=!0),0!==this._overlap?(i&&(t.x=t.deltaX()<0?t.x+this._overlap:t.x-this._overlap,t.velocity.x=0===t.bounce.x?0:-t.velocity.x*t.bounce.x,t.updateHulls()),!0):!1)},separateTileY:function(t,e,i){return t.immovable||0===t.deltaY()||n.Rectangle.intersects(t.hullY,e)===!1?!1:(this._overlap=0,t.deltaY()<0?(this._overlap=e.bottom-t.hullY.y,t.allowCollision.up===!1||e.tile.collideDown===!1?this._overlap=0:t.touching.up=!0):(this._overlap=t.hullY.bottom-e.y,t.allowCollision.down===!1||e.tile.collideUp===!1?this._overlap=0:t.touching.down=!0),0!==this._overlap?(i&&(t.y=t.deltaY()<0?t.y+this._overlap:t.y-this._overlap,t.velocity.y=0===t.bounce.y?0:-t.velocity.y*t.bounce.y,t.updateHulls()),!0):!1)},moveToObject:function(t,e,i,n){return"undefined"==typeof i&&(i=60),"undefined"==typeof n&&(n=0),this._angle=Math.atan2(e.y-t.y,e.x-t.x),n>0&&(i=this.distanceBetween(t,e)/(n/1e3)),t.body.velocity.x=Math.cos(this._angle)*i,t.body.velocity.y=Math.sin(this._angle)*i,this._angle},moveToPointer:function(t,e,i,n){return"undefined"==typeof e&&(e=60),i=i||this.game.input.activePointer,"undefined"==typeof n&&(n=0),this._angle=this.angleToPointer(t,i),n>0&&(e=this.distanceToPointer(t,i)/(n/1e3)),t.body.velocity.x=Math.cos(this._angle)*e,t.body.velocity.y=Math.sin(this._angle)*e,this._angle},moveToXY:function(t,e,i,n,r){return"undefined"==typeof n&&(n=60),"undefined"==typeof r&&(r=0),this._angle=Math.atan2(i-t.y,e-t.x),r>0&&(n=this.distanceToXY(t,e,i)/(r/1e3)),t.body.velocity.x=Math.cos(this._angle)*n,t.body.velocity.y=Math.sin(this._angle)*n,this._angle},velocityFromAngle:function(t,e,i){return"undefined"==typeof e&&(e=60),i=i||new n.Point,i.setTo(Math.cos(this.game.math.degToRad(t))*e,Math.sin(this.game.math.degToRad(t))*e)},velocityFromRotation:function(t,e,i){return"undefined"==typeof e&&(e=60),i=i||new n.Point,i.setTo(Math.cos(t)*e,Math.sin(t)*e)},accelerationFromRotation:function(t,e,i){return"undefined"==typeof e&&(e=60),i=i||new n.Point,i.setTo(Math.cos(t)*e,Math.sin(t)*e)},accelerateToObject:function(t,e,i,n,r){return"undefined"==typeof i&&(i=60),"undefined"==typeof n&&(n=1e3),"undefined"==typeof r&&(r=1e3),this._angle=this.angleBetween(t,e),t.body.acceleration.setTo(Math.cos(this._angle)*i,Math.sin(this._angle)*i),t.body.maxVelocity.setTo(n,r),this._angle},accelerateToPointer:function(t,e,i,n,r){return"undefined"==typeof i&&(i=60),"undefined"==typeof e&&(e=this.game.input.activePointer),"undefined"==typeof n&&(n=1e3),"undefined"==typeof r&&(r=1e3),this._angle=this.angleToPointer(t,e),t.body.acceleration.setTo(Math.cos(this._angle)*i,Math.sin(this._angle)*i),t.body.maxVelocity.setTo(n,r),this._angle},accelerateToXY:function(t,e,i,n,r,s){return"undefined"==typeof n&&(n=60),"undefined"==typeof r&&(r=1e3),"undefined"==typeof s&&(s=1e3),this._angle=this.angleToXY(t,e,i),t.body.acceleration.setTo(Math.cos(this._angle)*n,Math.sin(this._angle)*n),t.body.maxVelocity.setTo(r,s),this._angle},distanceBetween:function(t,e){return this._dx=t.x-e.x,this._dy=t.y-e.y,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},distanceToXY:function(t,e,i){return this._dx=t.x-e,this._dy=t.y-i,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},distanceToPointer:function(t,e){return e=e||this.game.input.activePointer,this._dx=t.x-e.x,this._dy=t.y-e.y,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},angleBetween:function(t,e){return this._dx=e.x-t.x,this._dy=e.y-t.y,Math.atan2(this._dy,this._dx)},angleToXY:function(t,e,i){return this._dx=e-t.x,this._dy=i-t.y,Math.atan2(this._dy,this._dx)},angleToPointer:function(t,e){return e=e||this.game.input.activePointer,this._dx=e.worldX-t.x,this._dy=e.worldY-t.y,Math.atan2(this._dy,this._dx)}},n.Physics.Arcade.Body=function(t){this.sprite=t,this.game=t.game,this.offset=new n.Point,this.x=t.x,this.y=t.y,this.preX=t.x,this.preY=t.y,this.preRotation=t.angle,this.screenX=t.x,this.screenY=t.y,this.sourceWidth=t.currentFrame.sourceSizeW,this.sourceHeight=t.currentFrame.sourceSizeH,this.width=t.currentFrame.sourceSizeW,this.height=t.currentFrame.sourceSizeH,this.halfWidth=Math.floor(t.currentFrame.sourceSizeW/2),this.halfHeight=Math.floor(t.currentFrame.sourceSizeH/2),this.center=new n.Point(this.x+this.halfWidth,this.y+this.halfHeight),this._sx=t.scale.x,this._sy=t.scale.y,this.velocity=new n.Point,this.acceleration=new n.Point,this.drag=new n.Point,this.gravity=new n.Point,this.bounce=new n.Point,this.maxVelocity=new n.Point(1e4,1e4),this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.skipQuadTree=!1,this.quadTreeIDs=[],this.quadTreeIndex=-1,this.allowCollision={none:!1,any:!0,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.facing=n.NONE,this.immovable=!1,this.moves=!0,this.rotation=0,this.allowRotation=!0,this.allowGravity=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.hullX=new n.Rectangle,this.hullY=new n.Rectangle,this.embedded=!1,this.collideWorldBounds=!1},n.Physics.Arcade.Body.prototype={updateBounds:function(t,e,i,n){(i!=this._sx||n!=this._sy)&&(this.width=this.sourceWidth*i,this.height=this.sourceHeight*n,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this._sx=i,this._sy=n,this.center.setTo(this.x+this.halfWidth,this.y+this.halfHeight))},preUpdate:function(){this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.embedded=!1,this.screenX=this.sprite.worldTransform[2]-this.sprite.anchor.x*this.width+this.offset.x,this.screenY=this.sprite.worldTransform[5]-this.sprite.anchor.y*this.height+this.offset.y,this.preX=this.sprite.world.x-this.sprite.anchor.x*this.width+this.offset.x,this.preY=this.sprite.world.y-this.sprite.anchor.y*this.height+this.offset.y,this.preRotation=this.sprite.angle,this.x=this.preX,this.y=this.preY,this.rotation=this.preRotation,this.moves&&(this.game.physics.updateMotion(this),this.collideWorldBounds&&this.checkWorldBounds(),this.updateHulls()),this.skipQuadTree===!1&&this.allowCollision.none===!1&&this.sprite.visible&&this.sprite.alive&&(this.quadTreeIDs=[],this.quadTreeIndex=-1,this.game.physics.quadTree.insert(this))},postUpdate:function(){this.deltaX()<0?this.facing=n.LEFT:this.deltaX()>0&&(this.facing=n.RIGHT),this.deltaY()<0?this.facing=n.UP:this.deltaY()>0&&(this.facing=n.DOWN),(0!==this.deltaX()||0!==this.deltaY())&&(this.sprite.x+=this.deltaX(),this.sprite.y+=this.deltaY(),this.center.setTo(this.x+this.halfWidth,this.y+this.halfHeight)),this.allowRotation&&(this.sprite.angle+=this.deltaZ())},updateHulls:function(){this.hullX.setTo(this.x,this.preY,this.width,this.height),this.hullY.setTo(this.preX,this.y,this.width,this.height)},checkWorldBounds:function(){this.x<this.game.world.bounds.x?(this.x=this.game.world.bounds.x,this.velocity.x*=-this.bounce.x):this.right>this.game.world.bounds.right&&(this.x=this.game.world.bounds.right-this.width,this.velocity.x*=-this.bounce.x),this.y<this.game.world.bounds.y?(this.y=this.game.world.bounds.y,this.velocity.y*=-this.bounce.y):this.bottom>this.game.world.bounds.bottom&&(this.y=this.game.world.bounds.bottom-this.height,this.velocity.y*=-this.bounce.y)},setSize:function(t,e,i,n){i=i||this.offset.x,n=n||this.offset.y,this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(i,n),this.center.setTo(this.x+this.halfWidth,this.y+this.halfHeight)},reset:function(){this.velocity.setTo(0,0),this.acceleration.setTo(0,0),this.angularVelocity=0,this.angularAcceleration=0,this.preX=this.sprite.world.x-this.sprite.anchor.x*this.width+this.offset.x,this.preY=this.sprite.world.y-this.sprite.anchor.y*this.height+this.offset.y,this.preRotation=this.sprite.angle,this.x=this.preX,this.y=this.preY,this.rotation=this.preRotation,this.center.setTo(this.x+this.halfWidth,this.y+this.halfHeight)},deltaAbsX:function(){return this.deltaX()>0?this.deltaX():-this.deltaX()},deltaAbsY:function(){return this.deltaY()>0?this.deltaY():-this.deltaY()},deltaX:function(){return this.x-this.preX},deltaY:function(){return this.y-this.preY},deltaZ:function(){return this.rotation-this.preRotation}},Object.defineProperty(n.Physics.Arcade.Body.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t<=this.y?0:this.y-t}}),Object.defineProperty(n.Physics.Arcade.Body.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t<=this.x?0:this.x+t}}),n.Particles=function(t){this.game=t,this.emitters={},this.ID=0},n.Particles.prototype={add:function(t){return this.emitters[t.name]=t,t},remove:function(t){delete this.emitters[t.name]},update:function(){for(var t in this.emitters)this.emitters[t].exists&&this.emitters[t].update()}},n.Particles.Arcade={},n.Particles.Arcade.Emitter=function(t,e,i,r){this.maxParticles=r||50,n.Group.call(this,t),this.name="emitter"+this.game.particles.ID++,this.type=n.EMITTER,this.x=0,this.y=0,this.width=1,this.height=1,this.minParticleSpeed=new n.Point(-100,-100),this.maxParticleSpeed=new n.Point(100,100),this.minParticleScale=1,this.maxParticleScale=1,this.minRotation=-360,this.maxRotation=360,this.gravity=2,this.particleClass=null,this.particleDrag=new n.Point,this.angularDrag=0,this.frequency=100,this.lifespan=2e3,this.bounce=new n.Point,this._quantity=0,this._timer=0,this._counter=0,this._explode=!0,this.on=!1,this.exists=!0,this.emitX=e,this.emitY=i},n.Particles.Arcade.Emitter.prototype=Object.create(n.Group.prototype),n.Particles.Arcade.Emitter.prototype.constructor=n.Particles.Arcade.Emitter,n.Particles.Arcade.Emitter.prototype.update=function(){if(this.on)if(this._explode){this._counter=0;do this.emitParticle(),this._counter++;while(this._counter<this._quantity);this.on=!1}else this.game.time.now>=this._timer&&(this.emitParticle(),this._counter++,this._quantity>0&&this._counter>=this._quantity&&(this.on=!1),this._timer=this.game.time.now+this.frequency)},n.Particles.Arcade.Emitter.prototype.makeParticles=function(t,e,i,r,s){"undefined"==typeof e&&(e=0),i=i||this.maxParticles,r=r||0,"undefined"==typeof s&&(s=!1);for(var o,a=0,h=t,l=0;i>a;)null==this.particleClass&&("object"==typeof t&&(h=this.game.rnd.pick(t)),"object"==typeof e&&(l=this.game.rnd.pick(e)),o=new n.Sprite(this.game,0,0,h,l)),r>0?(o.body.allowCollision.any=!0,o.body.allowCollision.none=!1):o.body.allowCollision.none=!0,o.body.collideWorldBounds=s,o.exists=!1,o.visible=!1,o.anchor.setTo(.5,.5),this.add(o),a++;return this},n.Particles.Arcade.Emitter.prototype.kill=function(){this.on=!1,this.alive=!1,this.exists=!1},n.Particles.Arcade.Emitter.prototype.revive=function(){this.alive=!0,this.exists=!0},n.Particles.Arcade.Emitter.prototype.start=function(t,e,i,n){"boolean"!=typeof t&&(t=!0),e=e||0,i=i||250,n=n||0,this.revive(),this.visible=!0,this.on=!0,this._explode=t,this.lifespan=e,this.frequency=i,t?this._quantity=n:this._quantity+=n,this._counter=0,this._timer=this.game.time.now+i},n.Particles.Arcade.Emitter.prototype.emitParticle=function(){var t=this.getFirstExists(!1);if(null!=t){if(this.width>1||this.height>1?t.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):t.reset(this.emitX,this.emitY),t.lifespan=this.lifespan,t.body.bounce.setTo(this.bounce.x,this.bounce.y),t.body.velocity.x=this.minParticleSpeed.x!=this.maxParticleSpeed.x?this.game.rnd.integerInRange(this.minParticleSpeed.x,this.maxParticleSpeed.x):this.minParticleSpeed.x,t.body.velocity.y=this.minParticleSpeed.y!=this.maxParticleSpeed.y?this.game.rnd.integerInRange(this.minParticleSpeed.y,this.maxParticleSpeed.y):this.minParticleSpeed.y,t.body.gravity.y=this.gravity,t.body.angularVelocity=this.minRotation!=this.maxRotation?this.game.rnd.integerInRange(this.minRotation,this.maxRotation):this.minRotation,1!==this.minParticleScale||1!==this.maxParticleScale){var e=this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale);t.scale.setTo(e,e)}t.body.drag.x=this.particleDrag.x,t.body.drag.y=this.particleDrag.y,t.body.angularDrag=this.angularDrag}},n.Particles.Arcade.Emitter.prototype.setSize=function(t,e){this.width=t,this.height=e},n.Particles.Arcade.Emitter.prototype.setXSpeed=function(t,e){t=t||0,e=e||0,this.minParticleSpeed.x=t,this.maxParticleSpeed.x=e},n.Particles.Arcade.Emitter.prototype.setYSpeed=function(t,e){t=t||0,e=e||0,this.minParticleSpeed.y=t,this.maxParticleSpeed.y=e},n.Particles.Arcade.Emitter.prototype.setRotation=function(t,e){t=t||0,e=e||0,this.minRotation=t,this.maxRotation=e},n.Particles.Arcade.Emitter.prototype.at=function(t){this.emitX=t.center.x,this.emitY=t.center.y},Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"alpha",{get:function(){return this._container.alpha},set:function(t){this._container.alpha=t}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"visible",{get:function(){return this._container.visible},set:function(t){this._container.visible=t}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"x",{get:function(){return this.emitX},set:function(t){this.emitX=t}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"y",{get:function(){return this.emitY},set:function(t){this.emitY=t}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"left",{get:function(){return Math.floor(this.x-this.width/2)}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"right",{get:function(){return Math.floor(this.x+this.width/2)}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"top",{get:function(){return Math.floor(this.y-this.height/2)}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"bottom",{get:function(){return Math.floor(this.y+this.height/2)}}),n.Tile=function(t,e,i,n,r,s){this.tileset=t,this.index=e,this.width=r,this.height=s,this.x=i,this.y=n,this.mass=1,this.collideNone=!0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.separateX=!0,this.separateY=!0,this.collisionCallback=null,this.collisionCallbackContext=this},n.Tile.prototype={setCollisionCallback:function(t,e){this.collisionCallbackContext=e,this.collisionCallback=t},destroy:function(){this.tileset=null},setCollision:function(t,e,i,n){this.collideLeft=t,this.collideRight=e,this.collideUp=i,this.collideDown=n,this.collideNone=t||e||i||n?!1:!0},resetCollision:function(){this.collideNone=!0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1}},Object.defineProperty(n.Tile.prototype,"bottom",{get:function(){return this.y+this.height}}),Object.defineProperty(n.Tile.prototype,"right",{get:function(){return this.x+this.width}}),n.Tilemap=function(t,e){this.game=t,this.layers=null,"string"==typeof e?(this.key=e,this.layers=t.cache.getTilemapData(e).layers,this.calculateIndexes()):this.layers=[],this.currentLayer=0,this.debugMap=[],this.dirty=!1,this._results=[],this._tempA=0,this._tempB=0},n.Tilemap.CSV=0,n.Tilemap.TILED_JSON=1,n.Tilemap.prototype={create:function(t,e,i){for(var r=[],s=0;i>s;s++){r[s]=[];for(var o=0;e>o;o++)r[s][o]=0}this.layers.push({name:t,width:e,height:i,alpha:1,visible:!0,tileMargin:0,tileSpacing:0,format:n.Tilemap.CSV,data:r,indexes:[]}),this.currentLayer=this.layers.length-1,this.dirty=!0},calculateIndexes:function(){for(var t=0;t<this.layers.length;t++){this.layers[t].indexes=[];for(var e=0;e<this.layers[t].height;e++)for(var i=0;i<this.layers[t].width;i++){var n=this.layers[t].data[e][i];-1===this.layers[t].indexes.indexOf(n)&&this.layers[t].indexes.push(n)}}},setLayer:function(t){this.layers[t]&&(this.currentLayer=t)},putTile:function(t,e,i,n){"undefined"==typeof n&&(n=this.currentLayer),e>=0&&e<this.layers[n].width&&i>=0&&i<this.layers[n].height&&(this.layers[n].data[i][e]=t),this.dirty=!0},getTile:function(t,e,i){return"undefined"==typeof i&&(i=this.currentLayer),t>=0&&t<this.layers[i].width&&e>=0&&e<this.layers[i].height?this.layers[i].data[e][t]:void 0},getTileWorldXY:function(t,e,i,n,r){return"undefined"==typeof r&&(r=this.currentLayer),t=this.game.math.snapToFloor(t,i)/i,e=this.game.math.snapToFloor(e,n)/n,t>=0&&t<this.layers[r].width&&e>=0&&e<this.layers[r].height?this.layers[r].data[e][t]:void 0},putTileWorldXY:function(t,e,i,n,r,s){"undefined"==typeof s&&(s=this.currentLayer),e=this.game.math.snapToFloor(e,n)/n,i=this.game.math.snapToFloor(i,r)/r,e>=0&&e<this.layers[s].width&&i>=0&&i<this.layers[s].height&&(this.layers[s].data[i][e]=t),this.dirty=!0},copy:function(t,e,i,n,r){if("undefined"==typeof r&&(r=this.currentLayer),!this.layers[r])return this._results.length=0,void 0;"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=this.layers[r].width),"undefined"==typeof n&&(n=this.layers[r].height),0>t&&(t=0),0>e&&(e=0),i>this.layers[r].width&&(i=this.layers[r].width),n>this.layers[r].height&&(n=this.layers[r].height),this._results.length=0,this._results.push({x:t,y:e,width:i,height:n,layer:r});for(var s=e;e+n>s;s++)for(var o=t;t+i>o;o++)this._results.push({x:o,y:s,index:this.layers[r].data[s][o]});return this._results},paste:function(t,e,i,n){if("undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.currentLayer),i&&!(i.length<2)){for(var r=i[1].x-t,s=i[1].y-e,o=1;o<i.length;o++)this.layers[n].data[s+i[o].y][r+i[o].x]=i[o].index;this.dirty=!0}},swap:function(t,e,i,n,r,s,o){this.copy(i,n,r,s,o),this._results.length<2||(this._tempA=t,this._tempB=e,this._results.forEach(this.swapHandler,this),this.paste(i,n,this._results))},swapHandler:function(t,e){t.index===this._tempA?this._results[e].index=this._tempB:t.index===this._tempB&&(this._results[e].index=this._tempA)},forEach:function(t,e,i,n,r,s,o){this.copy(i,n,r,s,o),this._results.length<2||(this._results.forEach(t,e),this.paste(i,n,this._results))},replace:function(t,e,i,n,r,s,o){if(this.copy(i,n,r,s,o),!(this._results.length<2)){for(var a=1;a<this._results.length;a++)this._results[a].index===t&&(this._results[a].index=e);this.paste(i,n,this._results)}},random:function(t,e,i,n,r){if("undefined"==typeof r&&(r=this.currentLayer),this.copy(t,e,i,n,r),!(this._results.length<2)){for(var s=[],o=1;o<this._results.length;o++){var a=this._results[o].index;-1===s.indexOf(a)&&s.push(a)}for(var h=1;h<this._results.length;h++)this._results[h].index=this.game.rnd.pick(s);this.paste(t,e,this._results)}},shuffle:function(t,e,i,r,s){if("undefined"==typeof s&&(s=this.currentLayer),this.copy(t,e,i,r,s),!(this._results.length<2)){var o=this._results.shift();n.Utils.shuffle(this._results),this._results.unshift(o),this.paste(t,e,this._results)}},fill:function(t,e,i,n,r,s){if(this.copy(e,i,n,r,s),!(this._results.length<2)){for(var o=1;o<this._results.length;o++)this._results[o].index=t;this.paste(e,i,this._results)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){for(var t="",e=[""],i=0;i<this.layers[this.currentLayer].height;i++){for(var n=0;n<this.layers[this.currentLayer].width;n++)t+="%c  ",this.layers[this.currentLayer].data[i][n]>1?this.debugMap[this.layers[this.currentLayer].data[i][n]]?e.push("background: "+this.debugMap[this.layers[this.currentLayer].data[i][n]]):e.push("background: #ffffff"):e.push("background: rgb(0, 0, 0)");t+="\n"}e[0]=t,console.log.apply(console,e)},destroy:function(){this.removeAllLayers(),this.game=null}},n.TilemapLayer=function(t,e,r,s,o,a,h,l){this.game=t,this.canvas=n.Canvas.create(s,o),this.context=this.canvas.getContext("2d"),this.baseTexture=new i.BaseTexture(this.canvas),this.texture=new i.Texture(this.baseTexture),this.textureFrame=new n.Frame(0,0,0,s,o,"tilemaplayer",t.rnd.uuid()),n.Sprite.call(this,this.game,e,r,this.texture,this.textureFrame),this.type=n.TILEMAPLAYER,this.fixedToCamera=!0,this.tileset=null,this.tileWidth=0,this.tileHeight=0,this.tileMargin=0,this.tileSpacing=0,this.widthInPixels=0,this.heightInPixels=0,this.renderWidth=s,this.renderHeight=o,this._ga=1,this._dx=0,this._dy=0,this._dw=0,this._dh=0,this._tx=0,this._ty=0,this._tw=0,this._th=0,this._tl=0,this._maxX=0,this._maxY=0,this._startX=0,this._startY=0,this._results=[],this._x=0,this._y=0,this._prevX=0,this._prevY=0,this.scrollFactorX=1,this.scrollFactorY=1,this.tilemap=null,this.layer=null,this.index=0,this.dirty=!0,(a instanceof n.Tileset||"string"==typeof a)&&this.updateTileset(a),h instanceof n.Tilemap&&this.updateMapData(h,l)},n.TilemapLayer.prototype=Object.create(n.Sprite.prototype),n.TilemapLayer.prototype=n.Utils.extend(!0,n.TilemapLayer.prototype,n.Sprite.prototype,i.Sprite.prototype),n.TilemapLayer.prototype.constructor=n.TilemapLayer,n.TilemapLayer.prototype.update=function(){this.scrollX=this.game.camera.x*this.scrollFactorX,this.scrollY=this.game.camera.y*this.scrollFactorY,this.render()},n.TilemapLayer.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.widthInPixels,this.heightInPixels)},n.TilemapLayer.prototype.updateTileset=function(t){if(t instanceof n.Tileset)this.tileset=t;else{if("string"!=typeof t)return;this.tileset=this.game.cache.getTileset("tiles")}this.tileWidth=this.tileset.tileWidth,this.tileHeight=this.tileset.tileHeight,this.tileMargin=this.tileset.tileMargin,this.tileSpacing=this.tileset.tileSpacing,this.updateMax()},n.TilemapLayer.prototype.updateMapData=function(t,e){"undefined"==typeof e&&(e=0),t instanceof n.Tilemap&&(this.tilemap=t,this.layer=this.tilemap.layers[e],this.index=e,this.updateMax(),this.tilemap.dirty=!0)},n.TilemapLayer.prototype._fixX=function(t){if(1===this.scrollFactorX)return t;var e=t-this._x/this.scrollFactorX;return this._x+e},n.TilemapLayer.prototype._unfixX=function(t){if(1===this.scrollFactorX)return t;var e=t-this._x;return this._x/this.scrollFactorX+e},n.TilemapLayer.prototype._fixY=function(t){if(1===this.scrollFactorY)return t;var e=t-this._y/this.scrollFactorY;return this._y+e},n.TilemapLayer.prototype._unfixY=function(t){if(1===this.scrollFactorY)return t;var e=t-this._y;return this._y/this.scrollFactorY+e},n.TilemapLayer.prototype.getTileX=function(t){var e=this.tileWidth*this.scale.x;return this.game.math.snapToFloor(this._fixX(t),e)/e},n.TilemapLayer.prototype.getTileY=function(t){var e=this.tileHeight*this.scale.y;return this.game.math.snapToFloor(this._fixY(t),e)/e},n.TilemapLayer.prototype.getTileXY=function(t,e,i){return i.x=this.getTileX(t),i.y=this.getTileY(e),i},n.TilemapLayer.prototype.getTiles=function(t,e,i,n,r){if(null!==this.tilemap){"undefined"==typeof r&&(r=!1),0>t&&(t=0),0>e&&(e=0),t=this._fixX(t),e=this._fixY(e),i>this.widthInPixels&&(i=this.widthInPixels),n>this.heightInPixels&&(n=this.heightInPixels);var s=this.tileWidth*this.scale.x,o=this.tileHeight*this.scale.y;this._tx=this.game.math.snapToFloor(t,s)/s,this._ty=this.game.math.snapToFloor(e,o)/o,this._tw=(this.game.math.snapToCeil(i,s)+s)/s,this._th=(this.game.math.snapToCeil(n,o)+o)/o,this._results=[];for(var a=0,h=null,l=0,u=0,c=this._ty;c<this._ty+this._th;c++)for(var d=this._tx;d<this._tx+this._tw;d++)if(this.layer.data[c]&&this.layer.data[c][d]&&(a=this.layer.data[c][d]-1,h=this.tileset.getTile(a),l=h.width*this.scale.x,u=h.height*this.scale.y,r===!1||r&&h.collideNone===!1)){var p=this._unfixX(d*l)/s,f=this._unfixY(c*u)/o;this._results.push({x:p*l,right:p*l+l,y:f*u,bottom:f*u+u,width:l,height:u,tx:p,ty:f,tile:h})}return this._results}},n.TilemapLayer.prototype.updateMax=function(){this._maxX=this.game.math.ceil(this.canvas.width/this.tileWidth)+1,this._maxY=this.game.math.ceil(this.canvas.height/this.tileHeight)+1,this.layer&&(this._maxX>this.layer.width&&(this._maxX=this.layer.width),this._maxY>this.layer.height&&(this._maxY=this.layer.height),this.widthInPixels=this.layer.width*this.tileWidth,this.heightInPixels=this.layer.height*this.tileHeight),this.dirty=!0},n.TilemapLayer.prototype.render=function(){if(this.tilemap&&this.tilemap.dirty&&(this.dirty=!0),this.dirty&&this.tileset&&this.tilemap&&this.visible){this._prevX=this._dx,this._prevY=this._dy,this._dx=-(this._x-this._startX*this.tileWidth),this._dy=-(this._y-this._startY*this.tileHeight),this._tx=this._dx,this._ty=this._dy,this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=this._startY;t<this._startY+this._maxY;t++){this._column=this.layer.data[t];for(var e=this._startX;e<this._startX+this._maxX;e++){var r=this.tileset.tiles[this._column[e]-1];r&&this.context.drawImage(this.tileset.image,r.x,r.y,this.tileWidth,this.tileHeight,Math.floor(this._tx),Math.floor(this._ty),this.tileWidth,this.tileHeight),this._tx+=this.tileWidth}this._tx=this._dx,this._ty+=this.tileHeight}return this.game.renderType==n.WEBGL&&i.texturesToUpdate.push(this.baseTexture),this.dirty=!1,this.tilemap.dirty&&(this.tilemap.dirty=!1),!0}},n.TilemapLayer.prototype.deltaAbsX=function(){return this.deltaX()>0?this.deltaX():-this.deltaX()},n.TilemapLayer.prototype.deltaAbsY=function(){return this.deltaY()>0?this.deltaY():-this.deltaY()},n.TilemapLayer.prototype.deltaX=function(){return this._dx-this._prevX},n.TilemapLayer.prototype.deltaY=function(){return this._dy-this._prevY},Object.defineProperty(n.TilemapLayer.prototype,"scrollX",{get:function(){return this._x},set:function(t){t!==this._x&&t>=0&&this.layer&&(this._x=t,this._x>this.widthInPixels-this.renderWidth&&(this._x=this.widthInPixels-this.renderWidth),this._startX=this.game.math.floor(this._x/this.tileWidth),this._startX<0&&(this._startX=0),this._startX+this._maxX>this.layer.width&&(this._startX=this.layer.width-this._maxX),this.dirty=!0)}}),Object.defineProperty(n.TilemapLayer.prototype,"scrollY",{get:function(){return this._y},set:function(t){t!==this._y&&t>=0&&this.layer&&(this._y=t,this._y>this.heightInPixels-this.renderHeight&&(this._y=this.heightInPixels-this.renderHeight),this._startY=this.game.math.floor(this._y/this.tileHeight),this._startY<0&&(this._startY=0),this._startY+this._maxY>this.layer.height&&(this._startY=this.layer.height-this._maxY),this.dirty=!0)}}),n.TilemapParser={tileset:function(t,e,i,r,s,o,a){var h=t.cache.getTilesetImage(e);if(null==h)return null;var l=h.width,u=h.height;0>=i&&(i=Math.floor(-l/Math.min(-1,i))),0>=r&&(r=Math.floor(-u/Math.min(-1,r)));var c=Math.round(l/i),d=Math.round(u/r),p=c*d;if(-1!==s&&(p=s),0===l||0===u||i>l||r>u||0===p)return console.warn("Phaser.TilemapParser.tileSet: width/height zero or width/height < given tileWidth/tileHeight"),null;for(var f=o,m=o,g=new n.Tileset(h,e,i,r,o,a),y=0;p>y;y++)g.addTile(new n.Tile(g,y,f,m,i,r)),f+=i+a,f===l&&(f=o,m+=r+a);return g},parse:function(t,e,i){return i===n.Tilemap.CSV?this.parseCSV(e):i===n.Tilemap.TILED_JSON?this.parseTiledJSON(e):void 0},parseCSV:function(t){t=t.trim();for(var e=[],i=t.split("\n"),n=i.length,r=0,s=0;s<i.length;s++){e[s]=[];for(var o=i[s].split(","),a=0;a<o.length;a++)e[s][a]=parseInt(o[a],10);0===r&&(r=o.length)}return[{name:"csv",width:r,height:n,alpha:1,visible:!0,indexes:[],tileMargin:0,tileSpacing:0,data:e}]},parseTiledJSON:function(t){for(var e=[],i=0;i<t.layers.length;i++)if(t.layers[i].data){for(var n,r={name:t.layers[i].name,width:t.layers[i].width,height:t.layers[i].height,alpha:t.layers[i].opacity,visible:t.layers[i].visible,indexes:[],tileMargin:t.tilesets[0].margin,tileSpacing:t.tilesets[0].spacing},s=[],o=0,a=0;a<t.layers[i].data.length;a++)0===o&&(n=[]),n.push(t.layers[i].data[a]),o++,o==t.layers[i].width&&(s.push(n),o=0);r.data=s,e.push(r)}return e}},n.Tileset=function(t,e,i,n,r,s){"undefined"==typeof r&&(r=0),"undefined"==typeof s&&(s=0),this.key=e,this.image=t,this.tileWidth=i,this.tileHeight=n,this.margin=r,this.spacing=s,this.tiles=[]},n.Tileset.prototype={addTile:function(t){return this.tiles.push(t),t},getTile:function(t){return this.tiles[t]?this.tiles[t]:null},setSpacing:function(t,e){this.tileMargin=t,this.tileSpacing=e},canCollide:function(t){return this.tiles[t]?this.tiles[t].collideNone:null},checkTileIndex:function(t){return this.tiles[t]},setCollisionRange:function(t,e,i,n,r,s){if(this.tiles[t]&&this.tiles[e]&&e>t)for(var o=t;e>=o;o++)this.tiles[o].setCollision(i,n,r,s)},setCollision:function(t,e,i,n,r){this.tiles[t]&&this.tiles[t].setCollision(e,i,n,r)}},Object.defineProperty(n.Tileset.prototype,"total",{get:function(){return this.tiles.length}}),i.CanvasRenderer.prototype.render=function(t){i.texturesToUpdate.length=0,i.texturesToDestroy.length=0,i.visibleCount++,t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(t),i.Texture.frameUpdates.length>0&&(i.Texture.frameUpdates.length=0)},i.CanvasRenderer.prototype.renderDisplayObject=function(t){var e=t.last._iNext;t=t.first;do if(t.visible)if(t.renderable&&0!==t.alpha){if(t instanceof i.Sprite)t.texture.frame&&(this.context.globalAlpha=t.worldAlpha,t.texture.trimmed?this.context.setTransform(t.worldTransform[0],t.worldTransform[3],t.worldTransform[1],t.worldTransform[4],t.worldTransform[2]+t.texture.trim.x,t.worldTransform[5]+t.texture.trim.y):this.context.setTransform(t.worldTransform[0],t.worldTransform[3],t.worldTransform[1],t.worldTransform[4],t.worldTransform[2],t.worldTransform[5]),this.context.drawImage(t.texture.baseTexture.source,t.texture.frame.x,t.texture.frame.y,t.texture.frame.width,t.texture.frame.height,t.anchor.x*-t.texture.frame.width,t.anchor.y*-t.texture.frame.height,t.texture.frame.width,t.texture.frame.height));else if(t instanceof i.Strip)this.context.setTransform(t.worldTransform[0],t.worldTransform[3],t.worldTransform[1],t.worldTransform[4],t.worldTransform[2],t.worldTransform[5]),this.renderStrip(t);else if(t instanceof i.TilingSprite)this.context.setTransform(t.worldTransform[0],t.worldTransform[3],t.worldTransform[1],t.worldTransform[4],t.worldTransform[2],t.worldTransform[5]),this.renderTilingSprite(t);else if(t instanceof i.CustomRenderable)t.renderCanvas(this);else if(t instanceof i.Graphics)this.context.setTransform(t.worldTransform[0],t.worldTransform[3],t.worldTransform[1],t.worldTransform[4],t.worldTransform[2],t.worldTransform[5]),i.CanvasGraphics.renderGraphics(t,this.context);else if(t instanceof i.FilterBlock)if(t.open){this.context.save();var n=t.mask.alpha,r=t.mask.worldTransform;this.context.setTransform(r[0],r[3],r[1],r[4],r[2],r[5]),t.mask.worldAlpha=.5,this.context.worldAlpha=0,i.CanvasGraphics.renderGraphicsMask(t.mask,this.context),this.context.clip(),t.mask.worldAlpha=n}else this.context.restore();t=t._iNext}else t=t._iNext;else t=t.last._iNext;while(t!=e)},i.WebGLBatch.prototype.update=function(){for(var t,e,n,r,s,o,a,h,l,u,c,d,p,f,m,g,y=0,v=this.head;v;){if(v.vcount===i.visibleCount){if(e=v.texture.frame.width,n=v.texture.frame.height,r=v.anchor.x,s=v.anchor.y,o=e*(1-r),a=e*-r,h=n*(1-s),l=n*-s,u=8*y,t=v.worldTransform,c=t[0],d=t[3],p=t[1],f=t[4],m=t[2],g=t[5],v.texture.trimmed&&(m+=v.texture.trim.x,g+=v.texture.trim.y),this.verticies[u+0]=c*a+p*l+m,this.verticies[u+1]=f*l+d*a+g,this.verticies[u+2]=c*o+p*l+m,this.verticies[u+3]=f*l+d*o+g,this.verticies[u+4]=c*o+p*h+m,this.verticies[u+5]=f*h+d*o+g,this.verticies[u+6]=c*a+p*h+m,this.verticies[u+7]=f*h+d*a+g,v.updateFrame||v.texture.updateFrame){this.dirtyUVS=!0;var x=v.texture,_=x.frame,b=x.baseTexture.width,w=x.baseTexture.height;this.uvs[u+0]=_.x/b,this.uvs[u+1]=_.y/w,this.uvs[u+2]=(_.x+_.width)/b,this.uvs[u+3]=_.y/w,this.uvs[u+4]=(_.x+_.width)/b,this.uvs[u+5]=(_.y+_.height)/w,this.uvs[u+6]=_.x/b,this.uvs[u+7]=(_.y+_.height)/w,v.updateFrame=!1}if(v.cacheAlpha!=v.worldAlpha){v.cacheAlpha=v.worldAlpha;var T=4*y;this.colors[T]=this.colors[T+1]=this.colors[T+2]=this.colors[T+3]=v.worldAlpha,this.dirtyColors=!0}}else u=8*y,this.verticies[u+0]=0,this.verticies[u+1]=0,this.verticies[u+2]=0,this.verticies[u+3]=0,this.verticies[u+4]=0,this.verticies[u+5]=0,this.verticies[u+6]=0,this.verticies[u+7]=0;y++,v=v.__next}},n}),$(function(){function t(){function t(){var t={spritesheet:{birdie:["/assets/birdie-b621934b023e1ca981abaef7507612fa.png",24,16],clouds:["/assets/clouds-ddf8dd430a1d1eca1c3c3ae834d60b93.png",128,64]},image:{finger:["/assets/finger-4ba66b56f35caf4a95106823610136d6.png"],fence:["/assets/fence-f5a2700d16137cb0889f1757f09548f3.png"],spaceBg:["/assets/space-43095b0b6c1b83f144b523d25b247459.jpg"]},audio:{flap:["/assets/meow-420159eb0ef65531cece3bd7fb3b4443.wav"],score:["/assets/score-ae28ed4c8966d387cde5e73a716dacfa.wav"],hurt:["/assets/hurt-1f911e1462c63c815e62e54e244ee948.wav"]}};
Object.keys(t).forEach(function(e){Object.keys(t[e]).forEach(function(i){U.load[e].apply(U.load,[i].concat(t[e][i]))})})}function a(){var t=N.clientWidth>window.innerWidth?window.innerWidth:N.clientWidth,e=N.clientHeight>window.innerHeight?window.innerHeight:N.clientHeight;U.world.width=t,U.world.height=e,w=U.add.graphics(0,0),background=U.add.tileSprite(0,0,U.world.width,U.world.height,"spaceBg"),T=U.add.text(U.world.width/2,10,"",{font:'8px "Press Start 2P"',fill:"#fff",align:"center"}),T.anchor.x=.5,S=U.add.group(),A=U.add.group(),C=U.add.group(),R=U.add.sprite(0,0,"birdie"),R.anchor.setTo(.5,.5),R.animations.add("fly",[0,1,2,3],10,!0),R.inputEnabled=!0,R.body.collideWorldBounds=!0,R.body.gravity.y=n,E=U.add.tileSprite(0,U.world.height-32,U.world.width,32,"fence"),E.tileScale.setTo(2,2),P=U.add.text(U.world.width/2,U.world.height/4,"",{font:'16px "Press Start 2P"',fill:"#fff",stroke:"#430",strokeThickness:4,align:"center"}),P.anchor.setTo(.5,.5),L=U.add.text(U.world.width/2,U.world.height-U.world.height/4,"",{font:'8px "Press Start 2P"',fill:"#fff",stroke:"#430",strokeThickness:4,align:"center"}),L.anchor.setTo(.5,.5),D=U.add.text(U.world.width/2,U.world.height/2,"",{font:'16px "Press Start 2P"',fill:"#fff",stroke:"#430",strokeThickness:4,align:"center"}),D.anchor.setTo(.5,.5),D.scale.setTo(2,2),k=U.add.audio("flap"),O=U.add.audio("score"),F=U.add.audio("hurt"),U.input.onDown.add(u),I=new Phaser.Timer(U),I.onEvent.add(c),I.start(),I.add(Math.random()),h()}function h(){x=!1,_=!1,b=0,T.renderable=!0,P.setText("Ploppy Cat?"),L.setText("CLICK TO START\nPLOPPY CAT"),D.renderable=!1,R.body.allowGravity=!1,R.angle=0,R.reset(U.world.width/4,U.world.height/2),R.scale.setTo(2,2),R.animations.play("fly"),A.removeAll(),C.removeAll()}function l(){T.renderable=!1,R.body.allowGravity=!0,M=new Phaser.Timer(U),M.onEvent.add(f),M.start(),M.add(2),P.setText(b),L.renderable=!1,x=!0}function u(){x||l(),_||(R.body.velocity.y=-r,k.play())}function c(){I.stop();var t=Math.random()*U.height/2,e=S.create(U.width,t,"clouds",Math.floor(4*Math.random())),n=2+2*Math.random();e.alpha=2/n,e.scale.setTo(n,n),e.body.allowGravity=!1,e.body.velocity.x=-i/n,e.anchor.y=0,I.start(),I.add(4*Math.random())}function d(){return o+60*((b>50?50:50-b)/50)}function p(t,e){var n=A.create(U.width,t+(e?-d():d())/2,"finger");return n.body.allowGravity=!1,n.scale.setTo(2,e?-2:2),n.body.offset.y=e?2*-n.body.height:0,n.body.velocity.x=-i,n}function f(){M.stop();var t=(U.height-16-d()/2)/2+(Math.random()>.5?-1:1)*Math.random()*U.height/6,e=(p(t),p(t,!0)),n=C.create(e.x+e.width,0);n.width=2,n.height=U.world.height,n.body.allowGravity=!1,n.body.velocity.x=-i,M.start(),M.add(1/s)}function m(t,e){C.remove(e),b+=1,P.setText(b),O.play()}function g(){_=!0,L.setText("CLICK CAT\nTO TRY AGAIN"),L.renderable=!0;var t=window.localStorage.getItem("hiscore");t=t?t:b,t=b>parseInt(t,10)?b:t,window.localStorage.setItem("hiscore",t),D.setText("GAMEOVER\n\nHIGH SCORE\n"+t),D.renderable=!0,A.forEachAlive(function(t){t.body.velocity.x=0}),C.forEach(function(t){t.body.velocity.x=0}),M.stop(),R.events.onInputDown.addOnce(h),F.play()}function y(){if(x){var t=r+R.body.velocity.y;R.angle=90*t/r-180,R.angle<-30&&(R.angle=-30),_||R.angle>90||R.angle<-90?(R.angle=90,R.animations.stop(),R.frame=3):R.animations.play("fly"),_?(R.scale.x<4&&R.scale.setTo(1.2*R.scale.x,1.2*R.scale.y),D.angle=5*Math.random()*Math.cos(U.time.now/100)):(U.physics.overlap(R,A,g),!_&&R.body.bottom>=U.world.bounds.bottom&&g(),U.physics.overlap(R,C,m)),A.forEachAlive(function(t){t.x+t.width<U.world.bounds.left&&t.kill()}),M.update()}else R.y=U.world.height/2+8*Math.cos(U.time.now/200);(!x||_)&&L.scale.setTo(2+.1*Math.sin(U.time.now/100),2+.1*Math.cos(U.time.now/100)),P.scale.setTo(2+.1*Math.cos(U.time.now/100),2+.1*Math.sin(U.time.now/100)),I.update(),S.forEachAlive(function(t){t.x+t.width<U.world.bounds.left&&t.kill()}),_||(E.tilePosition.x-=U.time.physicsElapsed*i/2)}function v(){e&&(U.debug.renderSpriteBody(R),A.forEachAlive(function(t){U.debug.renderSpriteBody(t)}),C.forEach(function(t){U.debug.renderSpriteBody(t)}))}var x,_,b,w,T,S,A,C,R,E,P,L,D,k,O,F,M,I,B={preload:t,create:a,update:y,render:v},N=document.querySelector("#screen"),U=new Phaser.Game(0,0,Phaser.CANVAS,N,B,!1,!1)}if(0===$("#screen").length)return!1;var e=!1,i=450,n=40,r=620,s=1,o=140;WebFontConfig={google:{families:["Press+Start+2P::latin"]},active:t},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()});